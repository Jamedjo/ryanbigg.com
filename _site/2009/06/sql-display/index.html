<!DOCTYPE HTML>
<html>
  <head>
    <link rel='stylesheet' href='/css/style.css'>
  <body>
    <h1 align='center'><a href='http://ryanbigg.com'>The Life of a Radar</a></h1>
    <div id='page'>
      <article>
        <a href="/2009/06/sql-display"><header>SQL Display</header></a>
        <small>11 Jun 2009</small><br>
        <p>Sometimes you want to see a query (or queries) that were executed by a model call that you just did. To do this you have to either set up some hax in your irb configuration or you could now use <a href='http://github.com/radar/sql_display'>SQL Display</a>.</p>

<p>SQL Display&#8217;s been an idea that has been thrown around in the Mocra offices for a while and after Bo Jeanes&#8217; and Ben Hoskings&#8217; conversation on twitter last night about the syntax I decided to try my hand at it. The code itself is&#8230; not pretty. I warn you of this now before you go trumping through the source code and discover something analogous to a large heap of elephant dung; but it&#8217;s functional!</p>

<p>One of the fun things about implementing this plugin was how ActiveRecord implements its logger. When it initialises a new connection it passes the logger object at the time to the connection adapter object so it&#8217;s set there For All Time.</p>

<p>SQL Display works by storing what the old logger was, setting the new logger to a file called <em>tmp/sql_display.log</em>, re-establishing the connection, running your query, removing all the colour &amp; extraneous crap from the logs and stores it, removes the log, sets the logger back and again re-establishes the connection.</p>

<p>Patches welcome.</p>
      </article>
    </div>
    <div id='disqus_thread'></div>
    <script type="text/javascript">
        var disqus_shortname = 'ryanbigg'; // required: replace example with your forum shortname

        var disqus_identifier = '603 http://ryanbigg.com/?p=603'
        var disqus_url = 'http://ryanbigg.com/2009/06/sql-display';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        
  </body>
</html>
