<!DOCTYPE HTML>
<html>
  <head>
    <link rel='stylesheet' href='css/style.css'>
  <body>
    <p>After seeing <a href='http://errtheblog.com/posts/51-sexy-migrations'>a post on errtheblog</a> about them making migrations sexier, I was inspired on the train ride this morning to write something similar. I had a table and I wanted to drop many columns for it and I ended up writing something like: <pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;pre lang=&quot;ruby&quot;&gt; remove_column :table, :column_1</pre></p>

<p>remove_column :table, :column_2</p>

<p>remove_column :table, :column_3</p>

<p>remove_column :table, :column_4&#8230;&lt;/pre&gt; and by now you&#8217;re starting to get the idea. I have to not only type out remove_column four times, but also the table name! What a waste of time!</p>

<p>So I hacked up some code and put it into lib/custom_methods.rb.</p>
<pre lang='ruby'> module ActiveRecord
module ConnectionAdapters
class MysqlAdapter
def remove_columns(table_name, *columns)
columns.each { |column| remove_column table_name, column }
end
def add_columns(table_name, type, *columns)
columns.each { |column| add_column table_name, column, type}
end
end
end
end</pre>
<p>So now instead of the monstrosity above I can now type:</p>
<pre lang='ruby'>remove_columns :table, :column_1, :column_2, :column_3, :column_4</pre>
<p>to remove all the columns.</p>

<p>Also inspired by remove_columns was add_columns (already spied by the observant few). There&#8217;s a little difference in add_columns compared with add_column, the type is now the second argument instead of the third:</p>
<pre lang='ruby'>add_columns :table, :string, :column_1, :column_2, :column_3</pre>
  </body>
</html>