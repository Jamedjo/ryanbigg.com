<!DOCTYPE HTML>
<html>
  <head>
    <title>Blog of Ryan Bigg - Home</title>
    <link href="http://feeds.feedburner.com/ryanbigg" rel="alternate" title="The Life of a Radar" type="application/atom+xml" />
    <link rel='stylesheet' href='/css/style.css' media='screen'>
    <link rel='stylesheet' href='/css/mobile.css'>
  <body>
    <h1 align='center'>The Life of a Radar</h1>
    <div id='page'>
      <div id="header">
        <p>Hi there, my parents and friends call me Ryan Bigg, but you may know me as "Radar". Either is fine.</p>
        <p>I'm a technical writer for Ruby / Rails based in Australia. I'm currently writing a book with <a href="http://yehudakatz.com">Yehuda Katz</a> called <a href="http://manning.com/katz">Rails 3 in Action</a>.</p>

        <div id="more">
          <p> If you like what we do, support us by <a href="http://manning.com/katz">buying a copy</a>. You can also <a href="http://feeds.feedburner.com/ryanbigg">subscribe to this blog</a>.</p>
          <p> Occasionally I find some time to write interesting blog posts such as the ones you see below.</p>
          <p>I also have done quite a lot of <a href="http://github.com/radar">open-source work</a> and I <a href="http://twitter.com/ryanbigg">tweet</a>. Find out more <a href="http://ryanbigg.com/about-me">about me</a>.</p> 
        </div>
      </div>
      <header></header>
      

<!-- Layout inspired by Nick Quaranto's "Litany Against Fear" blog 
     http://litanyagainstfear.com -->
<div id='page'>
  <article>
    <a href="/2011/03/when-to-cuke"><header>When to Cuke</header></a>
    <small>03 Mar 2011</small><br>
    <p>I think <a href='http://github.com/aslakhellesoy/cucumber'>Cucumber</a> is great, but not great for everything. Many people (including myself) use it and swear by it. You get to write <em>features</em> in <em>English</em> (or other languages), man. It&#8217;s really awesome if you want to show these stories to people who you&#8217;re developing for as they can read it and understand it.</p>

<p>I personally feel, in some cases, Cucumber isn&#8217;t the right solution. If you&#8217;re developing something that has no non-Ruby savvy stakeholder, why would you write it in Cucumber? I personally don&#8217;t see the point. It overly complicates things.</p>

<p>Take this example: I want to create a feature for posting a new comment on a post. It would go like this:</p>

<pre><code>Feature: Comments
In order to tell the masses what&#39;s on my mind
As a user
I want to post comments on the site

Background:
  Given there is a post:
    | title        | text                         |
    | When to Cuke | I think Cucumber is great... |

Scenario: Creating a comment
  Given I am on the homepage
  When I follow &quot;When to Cuke&quot;
  And I fill in &quot;Text&quot; with &quot;I am posting a comment. Look at me go!&quot;
  And I press &quot;Post Comment&quot;
  Then I should see &quot;I am posting a comment.&quot; within &quot;#comments&quot;</code></pre>

<p>I&#8217;ve tried to keep it as simple as I can here, but it should demonstrate the point I am trying to make. The logic of how the &#8220;Given there is a post&#8221; step is defined something like this:</p>

<pre><code>Given /^there is a post:$/ do |table|
  hash = table.hashes.first
  @post = Post.create!(hash)
end</code></pre>

<p>Where&#8217;s it defined? Well, it could be anywhere. That&#8217;s the problem! Usually, I&#8217;d define this in a file at <code>features/step_definitions/post_steps.rb</code> because it deals with <code>Post</code> objects, but that&#8217;s just me. People have different tastes and therefore, undoubtedly, will do it differently. Maybe I&#8217;ve been too mollycoddled by Rails, but this is completely arbitrarily decided by whoever&#8217;s writing the feature at the time. It gets to me.</p>

<p>Oh, then what happens if you want to have some kind of association, say you want to add an author to that post, transforming the step into this:</p>

<pre><code>Given there is a post:
  | title        | text                         | author                  |
  | When to Cuke | I think Cucumber is great... | radarlistener@gmail.com |</code></pre>

<p>Yes, it&#8217;s an email address. But what does it mean? Well, that behaviour would have to be defined in the step definition, which is &#8220;in another castle&#8221;.</p>

<pre><code>Given /^there is a post:$/ do |table|
   hash = table.hashes.first
   hash[&quot;author&quot;] = Factory(:user, :email =&gt; hash[&quot;author&quot;])
   @post = Post.create!(hash)
 end</code></pre>

<p>There&#8217;s no way you can specify a pre-existing Ruby object to be a value for one of the keys in the table in Cucumber. Therefore, you have to hack around it like this.</p>

<p>Additional gripe: I&#8217;m constantly typing &#8220;Given I&#8221; and &#8220;When I&#8221; and &#8220;And I&#8221;. <strong>Boring</strong>. I&#8217;m a programmer, coding a site that programmers will use. Why am I writing it in English?</p>

<h2 id='enter_capybara'>Enter: Capybara</h2>

<p>Now let&#8217;s see this <em>same</em> test, but written as a Capybara integration test:</p>

<pre><code>describe &quot;Comments&quot; do
  before do
    Factory(:post, :title =&gt; &quot;When to Cuke&quot;,
                   :text =&gt; &quot;I think Cucumber is great...&quot;,
                   :user =&gt; Factory(:user, :email =&gt; &quot;radarlistener@gmail.com&quot;))
  end
  
  it &quot;creating a comment&quot; do
    visit root_path
    click_link &quot;When to Cuke&quot;
    fill_in &quot;Text&quot;, :with =&gt; &quot;I am posting a comment. Look at me go!&quot;
    click_button &quot;Post Comment&quot;
    within(&quot;#comments&quot;) do
      page.should have_content(&quot;I am posting a comment. Look at me go!&quot;)
    end
  end
end</code></pre>

<p>No bullshit, everything&#8217;s there that I need to understand the spec. There are no step definitions. I can &#8220;parse&#8221; this code much faster in my head than I can with its Cucumber brother, allowing me to be a more productive developer. There&#8217;s nothing extra on the lines. No &#8220;Given&#8221;, no &#8220;When&#8221;, it just <em>does</em> things. There&#8217;s nobody on my team that doesn&#8217;t understand this code.</p>

<p>Note also here how I&#8217;m able to pass through an object to the <code>user</code> key in the <code>Post</code> factory without having to hack around it.</p>

<p>Simple, elegant and effective. Yes please. Oh, and it&#8217;s shorter too. I&#8217;m using RSpec + Capybara to develop the <a href='http://github.com/radar/forem'>forem gem</a> (eventual aim: a decent forum engine for Rails 3) and I&#8217;m loving it. It just works, and there&#8217;s no extraneous syntax in my specs.</p>

<p>If you&#8217;re working with people who aren&#8217;t technically-inclined then perhaps it would be easier to use Cucumber, as it is the easiest to read. But when working on a team of Ruby developers, developing something internal, I think Capybara is the way to go. If you&#8217;re looking for a way to combine the two techniques then I&#8217;d recommend taking a look at <a href='http://github.com/cavalle/steak'>cavalle's steak</a> gem.</p>
  </article>
</div>

<div id='archive'>
  <h2>25 back</h2>
  <ul>
    
      <li><a href="/2011/02/rtfm">RTFM</a><abbr>01 Feb 2011</abbr></li>
  
      <li><a href="/2011/01/rails-3-in-action-50-off">Rails 3 in Action: 50% off</a><abbr>27 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/why-pivotal-now-charging-for-tracker-is-a-good-thing">Why Pivotal now charging for Tracker is a good thing</a><abbr>20 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/rails-3-in-action-saas">Rails 3 in Action: SaaS</a><abbr>06 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/why-you-should-run-bundle-update">Why you should run bundle update</a><abbr>04 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/extending-active-record">Extending Active Record</a><abbr>02 Jan 2011</abbr></li>
  
      <li><a href="/2010/12/converting-from-wordpress-to-jekyll">Converting from WordPress to Jekyll</a><abbr>27 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/ubuntu-ruby-rvm-rails-and-you">Ubuntu, Ruby, RVM, Rails, and You</a><abbr>25 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/rails-routing-and-automatic-assumptions">Rails routing and automatic assumptions</a><abbr>19 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/asking-questions-the-right-way">Asking Questions The Right Way</a><abbr>16 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/the-writing-process">The Writing Process</a><abbr>11 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/commit-it-or-else">Commit it, or else!</a><abbr>09 Dec 2010</abbr></li>
  
      <li><a href="/2010/11/paths-vs-subdomains">Paths vs Subdomains</a><abbr>28 Nov 2010</abbr></li>
  
      <li><a href="/2010/11/dollars-to-documentation">Dollars to Documentation</a><abbr>25 Nov 2010</abbr></li>
  
      <li><a href="/2010/11/looking-for-sponsors">Looking for Sponsors</a><abbr>19 Nov 2010</abbr></li>
  
      <li><a href="/2010/11/the-rails-3-upgrade">The Rails 3 Upgrade</a><abbr>07 Nov 2010</abbr></li>
  
      <li><a href="/2010/10/gone-from-getup">Gone from GetUp</a><abbr>30 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/writing-isnt-all-rainbows">Writing isn't all rainbows</a><abbr>19 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/lighthouse-has-problems-but-theyre-fixing-them">Lighthouse has problems, but they're fixing them</a><abbr>11 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/lighthouse-has-problems">Lighthouse has problems</a><abbr>06 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/gem-development-guide">Gem Development Guide</a><abbr>01 Oct 2010</abbr></li>
  
      <li><a href="/2010/09/advanced-rails-documentation">Advanced Rails Documentation</a><abbr>30 Sep 2010</abbr></li>
  
      <li><a href="/2010/09/you-suck">You suck.</a><abbr>24 Sep 2010</abbr></li>
  
      <li><a href="/2010/09/need-noobs">Need Newbies</a><abbr>23 Sep 2010</abbr></li>
  
      <li><a href="/2010/09/the-fake-update">The Fake Update</a><abbr>17 Sep 2010</abbr></li>
  
  </ul>
  <center><a href='/blogography.html'>The Complete Blogography</a></center>
</div>

    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-396182-13");
    pageTracker._setDomainName("none");
    pageTracker._setAllowLinker(true);
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>