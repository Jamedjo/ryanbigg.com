<!DOCTYPE HTML>
<html>
  <head>
    <title>Blog of Ryan Bigg - Home</title>
    <link href="http://feeds.feedburner.com/ryanbigg" rel="alternate" title="The Life of a Radar" type="application/atom+xml" />
    <link rel='stylesheet' href='/css/style.css' media='screen'>
    <link rel='stylesheet' href='/css/mobile.css'>
  <body>
    <h1 align='center'>The Life of a Radar</h1>
    <div id='page'>
      <div id="header">
        <p>Hi there, my parents and friends call me Ryan Bigg, but you may know me as "Radar". Either is fine.</p>
        <p>I'm a technical writer for Ruby / Rails based in Australia. I'm currently writing a book with <a href="http://yehudakatz.com">Yehuda Katz</a> called <a href="http://manning.com/katz">Rails 3 in Action</a>.</p>

        <div id="more">
          <p> If you like what we do, support us by <a href="http://manning.com/katz">buying a copy</a>. You can also <a href="http://feeds.feedburner.com/ryanbigg">subscribe to this blog</a>.</p>
          <p> Occasionally I find some time to write interesting blog posts such as the ones you see below.</p>
          <p>I also have done quite a lot of <a href="http://github.com/radar">open-source work</a> and I <a href="http://twitter.com/ryanbigg">tweet</a>. Find out more <a href="http://ryanbigg.com/about-me">about me</a>.</p> 
        </div>
      </div>
      <header></header>
      

<!-- Layout inspired by Nick Quaranto's "Litany Against Fear" blog 
     http://litanyagainstfear.com -->
<div id='page'>
  <article>
    <a href="/2011/03/code-doesn-t-protect-against-stupid"><header>Code doesn't protect against stupid</header></a>
    <small>06 Mar 2011</small><br>
    <p>Herein lies a tale of woe, heartache and eventual triumph over stupidity.</p>

<p>I&#8217;ve been developing <a href='http://github.com/radar/forem'>forum engine</a> for the past week or so as part of my research for the engines chapter on Rails 3 in Action. It&#8217;s been an interesting experience.</p>

<p>This afternoon, I was contacted by Adam McDonald who&#8217;s working with me on it as part of a learning exercise for him and free labour for myself. He asked questions about how to get the engine running so that he could see it and I told him to run <code>bundle exec rails s</code> and go to <code>http://localhost:3000/forem</code>. Only one of those two things worked. So I told him to instead just run the tests and I&#8217;d take a look at the issue later on, as I was completing Chapter 13 of the book.</p>

<p>So now (actually, just previous to this post) I remembered the issue and tried it myself. It was still broken! This was simply because we didn&#8217;t have a <code>root</code> route defined in the routes file, like <a href='https://github.com/radar/forem/commit/f0d9f261d1ad4af2350c5c074b4767761f467070'>this commit adds</a>. So I added one.</p>

<p>Then I saw <code>uninitialized constant Forem::ForumsController</code>.</p>

<p>WHAT?! How <em>dare</em> code be broken on my watch! The tests passed, so this code had absolutely no reason to be broken. I thought it may have been because the engine wasn&#8217;t loading the controllers in that special mode of <code>bundle exec rails s</code>. It turns out I was almost right.</p>

<p>So I got hacky and ended up doing a <code>require ENGINE_ROOT + &quot;app/controllers/forem/forums_controller&quot;</code> which just <em>didn&#8217;t</em> work. I checked that <code>ENGINE_ROOT + &quot;app/controllers/forem&quot;</code> was indeed the right path by using <code>File.expand_path</code> and then copy+pasting it to the command line and <code>cd</code>&#8216;ing into the directory. That god damned file was there.</p>

<p>A moment of swearing took place where I ranted in IRC and to Adam about the lack of documentation on engines making things impossible.</p>

<p>Then when I calmed down, I went back into the console and saw this.</p>

<p><img src='https://img.skitch.com/20110306-dgugwhpaij8h38fjqifxbg42se.png' alt='Only one l' /></p>

<p>The well-trained eye (not mine) would see quite immediately that <code>forums_controler.rb</code> is missing an l.</p>

<h3 id='so_why_did_this_work_in_the_first_place'>So why did this work in the first place?</h3>

<p>Oh my God. I was stunned. How could I be so stupid? I corrected it and sure enough the route worked. Major &#8220;oh durr&#8221; moment was had.</p>

<p>This has worked all this time because I&#8217;ve been running only the tests (<code>bundle exec rspec spec</code>, for the curious), which run in the <code>test</code> environment. This environment dutifully duplicates the <code>production</code> environment habit of loading all the files in <code>app/**/*</code>, regardless of the names. That way when requests are made to the application, it doesn&#8217;t need to go looking for the files containing the right classes; everything should (and is) loaded by that point.</p>

<p>When I run <code>bundle exec rails s</code>, Rails starts up in <code>development</code> mode instead! When we make a request to a route, Rails will go looking for the proper controller (in this case, <code>app/controllers/forem/forums_controller.rb</code>, with TWO l&#8217;s) and if it can&#8217;t find it then it will scream at you, claiming that you treated it wrong.</p>

<p>Well, that was a fun experience. I don&#8217;t think I&#8217;ll ever do that again and I&#8217;ll be checking the dark corners of my applications for this little furry beast.</p>
  </article>
</div>

<div id='archive'>
  <h2>25 back</h2>
  <ul>
    
      <li><a href="/2011/03/when-to-cuke">When to Cuke</a><abbr>03 Mar 2011</abbr></li>
  
      <li><a href="/2011/02/rtfm">RTFM</a><abbr>01 Feb 2011</abbr></li>
  
      <li><a href="/2011/01/rails-3-in-action-50-off">Rails 3 in Action: 50% off</a><abbr>27 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/why-pivotal-now-charging-for-tracker-is-a-good-thing">Why Pivotal now charging for Tracker is a good thing</a><abbr>20 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/rails-3-in-action-saas">Rails 3 in Action: SaaS</a><abbr>06 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/why-you-should-run-bundle-update">Why you should run bundle update</a><abbr>04 Jan 2011</abbr></li>
  
      <li><a href="/2011/01/extending-active-record">Extending Active Record</a><abbr>02 Jan 2011</abbr></li>
  
      <li><a href="/2010/12/converting-from-wordpress-to-jekyll">Converting from WordPress to Jekyll</a><abbr>27 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/ubuntu-ruby-rvm-rails-and-you">Ubuntu, Ruby, RVM, Rails, and You</a><abbr>25 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/rails-routing-and-automatic-assumptions">Rails routing and automatic assumptions</a><abbr>19 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/asking-questions-the-right-way">Asking Questions The Right Way</a><abbr>16 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/the-writing-process">The Writing Process</a><abbr>11 Dec 2010</abbr></li>
  
      <li><a href="/2010/12/commit-it-or-else">Commit it, or else!</a><abbr>09 Dec 2010</abbr></li>
  
      <li><a href="/2010/11/paths-vs-subdomains">Paths vs Subdomains</a><abbr>28 Nov 2010</abbr></li>
  
      <li><a href="/2010/11/dollars-to-documentation">Dollars to Documentation</a><abbr>25 Nov 2010</abbr></li>
  
      <li><a href="/2010/11/looking-for-sponsors">Looking for Sponsors</a><abbr>19 Nov 2010</abbr></li>
  
      <li><a href="/2010/11/the-rails-3-upgrade">The Rails 3 Upgrade</a><abbr>07 Nov 2010</abbr></li>
  
      <li><a href="/2010/10/gone-from-getup">Gone from GetUp</a><abbr>30 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/writing-isnt-all-rainbows">Writing isn't all rainbows</a><abbr>19 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/lighthouse-has-problems-but-theyre-fixing-them">Lighthouse has problems, but they're fixing them</a><abbr>11 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/lighthouse-has-problems">Lighthouse has problems</a><abbr>06 Oct 2010</abbr></li>
  
      <li><a href="/2010/10/gem-development-guide">Gem Development Guide</a><abbr>01 Oct 2010</abbr></li>
  
      <li><a href="/2010/09/advanced-rails-documentation">Advanced Rails Documentation</a><abbr>30 Sep 2010</abbr></li>
  
      <li><a href="/2010/09/you-suck">You suck.</a><abbr>24 Sep 2010</abbr></li>
  
      <li><a href="/2010/09/need-noobs">Need Newbies</a><abbr>23 Sep 2010</abbr></li>
  
  </ul>
  <center><a href='/blogography.html'>The Complete Blogography</a></center>
</div>

    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-396182-13");
    pageTracker._setDomainName("none");
    pageTracker._setAllowLinker(true);
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>