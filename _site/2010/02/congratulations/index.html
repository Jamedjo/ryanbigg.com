<!DOCTYPE HTML>
<html>
  <head>
    <title>Blog of Ryan Bigg - Congratulations</title>
    <link href="http://feeds.feedburner.com/ryanbigg" rel="alternate" title="The Life of a Radar" type="application/atom+xml" />
    <link rel='stylesheet' href='/css/style.css' media='screen'>
    <link rel='stylesheet' href='/css/mobile.css'>
  <body>
    <h1 align='center'><a href='http://ryanbigg.com'>The Life of a Radar</a></h1>
    <div id='page'>
      <article>
        <a href="/2010/02/congratulations"><header>Congratulations</header></a>
        <small>13 Feb 2010</small><br>
        <p>Congratulations! You&#8217;ve worked so amazingly hard over the last seven-and-a-half months on this project. You met all the client&#8217;s demands as they came in. You completed the project on-time and under the $30,000 budget by $2,000. The client is pleased about that. You can tell by the dollar signs in his eyes. The client is also pleased that they&#8217;re able to put the website out to the world to grow and conquer it, it already has a couple of users from the beta invites you sent out earlier in the week. You still keep in touch with the client on an almost-daily basis. He&#8217;s saying the site&#8217;s doing great.</p>

<p>But.</p>

<p>There&#8217;s this one user who&#8217;s reporting an issue with a feature you worked on 3 months ago. The client has set up his personal email address to receive the bug reports. You receive them when he gets around to sending them. A page is showing &#8220;We&#8217;re sorry but something went wrong&#8221;.</p>

<p>Uh oh.</p>

<p>You log into the website and check for yourself. Sure enough that page is throwing a 500. But why? This feature was completed 3 months ago and worked fine then, didn&#8217;t it? You try it on your local machine and you see that perhaps it&#8217;s something simple. Perhaps a variable incorrectly spelled in the controller. Or perhaps not. Perhaps it takes you longer than a couple of seconds to identify the issue. Perhaps it takes you an hour, a day.</p>

<p>A week.</p>

<p>So how did this error come to be? You did write tests, didn&#8217;t you?</p>

<p>Oh I see.</p>

<p>Because of the impending deadline you were pressured for time and couldn&#8217;t be bothered learning any of the testing frameworks. You want to. So many people talk about it in such a positive attitude&#8230; it&#8217;s just you don&#8217;t have the time. When you bring the point up, your boss says &#8220;The client&#8217;s not paying you to write tests, he&#8217;s paying you to write features&#8221; Even though your Rails knowledge has increased during the life of this project three to four times the size of what it previously was, you still don&#8217;t know shit about testing. Maybe&#8217;s the time to start to learn you think. Ah, but The Boss doesn&#8217;t want you spending time not producing features. &#8220;Tests are a waste of the client&#8217;s money&#8221; he claims. You sigh. &#8221;I&#8217;ll do the next project better. I&#8217;ll get him to see the light. I&#8217;ll really push for testing&#8230;&#8221;, you say in your head. Ok, so you didn&#8217;t write tests.</p>

<p>So here&#8217;s the facts:</p>

<ul>
<li>There&#8217;s a bug.</li>

<li>You worked on it in the past.</li>

<li>You must fix it. Now.</li>
</ul>

<p>So how do you go about debugging this bug to ensure that it doesn&#8217;t happen again? Well, you fix it and you know that it won&#8217;t happen again because you fixed it, right? You&#8217;ll leave a decent comment (actually, you&#8217;ll think about leaving a decent comment) after it&#8217;s fixed, that way nobody will repeat your mistake. Right?</p>

<p>Wrong.</p>

<p>Alright, so you know it&#8217;s sometime in the past. You can view the list of branches and maybe one will trigger your memory, surely you have branches with memorable names?</p>

<p>&#8220;Two Strikes&#8221; you say? Shame about that. Oh yeah, branching in SVN is a pain in the ass. I agree. If only you could convince your boss to use Git too. Git&#8217;s branching is so much nicer. Maybe you&#8217;ll get him to &#8220;see the light&#8221; about that on the next project too. So all the changes are in the trunk, and going back through them is, of course, going to take a lot of time. Best of luck with that.</p>

<p>So let&#8217;s assume that you chance across it. You remember the revision and fix the bug. Gone. Dead. Destroyed. Defeated. Sent to the depths of Hell along with one eighteenth of your sanity. That was quite a toughy. You did write a regression test to ensure that it wouldn&#8217;t happen again, right?</p>

<p>Oh I see.</p>

<p>You commented on the Basecamp todo item saying that it was fixed. I guess it has a searchable name, right? Just in case it comes up again? It&#8217;s called &#8220;Something went wrong&#8221; or &#8220;Page is broken&#8221;?</p>

<p>Uh oh.</p>

<p>So you go home, satisfied that you kicked the ass of a bug that had been on your mind for days. You win.</p>

<p>Congratulations.</p>

<p>The next day you wake up, grab your coffee/milk/orange juice and check your emails. There&#8217;s 3 from Facebook, a couple from a few mailing lists you subscribe to and fourteen from your client. These aren&#8217;t fourteen love letters. You see the first one was sent to you 20 minutes after you went to bed. If only you had stayed up later.</p>

<p>You read the first one. It&#8217;s a bug report. So is the next one. And the one after that. And the one after that. And guess what? The one after that, too.</p>

<p>All fourteen emails your client sent to you overnight weren&#8217;t &#8220;Thanks for all your fabulous work on the site&#8221; they were the &#8220;Why the fuck is this shit broken?&#8221; kind of language. He paid good money for it he thinks. You are happy being paid whatever it is you earn. It hasn&#8217;t been long that you&#8217;ve been doing this anyway and you have to start out somewhere. People make mistakes, right?</p>

<p>Congratulations.</p>

<p>You now have bug reports to deal with when you get into work this morning. 8 hours in a day, with each bug taking you 30 minutes to do. Easy, with time to spare. &#8220;Pfft. Done by sundown&#8221;, you think. You realise that one of the bug reports that got sent in was that bug that you fixed the other day. Another developer working on your project had a conflict with the file and accidentally put back the broken code instead of the working code. Ok. That&#8217;s fine. You&#8217;ll fix that again. Maybe you never wrote that comment and you insert it now. Yeah, that&#8217;ll stop them re-introducing it.</p>

<p>You have a 2hr meeting with another client at the beginning of the day, leaving you with only 6 hours to fix those bugs by sundown. You spend an extra half-hour at lunch. Five-and-a-half-hours. But by lunch you&#8217;d already &#8220;killed&#8221; four of them. You were a bit groggy this morning and you think that lunch will cure that feeling. You&#8217;ll conquer the other ten this afternoon.</p>

<p>You don&#8217;t.</p>

<p>You finish four, maybe five of them leaving eight, maybe nine bugs fixed. The client is not pleased. You have only done some of the work. ALL the bugs were critical. Your company is small, and you&#8217;re the only one with the knowledge of the project, plus, the other developers are busy on their own projects. The client expects&#8230; DEMANDS&#8230; a 7-day-a-week-24-hour-all-the-freakin&#8217;-time response.</p>

<p>Because you&#8217;re his bitch.</p>

<p>Alright. So your boss gives him a large apologetic email that you will try harder in the future to meet all of his demands because you don&#8217;t want to lose this client. He&#8217;s invested $30,000 in this company already and with &#8220;Version 2? of the site &#8220;just around the corner&#8221; he&#8217;ll probably invest a lot more.</p>

<p>So you&#8217;re back to fixing those remaining bugs. During the night another three have come in. Your bug count is now eight. Eight hours in a day, eight bugs in the list. Done by sundown. You complete five during work hours and two when you get home, after dinner. You&#8217;re exhausted. They took you all day to debug. You email the client and say that you&#8217;ve only fixed seven of the eight bugs. He emails you back, naturally twenty minutes after you&#8217;ve gone to sleep saying that the eighth and final bug &#8220;makes the site unusable&#8221;. Your boss brings you in in the morning and says that your work isn&#8217;t good enough. You baulk at this suggestion. You claim to have fixed thirteen of the fourteen bugs the client emailed you earlier in the week. You feel that you&#8217;ve put in some exceptionally hard work this week. Today you&#8217;ll have completed the fourteenth one, you&#8217;re so confident about that. He naturally asks why there were fourteen bugs in the first place. You don&#8217;t have an immediate answer, although you think of mentioning testing. He continues on his rant about that you should be testing the code each time you deploy it. Go through the site and make sure that it&#8217;s ok, you know, just click on the links and make sure it&#8217;s working. The boss continues on his tirade for an hour. You try to counter his arguments but you view him as some sort of &#8220;higher-being&#8221; and due to your lack of experience you can&#8217;t fault him. He&#8217;s the boss man after all. He got there somehow. He&#8217;s gotta be right about everything?</p>

<p>Your company has accrued all this technical debt that you didn&#8217;t budget for. This carries on for a month longer and now the client has gone over his budget by $2,000. $2,000 he never wanted to spend. Instead of <em>saving</em> $2,000 he&#8217;s now spent an extra $2,000 out of his own personal account in order to get this going. He&#8217;s talking about leaving your company and moving to another one who could do a better job. This is probably the case. Your boss brings you in and tells you what&#8217;s what with this project. The client is leaving. The next day he fires you.</p>

<p>Congratulations, Freebird. You&#8217;re out of a job and very, very nearly out of money. A couple of grand is all you have left. Time to begin that hunt again.</p>

<p>So how do you prevent something like this from happening?</p>

<p>You eventually get a new job working with a new company. You sit down with your new client and you do it right. You spec out their application&#8217;s stories using something like Pivotal Tracker. You&#8217;re taught to write tests religiously for every single story in Cucumber. There isn&#8217;t a story without a test. This reduces technical debt in the long run. You won&#8217;t have as many bugs like you did when you didn&#8217;t test with the previous application. You will have bugs, though, but you won&#8217;t be spending those long nights fixing them because you have tests covering it all. The tests will show you where something went wrong because more than likely, a broken part of the site also means a broken test. See a bug that&#8217;s not covered by a story or a test? That sometimes happens, but now you have this <em>wonderful</em> framework for really ensuring it doesn&#8217;t happen again: Regression testing. Write the test. It breaks. Fix the bug. It passes. If you and your team stick to the Green is Good policy, then you and they will NEVER EVER reintroduce this bug. In theory, anyway. People make mistakes.</p>

<p>So you start off on a simple story such as &#8220;User login&#8221; and you write a cucumber feature for it with two scenarios. One for logging in. One for logging out. You&#8217;ve written all the steps for it but some of them are not implemented, others are just plain broken. That&#8217;s because you haven&#8217;t written any code for it yet. It may feel backwards at first. This is called Behaviour Driven Development. You&#8217;re going to be learning it, and you&#8217;re going to do it right from now on. You&#8217;re going to be a BDD Zealot. You implement each step one at a time and eventually your feature is all green.</p>

<p>Why do you do this?</p>

<p>So future-you doesn&#8217;t come back in 3 months, see that this feature is broken and begin working on a time machine to go back and kick your dumb ass.</p>

<p>Bonus points if you&#8217;re using a Continuous Integration server to ensure that this feature and its eventual test brothers stay green. A broken build means a broken application and your singular goal if that build is ever broken is to make it very, very unbroken.</p>

<p>Congratulations.</p>

<p>You can now mark that story as &#8220;Finished&#8221; in Pivotal. Then you can deploy it to a staging server and mark it as &#8220;Delivered&#8221;. The client then can log in to Pivotal and see that the story is marked as &#8220;Delivered&#8221; and then log in to the staging server, test that feature and press that lovely holy-grail &#8220;Accept&#8221; button. You want to be seeing green stories in your Pivotal list. Green is the colour you want to be seeing everywhere.</p>

<p>Green is Good.</p>

<p>So the next feature comes along and involves some rather complex controller logic that returns a JSON hash. You can write this also in Cucumber, or you could write an RSpec Controller test. This is the kind of thing that&#8217;s really great for in-team discussions. You&#8217;ll suggest Way A of doing it, and maybe the other team people will agree or suggest Way B, and that lovely dynamic of throwing ideas back and forth really produces a better result. Either way, you&#8217;ll write the test first and then the code. Behaviour Driven Development. Then the test will pass. Then you can refactor the code if it&#8217;s not quite up to scratch and it&#8217;ll still pass. Sure it will feel slow at first, but that&#8217;s because you&#8217;re learning how to do it. Don&#8217;t fight it. It will save you a lot of time in the future, where it&#8217;s most important. Focus rather on the long term gains rather than the short term.</p>

<p>Eventually after the next seven-and-a-half months you&#8217;ll have all these Pivotal Tracker stories all green in the &#8220;Completed&#8221; section and maybe one or two in the &#8220;Backlog&#8221; that the client wants done for next release. You&#8217;ll run all the specs on your system. They&#8217;re all green. You&#8217;ll run all the features. They&#8217;re all green. You deploy to the staging server for the last time for this release. The client loves it. You deploy it to production and send out the invites. Everyone loves it.</p>

<p>But.</p>

<p>There&#8217;s a bug. This time however you&#8217;ve installed something like Hoptoad so in your inbox you&#8217;ve got the error there, right when it happened. You are the support team for this application, NOT the client. After all, you&#8217;re still working for a small company. It contains stacktrace and you can see where it went wrong immediately. You write a test/feature to ensure that this bug would never happen again. It fails because you haven&#8217;t fixed the bug. The error is the same one as in the Hoptoad email. You fix the bug.</p>

<p>Congratulations. You&#8217;ve successfully regression tested a bug. This bug never happens again for the life of the project.</p>

<p>The client is happy. Your boss asks if he can have a chat with you. You&#8217;re doing an awesome job. The other guys were previously on a higher salary than you because you were perceived to be a junior. Not any more. You&#8217;ve come an amazingly long way. Now you&#8217;re equal. The client wants more work done on his application. He&#8217;s flying your boss to his offices next week. They&#8217;ve specifically requested you to go along too, as you seem &#8220;switched on&#8221;. You meet up with the client and discuss the terms of the next iteration, a major one. This deal goes through and your company needs to grow. Massively. The application explodes, in the positive meaning. You run into scaling issues (of course). You bring on another ten guys over the next year just to work on this application. You and a couple of the other &#8220;Originals&#8221; teach them all you know about your application and the process you&#8217;ve helped develop. They then go on to teach the other twenty people you hire in the six months following.</p>

<p>Congratulations. Now you&#8217;re doing it right.</p>
      </article>
    </div>
    <div id='disqus_thread'></div>
    <script type="text/javascript">
        var disqus_shortname = 'ryanbigg'; // required: replace example with your forum shortname

        var disqus_identifier = '813 http://ryanbigg.com/?p=813'
        var disqus_url = 'http://ryanbigg.com/2010/02/congratulations';
    </script>
    <script src='http://ryanbigg.disqus.com/embed.js'></script>
    
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    <script type="text/javascript">
      var _gauges = _gauges || [];
      (function() {
        var t   = document.createElement('script');
        t.type  = 'text/javascript';
        t.async = true;
        t.id    = 'gauges-tracker';
        t.setAttribute('data-site-id', '4e30f771f5a1f547c8000001');
        t.src = '//secure.gaug.es/track.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(t, s);
      })();
    </script>   
  </body>
</html>
