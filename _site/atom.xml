<?xml version="1.0" encoding="iso-8859-1"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>The Life of a Radar</title>
 <link href="http://ryanbigg.com/atom.xml" rel="self"/>
 <link href="http://ryanbigg.com"/>
 <updated>2020-01-24T11:56:28+11:00</updated>
 <id>http://ryanbigg.com/</id>
 <author>
   <name>Ryan Bigg</name>
   <email>radarlistener@gmail.com</email>
 </author>

 
 <entry>
   <title>Getting Started with Rails: Extended Edition</title>
   <link href="http://ryanbigg.com/2020/01/getting-started-with-rails-extended-edition"/>
   <updated>2020-01-19T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2020/01/getting-started-with-rails-extended-edition</id>
   <content type="html"><![CDATA[<p>This guide is an <em>extended edition</em> of the offical <a href="https://guides.rubyonrails.org/getting_started.html">Getting Started with Rails</a> guide.</p>
<p>This extended version has the following additions:</p>
<ul>
<li>A re-worked introduction to routing, showing clearer matching between routes and controllers.</li>
<li>Creates and uses a model right after building the first route.</li>
<li>Examples of HTML output generated by Rails helpers such as <code>link_to</code>, <code>form_with</code> and <code>text_field</code>.</li>
<li>Beef up explainations of routing helpers, especially <code>article_comment_path</code>.</li>
<li>Beef up explainations in general.</li>
</ul>
<hr />
<p>This guide covers getting up and running with Ruby on Rails.</p>
<p>After reading this guide, you will know:</p>
<ul>
<li>How to install Rails, create a new Rails application, and connect your
application to a database.</li>
<li>The general layout of a Rails application.</li>
<li>The basic principles of MVC (Model, View, Controller) and RESTful design.</li>
<li>How to quickly generate the starting pieces of a Rails application.</li>
</ul>
<hr />
<h2 id="guide-assumptions">Guide Assumptions</h2>
<p>This guide is designed for beginners who want to get started with a Rails
application from scratch. It does not assume that you have any prior experience
with Rails.</p>
<p>Rails is a web application framework running on the Ruby programming language.
If you have no prior experience with Ruby, you will find a very steep learning
curve diving straight into Rails. There are several curated lists of online resources
for learning Ruby:</p>
<ul>
<li><a href="https://www.ruby-lang.org/en/documentation/">Official Ruby Programming Language website</a></li>
<li><a href="https://github.com/EbookFoundation/free-programming-books/blob/master/free-programming-books.md#ruby">List of Free Programming Books</a></li>
</ul>
<p>Be aware that some resources, while still excellent, cover versions of Ruby as old as
1.6, and commonly 1.8, and will not include some syntax that you will see in day-to-day
development with Rails.</p>
<h2 id="what-is-rails">What is Rails?</h2>
<p>Rails is a web application development framework written in the Ruby programming language.
It is designed to make programming web applications easier by making assumptions
about what every developer needs to get started. It allows you to write less
code while accomplishing more than many other languages and frameworks.
Experienced Rails developers also report that it makes web application
development more fun.</p>
<p>Rails is opinionated software. It makes the assumption that there is a &quot;best&quot;
way to do things, and it's designed to encourage that way - and in some cases to
discourage alternatives. If you learn &quot;The Rails Way&quot; you'll probably discover a
tremendous increase in productivity. If you persist in bringing old habits from
other languages to your Rails development, and trying to use patterns you
learned elsewhere, you may have a less happy experience.</p>
<p>The Rails philosophy includes two major guiding principles:</p>
<ul>
<li><strong>Don't Repeat Yourself:</strong> DRY is a principle of software development which
states that &quot;Every piece of knowledge must have a single, unambiguous, authoritative
representation within a system&quot;. By not writing the same information over and over
again, our code is more maintainable, more extensible, and less buggy.</li>
<li><strong>Convention Over Configuration:</strong> Rails has opinions about the best way to do many
things in a web application, and defaults to this set of conventions, rather than
require that you specify minutiae through endless configuration files.</li>
</ul>
<h2 id="creating-a-new-rails-project">Creating a New Rails Project</h2>
<p>The best way to read this guide is to follow it step by step. All steps are
essential to run this example application and no additional code or steps are
needed.</p>
<p>By following along with this guide, you'll create a Rails project called
<code>blog</code>, a (very) simple weblog. Before you can start building the application,
you need to make sure that you have Rails itself installed.</p>
<p>TIP: The examples below use <code>$</code> to represent your terminal prompt in a UNIX-like OS,
though it may have been customized to appear differently. If you are using Windows,
your prompt will look something like <code>c:\source_code&gt;</code></p>
<h3 id="installing-rails">Installing Rails</h3>
<p>Before you install Rails, you should check to make sure that your system has the
proper prerequisites installed. These include Ruby and SQLite3.</p>
<p>Open up a command line prompt. On macOS open Terminal.app, on Windows choose
&quot;Run&quot; from your Start menu and type 'cmd.exe'. Any commands prefaced with a
dollar sign <code>$</code> should be run in the command line. Verify that you have a
current version of Ruby installed:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ruby <span class="nt">-v</span>
ruby 2.7.0
</code></pre></div></div>
<p>Rails requires Ruby version 2.5.0 or later. If the version number returned is
less than that number (such as 2.3.7, or 1.8.7), you'll need to install a fresh copy of Ruby.</p>
<p>TIP: To quickly install Ruby and Ruby on Rails on your system in Windows, you can use
<a href="http://railsinstaller.org">Rails Installer</a>. For more installation methods for most
Operating Systems take a look at <a href="https://www.ruby-lang.org/en/documentation/installation/">ruby-lang.org</a>.</p>
<p>If you are working on Windows, you should also install the
<a href="https://rubyinstaller.org/downloads/">Ruby Installer Development Kit</a>.</p>
<p>You will also need an installation of the SQLite3 database.
Many popular UNIX-like OSes ship with an acceptable version of SQLite3.
On Windows, if you installed Rails through Rails Installer, you
already have SQLite installed. Others can find installation instructions
at the <a href="https://www.sqlite.org">SQLite3 website</a>.
Verify that it is correctly installed and in your PATH:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sqlite3 <span class="nt">--version</span>
</code></pre></div></div>
<p>The program should report its version.</p>
<p>To install Rails, use the <code>gem install</code> command provided by RubyGems:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gem <span class="nb">install </span>rails
</code></pre></div></div>
<p>To verify that you have everything installed correctly, you should be able to
run the following:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails <span class="nt">--version</span>
</code></pre></div></div>
<p>If it says something like &quot;Rails 6.0.0&quot;, you are ready to continue.</p>
<h3 id="creating-the-blog-application">Creating the Blog Application</h3>
<p>Rails comes with a number of scripts called generators that are designed to make
your development life easier by creating everything that's necessary to start
working on a particular task. One of these is the new application generator,
which will provide you with the foundation of a fresh Rails application so that
you don't have to write it yourself.</p>
<p>To use this generator, open a terminal, navigate to a directory where you have
rights to create files, and type:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rails new blog
</code></pre></div></div>
<p>This will create a Rails application called Blog in a <code>blog</code> directory and
install the gem dependencies that are already mentioned in <code>Gemfile</code> using
<code>bundle install</code>.</p>
<p>NOTE: If you're using Windows Subsystem for Linux then there are currently some
limitations on file system notifications that mean you should disable the <code>spring</code>
and <code>listen</code> gems which you can do by running <code>rails new blog --skip-spring --skip-listen</code>.</p>
<p>TIP: You can see all of the command line options that the Rails application
builder accepts by running <code>rails new -h</code>.</p>
<p>After you create the blog application, switch to its folder:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>blog
</code></pre></div></div>
<p>The <code>blog</code> directory has a number of auto-generated files and folders that make
up the structure of a Rails application. Most of the work in this tutorial will
happen in the <code>app</code> folder, but here's a basic rundown on the function of each
of the files and folders that Rails created by default:</p>
<table>
<thead>
<tr>
<th>File/Folder</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>app/</td>
<td>Contains the controllers, models, views, helpers, mailers, channels, jobs, and assets for your application. You'll focus on this folder for the remainder of this guide.</td>
</tr>
<tr>
<td>bin/</td>
<td>Contains the rails script that starts your app and can contain other scripts you use to setup, update, deploy, or run your application.</td>
</tr>
<tr>
<td>config/</td>
<td>Configure your application's routes, database, and more. This is covered in more detail in <a href="configuring.html">Configuring Rails Applications</a>.</td>
</tr>
<tr>
<td>config.ru</td>
<td>Rack configuration for Rack based servers used to start the application. For more information about Rack, see the <a href="https://rack.github.io/">Rack website</a>.</td>
</tr>
<tr>
<td>db/</td>
<td>Contains your current database schema, as well as the database migrations.</td>
</tr>
<tr>
<td>Gemfile<br>Gemfile.lock</td>
<td>These files allow you to specify what gem dependencies are needed for your Rails application. These files are used by the Bundler gem. For more information about Bundler, see the <a href="https://bundler.io">Bundler website</a>.</td>
</tr>
<tr>
<td>lib/</td>
<td>Extended modules for your application.</td>
</tr>
<tr>
<td>log/</td>
<td>Application log files.</td>
</tr>
<tr>
<td>package.json</td>
<td>This file allows you to specify what npm dependencies are needed for your Rails application. This file is used by Yarn. For more information about Yarn, see the <a href="https://yarnpkg.com/lang/en/">Yarn website</a>.</td>
</tr>
<tr>
<td>public/</td>
<td>The only folder seen by the world as-is. Contains static files and compiled assets.</td>
</tr>
<tr>
<td>Rakefile</td>
<td>This file locates and loads tasks that can be run from the command line. The task definitions are defined throughout the components of Rails. Rather than changing <code>Rakefile</code>, you should add your own tasks by adding files to the <code>lib/tasks</code> directory of your application.</td>
</tr>
<tr>
<td>README.md</td>
<td>This is a brief instruction manual for your application. You should edit this file to tell others what your application does, how to set it up, and so on.</td>
</tr>
<tr>
<td>storage/</td>
<td>Active Storage files for Disk Service. This is covered in <a href="active_storage_overview.html">Active Storage Overview</a>.</td>
</tr>
<tr>
<td>test/</td>
<td>Unit tests, fixtures, and other test apparatus. These are covered in <a href="testing.html">Testing Rails Applications</a>.</td>
</tr>
<tr>
<td>tmp/</td>
<td>Temporary files (like cache and pid files).</td>
</tr>
<tr>
<td>vendor/</td>
<td>A place for all third-party code. In a typical Rails application this includes vendored gems.</td>
</tr>
<tr>
<td>.gitignore</td>
<td>This file tells git which files (or patterns) it should ignore. See <a href="https://help.github.com/articles/ignoring-files">GitHub - Ignoring files</a> for more info about ignoring files.</td>
</tr>
<tr>
<td>.ruby-version</td>
<td>This file contains the default Ruby version.</td>
</tr>
</tbody>
</table>
<h2 id="hello-rails">Hello, Rails!</h2>
<p>To begin with, let's get some text up on screen quickly. To do this, you need to
get your Rails application server running.</p>
<h3 id="starting-up-the-web-server">Starting up the Web Server</h3>
<p>You actually have a functional Rails application already. To see it, you need to
start a web server on your development machine. You can do this by running the
following in the <code>blog</code> directory:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails server
</code></pre></div></div>
<p>TIP: If you are using Windows, you have to pass the scripts under the <code>bin</code>
folder directly to the Ruby interpreter e.g. <code>ruby bin\rails server</code>.</p>
<p>TIP: JavaScript asset compression requires you
have a JavaScript runtime available on your system, in the absence
of a runtime you will see an <code>execjs</code> error during asset compression.
Usually macOS and Windows come with a JavaScript runtime installed.
<code>therubyrhino</code> is the recommended runtime for JRuby users and is added by
default to the <code>Gemfile</code> in apps generated under JRuby. You can investigate
all the supported runtimes at <a href="https://github.com/rails/execjs#readme">ExecJS</a>.</p>
<p>This will fire up Puma, a web server distributed with Rails by default. To see
your application in action, open a browser window and navigate to
<a href="http://localhost:3000">http://localhost:3000</a>. You should see the Rails default information page:</p>
<p><img src="/images/getting_started/rails_welcome.png" alt="Yay! You're on Rails! screenshot" /></p>
<p>TIP: To stop the web server, hit Ctrl+C in the terminal window where it's
running. To verify the server has stopped you should see your command prompt
cursor again. For most UNIX-like systems including macOS this will be a
dollar sign <code>$</code>. In development mode, Rails does not generally require you to
restart the server; changes you make in files will be automatically picked up by
the server.</p>
<p>The &quot;Yay! You're on Rails!&quot; page is the <em>smoke test</em> for a new Rails
application: it makes sure that you have your software configured correctly
enough to serve a page.</p>
<h3 id="say-quothelloquot-rails">Say &quot;Hello&quot;, Rails</h3>
<p>To get Rails saying &quot;Hello&quot;, you need to create at minimum a <em>route</em>, a <em>controller</em> and a <em>view</em>.</p>
<p>A controller's purpose is to receive specific requests for the application.
<em>Routing</em> decides which controller receives which requests. Often, there is more
than one route to each controller, and different routes can be served by
different <em>actions</em>. Each action's purpose is to collect information to provide
it to a view.</p>
<p>A view's purpose is to display this information in a human readable format. An
important distinction to make is that the <em>controller</em>, not the view,
is where information is collected. The view should just display that information.
By default, view templates are written in a language called eRuby (Embedded
Ruby) which is processed by the request cycle in Rails before being sent to the
user.</p>
<p>When we make a request to our Rails applications, we do so by making a request to a particular <em>route</em>. So to start off, we'll start with a route. Let's create one now in <code>config/routes.rb</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>

  <span class="c1"># For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This is your application's <em>routing file</em> which holds entries in a special
<a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL (domain-specific language)</a> that tells Rails how to connect incoming requests to
controllers and actions.</p>
<p>The line that we have just added says that we are going to match a <code>GET /welcome</code> request to <code>welcome#index</code>. This string passed as the <code>to</code> option represents the <em>controller</em> and <em>action</em> that will be responsible for handling this request.</p>
<p>Controllers are classes that group together common methods for handling a particular <em>resource</em>. The methods inside controllers are given the name &quot;actions&quot;, as they <em>act upon</em> requests as they come in.</p>
<p>To create a new controller, you will need to run the &quot;controller&quot; generator and
tell it you want a controller called &quot;articles&quot; with an action called &quot;index&quot;,
just like this:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails generate controller articles index
</code></pre></div></div>
<p>Rails will create several files and a route for you.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>create  app/controllers/articles_controller.rb
  route  get <span class="s1">'articles/index'</span>
invoke  erb
create    app/views/articles
create    app/views/articles/index.html.erb
invoke  test_unit
create    <span class="nb">test</span>/controllers/articles_controller_test.rb
invoke  helper
create    app/helpers/articles_helper.rb
invoke    test_unit
invoke  assets
invoke    scss
create      app/assets/stylesheets/articles.scss
</code></pre></div></div>
<p>Most important of these are is of course the controller, located at
<code>app/controllers/articles_controller.rb</code>.</p>
<p>Let's look at that controller now:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This controller defines a single action, or &quot;method&quot; in common Ruby terms, called <code>index</code>. This action is where we would define any logic that we would want to happen when a request comes in to this action. Right at this moment, we don't want this action to do anything, and so we'll keep it blank for now.</p>
<p>When an action is left blank like this, Rails will default to rendering a view that matches the name of the controller, and the name of the action. That view is going to be <code>app/views/articles/index.html.erb</code>.</p>
<p>Open the <code>app/views/articles/index.html.erb</code> file in your text editor. Delete all
of the existing code in the file, and replace it with the following single line
of code:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Hello, Rails!<span class="nt">&lt;/h1&gt;</span>
</code></pre></div></div>
<p>If we go back to our browser and make a request to <a href="http://localhost:3000/articles">http://localhost:3000/articles</a>, we'll see our text appear on the page.</p>
<h3 id="setting-the-application-home-page">Setting the Application Home Page</h3>
<p>Now that we have made the route, controller, action and view, let's make a small change to our routes. In this application, we're going to change it so that our message appears at <a href="http://localhost:3000/">http://localhost:3000/</a> and not just <a href="http://localhost:3000/articles">http://localhost:3000/articles</a>. At the moment, at <a href="http://localhost:3000">http://localhost:3000</a> it still says &quot;Yay! You're on Rails!&quot;.</p>
<p>To change this, we need to tell our routes file where the <em>root path</em> of our application is.</p>
<p>Open the file <code>config/routes.rb</code> in your editor.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="c1"># For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Underneath the line that is there, add this line:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
<span class="k">end</span>
</code></pre></div></div>
<p>A slightly shorter way of writing the same thing is:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This <code>root</code> method defines a <em>root path</em> for our application. The <code>root</code> method tells Rails to map requests to the root of the application to the <code>ArticlesController</code> <code>index</code> action.</p>
<p>Launch the web server again if you stopped it to generate the controller (<code>rails server</code>) and navigate to <a href="http://localhost:3000">http://localhost:3000</a> in your browser. You'll see the
&quot;Hello, Rails!&quot; message you put into <code>app/views/articles/index.html.erb</code>,
indicating that this new route is indeed going to <code>ArticleController</code>'s <code>index</code>
action and is rendering the view correctly.</p>
<p>TIP: For more information about routing, refer to <a href="routing.html">Rails Routing from the Outside In</a>.</p>
<h2 id="creating-a-model">Creating a model</h2>
<p>So far, we have seen routes, controllers, actions and views within our Rails application. All of these are conventional parts of Rails applications and it is done this way to follow the MVC pattern. The MVC pattern is an application design pattern which makes it easy to separate the different responsibilities of applications into easy to reason about pieces.</p>
<p>So with &quot;MVC&quot;, you might guess that the &quot;V&quot; stands for &quot;View&quot; and the &quot;C&quot; stands for controller, but you might have trouble guessing what the &quot;M&quot; stands for. This next section is all about that &quot;M&quot; part, the <em>model</em>.</p>
<p>A model is a class that is used to represent data in our application. In a plain-Ruby application, you might have a class defined like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Article</span>
  <span class="nb">attr_reader</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">title</span><span class="p">:,</span> <span class="n">body</span><span class="p">:)</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="vi">@body</span> <span class="o">=</span> <span class="n">body</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Models in a Rails application are designed for this purpose too: to represent particular data.</p>
<p>Models have another purpose in a Rails application too though. They're also used to interact with the application's database. In this section, we're going to use a model to put data into our database and to pull that data back out.</p>
<p>To start with, we're going to need to generate a model. We can do that with the following command:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails g model article title:string body:text
</code></pre></div></div>
<p>NOTE: The model name here is <em>singular</em>, because model classes are classes that are used to represent single instances. To help remember this rule, in a Ruby application to start building a new object, you would define the class as <code>Article</code>, and then do <code>Article.new</code>, not <code>Articles</code> and <code>Articles.new</code>.</p>
<p>When this command runs, it will generate the following files:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>invoke  active_record
create    db/migrate/[timestamp]_create_articles.rb
create    app/models/article.rb
invoke    test_unit
create      <span class="nb">test</span>/models/article_test.rb
create      <span class="nb">test</span>/fixtures/articles.yml
</code></pre></div></div>
<p>The two files we'll focus on here are the <em>migration</em> (the file at <code>db/migrate</code>) and the <em>model</em>.</p>
<p>A migration is used to alter the structure of our database, and it is written in Ruby. Let's look at this file now, <code>db/migrate/[timestamp]_create_articles.rb</code>.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateArticles</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">6.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:articles</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:title</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">text</span> <span class="ss">:body</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This file contains Ruby code to create a table within our application's database. Migrations are written in Ruby so that they can be database-agnostic -- regardless of what database you use with Rails, you'll always write migrations in Ruby.</p>
<p>Inside this migration file, there's a <code>create_table</code> method that defines how the <code>articles</code> table should be constructed. This method will create a table in our database that contains an <code>id</code> auto-incrementing primary key. That means that the first record in our table will have an <code>id</code> of 1, and the next <code>id</code> of 2, and so on.  Rails assumes by default this is the behaviour we want, and so it does this for us.</p>
<p>Inside the block for <code>create_table</code>, we have two fields, <code>title</code> and <code>body</code>. These were added to the migration automatically because we put them at the end of the <code>rails g model</code> call:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails g model article title:string body:text
</code></pre></div></div>
<p>On the last line of the block is <code>t.timestamps</code>. This method defines two additional fields in our table, called <code>created_at</code> and <code>updated_at</code>. When we create or update model objects, these fields will be set respectively.</p>
<p>The structure of our table will look like this:</p>
<table>
<thead>
<tr>
<th>id</th>
<th>title</th>
<th>body</th>
<th>created_at</th>
<th>updated_at</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> </td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>To create this table in our application's database, we can run this command:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails db:migrate
</code></pre></div></div>
<p>This command will show us output indicating that the table was created:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>== 20200118233119 CreateArticles: migrating ===================================
-- create_table(:articles)
   -&gt; 0.0018s
== 20200118233119 CreateArticles: migrated (0.0018s) ==========================
</code></pre></div></div>
<p>Now that we have a table in our application's database, we can use the model to interact with this table.</p>
<p>To use the model, we'll use a feature of Rails called the <em>console</em>. The console allows us write code like we might in <code>irb</code>, but the code of our application is available there too. Let's launch the console with this command:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails console
</code></pre></div></div>
<p>Or, a shorter version:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails c
</code></pre></div></div>
<p>When we launch this, we should see an irb prompt:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Loading development environment (Rails 6.0.2.1)
irb(main):001:0&gt;
</code></pre></div></div>
<p>In this prompt, we can use our model to initialize a new <code>Article</code> object:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">001</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">title: </span><span class="s2">"Hello Rails"</span><span class="p">,</span> <span class="ss">body: </span><span class="s2">"I am on Rails!"</span><span class="p">)</span>
</code></pre></div></div>
<p>When we use <code>Article.new</code>, it will initialze a new <code>Article</code> object in the console. This object is not saved to the database at all, it's just available in the console so far. To save the object to the database, we need to call <code>save</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">002</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">article</span><span class="p">.</span><span class="nf">save</span>
</code></pre></div></div>
<p>This command will show us the following output:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(0.1ms)  begin transaction
Article Create (0.4ms)  INSERT INTO "articles" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Hello Rails"], ["body", "I am on Rails!"], ["created_at", "2020-01-18 23:47:30.734416"], ["updated_at", "2020-01-18 23:47:30.734416"]]
(0.9ms)  commit transaction
=&gt; true
</code></pre></div></div>
<p>This output shows an <code>INSERT INTO &quot;articles&quot;...</code> database query. This means that our article has been successfully inserted into our table.</p>
<p>If we take a look at our <code>article</code> object again, an interesting thing has happened:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">003</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">article</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Article id: 1, title: "Hello Rails", body: "I am on Rails!", created_at: "2020-01-18 23:47:30", updated_at: "2020-01-18 23:47:30"&gt;</span>
</code></pre></div></div>
<p>Our object now has the <code>id</code>, <code>created_at</code> and <code>updated_at</code> fields set. All of this happened automatically for us when we saved this article.</p>
<p>If we wanted to retrieve this article back from the database later on, we can do that with <code>find</code>, and pass that <code>id</code> as an argument:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">004</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Article id: 1, title: "Hello Rails", body: "I am on Rails!", created_at: "2020-01-18 23:47:30", updated_at: "2020-01-18 23:47:30"&gt;</span>
</code></pre></div></div>
<p>A shorter way to add articles into our database is to use <code>Article.create</code>, like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">005</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="no">Article</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">title: </span><span class="s2">"Post #2"</span><span class="p">,</span> <span class="ss">body: </span><span class="s2">"Still riding the Rails!"</span><span class="p">)</span>
</code></pre></div></div>
<p>This way, we don't need to call <code>new</code> and then <code>save</code>.</p>
<p>Lastly, models provide a method to find all of their data:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">006</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
 <span class="c1">#&lt;ActiveRecord::Relation [</span>
   <span class="c1">#&lt;Article id: 1, title: "Hello Rails", body: "I am on Rails!", created_at: "2020-01-18 23:47:30", updated_at: "2020-01-18 23:47:30"&gt;,</span>
   <span class="c1">#&lt;Article id: 2, title: "Post #2", body: "Still riding the Rails!", created_at: "2020-01-18 23:53:45", updated_at: "2020-01-18 23:53:45"&gt;]&gt;</span>
</code></pre></div></div>
<p>This method returns an <code>ActiveRecord::Relation</code> object, which you can think of as a super-powered array. This array contains both of the topics that we have created so far.</p>
<p>As you can see, models are very helpful classes for interacting with databases within Rails applications. Models are the final piece of the &quot;MVC&quot; puzzle. Let's look at how we can go about connecting all these pieces together into a cohesive whole.</p>
<h2 id="getting-up-and-running">Getting Up and Running</h2>
<p>Now that you've seen how to create a route, a controller, an action, a view and a model, let's connect these pieces together.</p>
<p>Let's go back to <code>app/controllers/articles_controller.rb</code> now. We're going to change the <code>index</code> action here to use our model.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Controller actions are where we assemble all the data that will later be displayed in the <em>view</em>. In this <code>index</code> action, we're calling <code>Article.all</code> which will make a query to our database and retrieve all of the articles, storing them in an instance variable: <code>@articles</code>.</p>
<p>We're using an instance variable here for a very good reason: instance variables are automatically shared from controllers into views. So to use this <code>@articles</code> variable in our view to show all the articles, we can write this code in <code>app/views/articles/index.html.erb</code>:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>We've now changed this file from using just HTML to using HTML and <em>ERB</em>. ERB is a language that we can use to run Ruby code.</p>
<p>There's two types of ERB tag beginnings that we're using here: <code>&lt;%</code> and <code>&lt;%=</code>. The <code>&lt;%</code> tag means to evalulate some Ruby code, while the <code>&lt;%=</code> means to evalulate that code, and then to output the return value from that code.</p>
<p>In this view, we do not want the output of <code>articles.each</code> to show, and so we use a <code>&lt;%</code>. But we do want each of the articles' titles to appear, and so we use <code>&lt;%=</code>.</p>
<p>When we start an ERB tag with either <code>&lt;%</code> or <code>&lt;%=</code>, it can help to think &quot;I am now writing Ruby, not HTML&quot;. Anything you could write in a regular Ruby program, can go inside these ERB tags.</p>
<p>When the view is used by Rails, the embedded Ruby will be evalulated, and the page will show our list of articles. Let's go to <a href="http://localhost:3000">http://localhost:3000</a> now and see the list of articles:</p>
<p><img src="/images/getting_started/article_list.png" alt="List of articles" /></p>
<p>If we look at the source of the page in our browser <a href="view-source:http://localhost:3000/">view-source:http://localhost:3000/</a>, we'll see this part:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span>Hello Rails<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>Post #2<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>This is the HTML that has been output from our view in our Rails application.</p>
<p>Here's what's happened to get to this point:</p>
<ol>
<li>Our browser makes a request: <code>GET http://localhost:3000</code></li>
<li>The Rails application receives this request</li>
<li>The router sees that the <code>root</code> route is configured to route to the <code>ArticlesController</code>'s <code>index</code> action</li>
<li>The <code>index</code> action uses the <code>Article</code> model to find all the articles</li>
<li>Rails automatically renders the <code>app/views/articles/index.html.erb</code> view</li>
<li>The view contains ERB (Embedded Ruby). This code is evalulated, and plain HTML is returned.</li>
<li>The server sends a response containing that plain HTML back to the browser.</li>
</ol>
<p>Here's a flowchart of the above steps:</p>
<p><img src="/images/getting_started/application_flowchart.png" alt="Application flowchart" /></p>
<p>We've now successfully connected all the different parts of our Rails application together: the router, the controller, the action, the model and the view. With this connection, we have finished the first action of our application.</p>
<p>Let's move on to the second action!</p>
<h3 id="viewing-an-article">Viewing an Article</h3>
<p>For our second action, we want our application to show us the details about an article, specifically the article's title and body:</p>
<p><img src="/images/getting_started/single_article_view.png" alt="Single Article View" /></p>
<p>We'll start in the same place we started with the <code>index</code> action, which was in <code>config/routes.rb</code>. We'll add a new route for this page. Let's change our routes file now to this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This route is another <code>get</code> route, but it has something different in it: <code>:id</code>. This syntax in Rails routing is called a <em>parameter</em>, and it will be available in the <code>show</code> action of <code>ArticlesController</code> when a request is made. A request to this action will use a route such as <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a> or <a href="http://localhost:3000/articles/2">http://localhost:3000/articles/2</a>.</p>
<p>This time, we're still routing to the <code>ArticlesController</code>, but we're going to the <code>show</code> action of that controller instead of the <code>index</code> action.</p>
<p>Let's look at how to add that <code>show</code> action to the <code>ArticlesController</code>. We'll open <code>app/controllers/articles_controller.rb</code> and add it in, under the <code>index</code> action:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>When a request is made to this <code>show</code> action, it will be made to a URL such as <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a>. Rails sees that the last part of that route is a dynamic parameter, and makes that parameter available for us in our controller through the method <code>params</code>. We use <code>params[:id]</code> to access that parameter, because back in the routes file we called the parameter <code>:id</code>. If we used a name like <code>:article_id</code> in the routes file, then we would need to use <code>params[:article_id]</code> here too.</p>
<p>The <code>show</code> action finds a particular article with that ID. Once it has that, it needs to then display that article's information, which will do by attempting to use a view at <code>app/views/articles/show.html.erb</code>. Let's create that file now and add this content:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Now when we go to <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a> we will see the article:</p>
<p><img src="/images/getting_started/single_article_view.png" alt="Single Article View" /></p>
<p>Excellent! We now have our second action working in our controller. But in order to navigate to it, we have to manually type in <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a>. That seems a bit silly. Let's change our application a little, so that we can navigate to an article by clicking a link from the list of articles.</p>
<p>To add the link to an article, we need to change <code>app/views/articles/index.html.erb</code>, which currently looks like this:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>This code will render an <code>li</code> element for each of the articles, and that element contains the title of the article. But we can't click on the title to go to an article yet! To make that happen, we need to use an <code>a</code> tag:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'/articles/</span><span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">id</span> <span class="cp">%&gt;</span><span class="s">'</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>This <code>a</code> tag will provide us with a link to the specific article. If we go back to <a href="http://localhost:3000/">http://localhost:3000/</a>, we'll see that we can now click on the articles:</p>
<p><img src="/images/getting_started/articles_list_with_links.png" alt="Articles list with links" /></p>
<p>Clicking either of these links will take us to the relevant article:</p>
<p><img src="/images/getting_started/single_article_view.png" alt="Single Article View" /></p>
<p>Now we have been able to link together the <code>index</code> and <code>show</code> pages in our application using a simple <code>a</code> tag. What could be simpler than that?</p>
<p>Well, Rails has a method called <code>link_to</code> that can make that linking a little simpler. Let's use this in <code>app/views/articles/index.html.erb</code>:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="s2">"/articles/</span><span class="si">#{</span><span class="n">article</span><span class="p">.</span><span class="nf">id</span><span class="si">}</span><span class="s2">"</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>There we go, that is now a little bit cleaner. Rails has given us a way to shorten this code a little. But what you don't know yet is that this line can be made even simpler.</p>
<p>Rails has a feature called <em>routing helpers</em>. These are methods that can be used to generate route paths like <code>&quot;/articles/#{article.id}&quot;</code> programatically. We'll use one of these to generate the route for our article. To set this up, let's go back to <code>config/routes.rb</code> and change this line:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span>
</code></pre></div></div>
<p>To this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span><span class="p">,</span> <span class="ss">as: :article</span>
</code></pre></div></div>
<p>The <code>:as</code> option here tells Rails that we want routing helpers for this article route to be available in our application. Rails will then let us use this helper to build that route.</p>
<p>Let's look at how we can use that in <code>app/views/articles/index.html.erb</code> now, by changing the end of the <code>link_to</code> call to this:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>The <code>link_to</code> now assembles its path using the <code>article_path</code> helper. This will still generate the same <code>/articles/:id</code> route we used earlier, but now it happens programatically instead. Now there is not so much switching happening between HTML and Ruby in this code. We enter Ruby, generate a link, and exit Ruby. The code still does the same thing: it links an article's title to the <code>show</code> page for that article.</p>
<p>TIP: To learn more about routing, read the <a href="https://guides.rubyonrails.org/routing.html">Rails Routing from the Outside In Guide</a>.</p>
<p>We now have an <code>index</code> action that lists the articles, and a <code>show</code> action that shows the title and body for a specific article. Before we move on, we'll make one more little change: we'll add a &quot;Back&quot; link in <code>app/views/articles/show.html.erb</code>:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;div&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Back"</span><span class="p">,</span> <span class="s2">"/"</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>

</code></pre></div></div>
<p>This will allow us to navigate back to the list of articles easily.</p>
<p>With that small change done, let's now look at how we can create new articles within this application.</p>
<h3 id="creating-new-articles">Creating new articles</h3>
<p>To have a place to create new articles in our application, we're going to need create a new route, action and view. On that view, we're going to have this form:</p>
<p>IMAGE GOES HERE</p>
<p>Let's start with the route:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#new"</span><span class="p">,</span> <span class="ss">as: :new_article</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span><span class="p">,</span> <span class="ss">as: :article</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This place to create new articles will be <code>/articles/new</code>, and the route for this has <em>very</em> intentionally been placed above the route for the <code>show</code> action. The reason for this is because routes in a Rails application are matched top-to-bottom. If we had <code>/articles/:id</code> first, that route would match <code>/articles/new</code>, and so if we went to <code>/articles/new</code>, the <code>show</code> action would serve that request, not the <code>new</code> action. And so for this reason, we put the <code>new</code> route <em>above</em> the <code>show</code> action.</p>
<p>This <code>/articles/new</code> route will send the request to the <code>new</code> action within the <code>ArticlesController</code>, which we'll see in a minute. We've added the <code>:as</code> option here, as we will be using the <code>new_article_path</code> helper in a little while to provide a way to navigate to this form.</p>
<p>If we were to attempt to go to this route now, would see an error for the first time:</p>
<p><img src="images/getting_started/unknown_action_new_for_articles.png" alt="Unknown action new for ArticlesController!" /></p>
<p>This error indicates that Rails cannot find the <code>new</code> action inside the
<code>ArticlesController</code>. No worries, we will need to define this action.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>We can put the <code>new</code> action under <code>show</code> in the controller, because the order of methods in classes doesn't matter in Ruby.</p>
<p>With the <code>new</code> method defined in <code>ArticlesController</code>, if you refresh
<a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll see another error:</p>
<p><img src="images/getting_started/template_is_missing_articles_new.png" alt="Template is missing for articles/new" /></p>
<p>You're getting this error now because Rails expects empty actions like this one to have views associated with them to display their information. With no view available, Rails will raise an exception.</p>
<p>Let's look at the full error message again:</p>
<blockquote>
<p>ArticlesController#new is missing a template for request formats: text/html</p>
</blockquote>
<blockquote>
<p>NOTE!
Unless told otherwise, Rails expects an action to render a template with the same name, contained in a folder named after its controller. If this controller is an API responding with 204 (No Content), which does not require a template, then this error will occur when trying to access it via browser, since we expect an HTML template to be rendered for such requests. If that's the case, carry on.</p>
</blockquote>
<p>The message identifies which template is missing. In this case, it's the
<code>articles/new</code> template. Next the message contains <code>request.formats</code> which specifies the format of template to be served in response. It is set to <code>text/html</code> as we requested this page via browser, so Rails is looking for an HTML template.</p>
<p>The simplest template that would work in this case would be one located at <code>app/views/articles/new.html.erb</code>. The extension of this file name is important: the first extension is the <em>format</em> of the template, and the second extension is the <em>handler</em> that will be used to render the template.  Think of it reading right-to-left: &quot;I'm going to <em>execute ERB</em> to <em>generate HTML</em> for the <em><code>new</code> action</em>&quot;.</p>
<p>So let's now go ahead now and create a new file at <code>app/views/articles/new.html.erb</code> and write this content in it:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>New Article<span class="nt">&lt;/h1&gt;</span>
</code></pre></div></div>
<p>To create a form within this template, you will use a <em>form
builder</em>. The primary form builder for Rails is provided by a helper
method called <code>form_with</code>. To use this method, add this code into
<code>app/views/articles/new.html.erb</code>:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>New Article<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/articles"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"title"</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/label&gt;&lt;br&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"title"</span> <span class="na">name=</span><span class="s">"title"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"text"</span><span class="nt">&gt;</span>Text<span class="nt">&lt;/label&gt;&lt;br&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Save Article"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div>
<p>This is an awful lot of typing for building a form. Fortunately, Rails provides helpers for us to simplify matters:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>New Article<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">scope: :article</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>The <code>form_with</code> helper method allows us to build a form. The first line of this provides us a block argument called <code>form</code>, and then throughout the form we use that to build labels and text inputs for our field.</p>
<p>NOTE: By default <code>form_with</code> submits forms using Ajax thereby skipping full page redirects. To make this guide easier to get into we've disabled that with <code>local: true</code> for now.</p>
<p>This ERB code that uses <code>form_with</code> will output a HTML form that looks very similar to the one we hand-rolled, but there are some key differences. Here's what the <code>form_with</code> outputs:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/articles/new"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"authenticity_token"</span> <span class="na">value=</span><span class="s">"DIwa34..."</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"article_title"</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/label&gt;&lt;br&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"article[title]"</span> <span class="na">id=</span><span class="s">"article_title"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"article_text"</span><span class="nt">&gt;</span>Text<span class="nt">&lt;/label&gt;&lt;br&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"article[text]"</span> <span class="na">id=</span><span class="s">"article_text"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/textarea&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">name=</span><span class="s">"commit"</span> <span class="na">value=</span><span class="s">"Save Article"</span> <span class="na">data-disable-with=</span><span class="s">"Save Article"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div>
<p>The first key difference is that there is a hidden field called <code>authenticity_token</code> at the top. This is a security feature of Rails and it prevents outside people from submitting your forms maliciously using a technique called Cross Site Request Forgery. <a href="https://stackoverflow.com/a/1571900/15245">This Stack Overflow answer explains further</a>.</p>
<p>The labels and fields are mostly the way they were, with a key difference: the <code>name</code> fields have an <code>article[]</code> wrapping around their values. This wrapping comes from the <code>scope</code> argument that we have passed to <code>form_with</code>. This wrapping groups all the fields of the form into one hash once they're submitted, and that will make it easy to process once they reach our application.</p>
<p>Speaking of, let's try and fill out this form now with a title and a body for our 3rd article:</p>
<p><img src="/images/getting_started/article_the_third.png" alt="The third article" /></p>
<p>There's one problem with this form though. If you inspect the HTML that is generated, by viewing the source of the page, you will see that the <code>action</code> attribute for the form is pointing at <code>/articles/new</code>. This is a problem because this route goes to the very page that you're on right at the moment, and that route should only be used to display the form for a new article.</p>
<p>The form needs to use a different URL in order to go somewhere else.
This can be done quite simply with the <code>:url</code> option of <code>form_with</code>.
Typically in Rails, the action that is used for new form submissions
like this is called &quot;create&quot;, and so the form should be pointed to that action.</p>
<p>Edit the <code>form_with</code> line inside <code>app/views/articles/new.html.erb</code> to look like this:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">scope: :article</span><span class="p">,</span> <span class="ss">url: </span><span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Once the form is submitted, it will send a <code>POST</code> request to <code>/articles</code>. If we hit submit on that form now, we'll be shown a Routing Error:</p>
<p><img src="/images/getting_started/routing_error_post_articles.png" alt="Routing Error" /></p>
<p>This error means that we haven't set up a route to handle <code>POST</code> requests to <code>/articles</code>. If we look in our <code>config/routes.rb</code> file, we'll see that is correct:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#new"</span><span class="p">,</span> <span class="ss">as: :new_article_path</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span><span class="p">,</span> <span class="ss">as: :article</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Let's add this new route now:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#new"</span><span class="p">,</span> <span class="ss">as: :new_article_path</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span><span class="p">,</span> <span class="ss">as: :article</span>
  <span class="n">post</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#create"</span>
<span class="k">end</span>
</code></pre></div></div>
<p>TIP: The <code>get</code> and <code>post</code> methods that we use in <code>config/routes.rb</code> match HTTP request methods. These methods are conventions used across all HTTP applications -- not just Rails! -- to clearly indicate what sort of action we want to do. A <code>GET</code> request is one that retrieves information. A <code>POST</code> request is one that <em>adds</em> information. For more detials on these, see this MDN article: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods</a>.</p>
<p>When Rails receives a <code>POST /articles</code> request, it will now route that request to the <code>create</code> action of the <code>ArticlesController</code>. However, if we re-submit that form, we'll see that the action cannot be found:</p>
<p><img src="images/getting_started/unknown_action_create_for_articles.png" alt="Unknown action create for ArticlesController" /></p>
<p>You now need to create the <code>create</code> action within the <code>ArticlesController</code> for this to work.</p>
<h3 id="creating-articles">Creating Articles</h3>
<p>To make the &quot;Unknown action&quot; go away, we can define a <code>create</code> action within the <code>ArticlesController</code> class in <code>app/controllers/articles_controller.rb</code>, underneath the <code>new</code> action, as shown:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>If you re-submit the form now, you may not see any change on the page. Don't worry!</p>
<p>This is because Rails by default returns <code>204 No Content</code> response for an action if we don't specify what the response should be. We just added the <code>create</code> action but didn't specify anything about how the response should be. In this case, the <code>create</code> action should save our new article to the database.</p>
<p>When a form is submitted, the fields of the form are sent to Rails as
<em>parameters</em>. Yes, there are the same parameters as we saw earlier when we used <code>params[:id]</code>. These parameters can then be referenced inside the controller actions, typically to perform a particular task. To see what these parameters look like, change the <code>create</code> action to this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create</span>
  <span class="n">render</span> <span class="ss">plain: </span><span class="n">params</span><span class="p">[</span><span class="ss">:article</span><span class="p">].</span><span class="nf">inspect</span>
<span class="k">end</span>
</code></pre></div></div>
<p>The <code>render</code> method here is taking a very simple hash with a key of <code>:plain</code> and value of <code>params[:article].inspect</code>. The <code>params</code> method is the object which represents the parameters (or fields) coming in from the form. The <code>params</code> method returns an <code>ActionController::Parameters</code> object, which allows you to access the keys of the hash using either strings or symbols. In this situation, the only parameters that matter are the ones from the form. Thanks to the use of the <code>scope</code> option on the form, all of our form's parameters are grouped under <code>params[:article]</code>.</p>
<p>TIP: Ensure you have a firm grasp of the <code>params</code> method, as you'll use it fairly regularly. Let's consider an example URL: <strong><a href="http://www.example.com/?username=dhh&amp;email=dhh@email.com">http://www.example.com/?username=dhh&amp;email=dhh@email.com</a></strong>. In this URL, <code>params[:username]</code> would equal &quot;dhh&quot; and <code>params[:email]</code> would equal &quot;<a href="mailto:dhh@email.com">dhh@email.com</a>&quot;.</p>
<p>If you re-submit the form one more time, you'll see something that looks like the following:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="no">ActionController</span><span class="o">::</span><span class="no">Parameters</span> <span class="p">{</span><span class="s2">"title"</span><span class="o">=&gt;</span><span class="s2">"Article the Third"</span><span class="p">,</span> <span class="s2">"text"</span><span class="o">=&gt;</span><span class="s2">"The Trilogy Ends"</span><span class="p">}</span> <span class="ss">permitted: </span><span class="kp">false</span><span class="o">&gt;</span>
</code></pre></div></div>
<p>This action is now displaying the parameters for the article that are coming in from the form. However, this isn't really all that helpful. Yes, you can see the parameters but nothing in particular is being done with them.</p>
<p>Let's change the  <code>create</code> action to use the <code>Article</code> model to save the data in the database. Let's change the <code>create</code> action to look like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create</span>
  <span class="n">article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article</span><span class="p">])</span>
  <span class="n">article</span><span class="p">.</span><span class="nf">save</span>

  <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>
<p>NOTE: We're <em>not</em> using an instance variable in this action. This is because this action redirects at the end, and since there is a redirection there is no view. So there is no need to make these variables instance variables.</p>
<p>Here we use some familar code to create a new article -- we saw this previously right after we generated the <code>Article</code> model. The call to <code>new</code> and then to <code>save</code> will create a new article record in the database.</p>
<p>The final line, a <code>redirect_to</code>, uses <code>article_path</code> to redirect back to the <code>show</code> action.</p>
<p>If you now go to <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll <em>almost</em> be able to create an article. Try it! You should get an error that looks like this:</p>
<p><img src="images/getting_started/forbidden_attributes_for_new_article.png" alt="Forbidden attributes for new article" /></p>
<p>Rails has several security features that help you write secure applications, and you're running into one of them now. This one is called <a href="action_controller_overview.html#strong-parameters">strong parameters</a>,
which requires us to tell Rails exactly which parameters are allowed into our controller actions.</p>
<p>Why do you have to bother? The ability to grab and automatically assign all controller parameters to your model in one shot makes the programmer's job easier, but this convenience also allows malicious use. What if this form was a bank account and we allowed just anyone to add in a new field that set their balance to whatever they wished? This would end up bad for us!</p>
<p>We have to define our permitted controller parameters to prevent wrongful mass assignment. In this case, we want to both allow and require the <code>title</code> and <code>body</code> parameters for valid use of <code>create</code>. The syntax for this introduces <code>require</code> and <code>permit</code>. The change will involve one line in the <code>create</code> action:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">))</span>
</code></pre></div></div>
<p>This code is quite long and is often pulled out into its own method so it can be reused by multiple actions in the same controller. Above and beyond mass assignment issues, the method is often made <code>private</code> to make sure it can't be called outside its intended context. Here is the result:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

  <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
  <span class="n">redirect_to</span> <span class="vi">@article</span>
<span class="k">end</span>

<span class="kp">private</span>
  <span class="k">def</span> <span class="nf">article_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>
<p>TIP: For more information, refer to the reference above and
[this blog article about Strong Parameters]
(<a href="https://weblog.rubyonrails.org/2012/3/21/strong-parameters/">https://weblog.rubyonrails.org/2012/3/21/strong-parameters/</a>).</p>
<p>If we attempt to submit our form once more, this time it will succeed and we'll see the article's title and body. The URL should be <a href="http://localhost:3000/articles/3">http://localhost:3000/articles/3</a>, indicating that we're now on the <code>show</code> action.</p>
<p>Before we wrap up this section, let's add a link to <code>app/views/articles/index.html.erb</code> so that we can go to the &quot;New Article&quot; page from there:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"New Article"</span><span class="p">,</span> <span class="n">new_article_path</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>Now we'll have an easy link to go back to that page:</p>
<p><img src="/images/getting_started/three_articles.png" alt="Three articles" /></p>
<p>Great! That's another two actions finished in our controller: <code>new</code> and <code>create</code>.</p>
<h3 id="adding-some-validation">Adding Some Validation</h3>
<p>Sometimes, in web applications, we want to make sure certain fields are filled in.</p>
<p>The model file, <code>app/models/article.rb</code> is about as simple as it can get:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
<span class="k">end</span>
</code></pre></div></div>
<p>There isn't much to this file - but note that the <code>Article</code> class inherits from
<code>ApplicationRecord</code>. <code>ApplicationRecord</code> inherits from <code>ActiveRecord::Base</code> which supplies a great deal of functionality to your Rails models for free. We've used some of this already: <code>Article.new</code>, <code>Article.all</code>, <code>Article.find</code> and so on.</p>
<p>One of these pieces of functionality is that Active Record includes methods to help you validate the data that you send to models and it's easy to use.</p>
<p>Open the <code>app/models/article.rb</code> file and edit it to this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span>
                    <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">5</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>
<p>These changes will ensure that all articles have a title that is at least five characters long. Rails can validate a variety of conditions in a model, including the presence or uniqueness of columns, their format, and the existence of associated objects. Validations are covered in detail in <a href="active_record_validations.html">Active Record Validations</a>.</p>
<p>This validation will now only let us save articles that have titles longer than 5 characters. Let's open up the console now and try:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails console
</code></pre></div></div>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">001</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">invalid_article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Article id: nil, title: nil, body: nil, created_at: nil, updated_at: nil&gt;</span>
<span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">002</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">invalid_article</span><span class="p">.</span><span class="nf">save</span>
<span class="o">=&gt;</span> <span class="kp">false</span>
</code></pre></div></div>
<p>When <code>save</code> returns <code>false</code>, it means that the object is invalid and won't be saved to the database. To find out why, we can use this code:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">003</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">invalid_article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"Title can't be blank"</span><span class="p">,</span> <span class="s2">"Title is too short (minimum is 5 characters)"</span><span class="p">]</span>
</code></pre></div></div>
<p>The <code>errors.full_messages</code> method chain shows two validation failure messages for our model:</p>
<ul>
<li>The title can't be blank</li>
<li>The title is too short (minimum of 5 characters)</li>
</ul>
<p>That's because we've left the title blank. Now let's see what happens when we save an article with a valid title:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irb(main):006:0&gt; article = Article.new title: "Getting Started"
=&gt; #&lt;Article id: nil, title: "Getting Started", body: nil, created_at: nil, updated_at: nil&gt;

irb(main):007:0&gt; article.save
   (0.1ms)  begin transaction
  Article Create (0.4ms)  INSERT INTO "articles" ("title", "created_at", "updated_at") VALUES (?, ?, ?)  [["title", "Getting Started"], ["created_at", "2020-01-19 09:56:25.693465"], ["updated_at", "2020-01-19 09:56:25.693465"]]
   (0.6ms)  commit transaction
=&gt; true
</code></pre></div></div>
<p>The <code>save</code> call here has returned <code>true</code>, indicating that the article has passed validations. Also in the console, we can see an <code>Article Create</code> message, that contains an <code>INSERT INTO</code> database query, and so we can be confident that this article has now been inserted into our database.</p>
<p>Now that we've seen how to handle invalid and valid articles in the console, let's try using this same technique in our controller.</p>
<p>If you open
<code>app/controllers/articles_controller.rb</code> again, you'll notice that we don't check the result of calling <code>@article.save</code> inside the <code>create</code> action.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

  <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
  <span class="n">redirect_to</span> <span class="vi">@article</span>
<span class="k">end</span>
</code></pre></div></div>
<p>If <code>@article.save</code> fails in this situation, we need to do something different: we need to show the form again to the user so that they can correct their mistake.</p>
<p>To do this, let's change the <code>create</code> action to either redirect to the article if the save was successful (the method returns <code>true</code>) or to show the new form again if the save failed:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">new</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">create</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

  <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
    <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="n">render</span> <span class="s1">'new'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>The first thing to note here is that we've now switched from using a local variable <code>article</code> to using an instance variable, <code>@article</code>. The reason for this is the <code>else</code> statement. Inside that <code>else</code> we tell Rails to <code>render 'new'</code>. This tells Rails that we want the <code>app/views/articles/new.html.erb</code> view to be rendered in the case where our save fails.</p>
<p>If you reload <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> and
try to save an article without a title, Rails will send you back to the
form, but that's not very useful. It doesn't tell us why something went wrong. To do that, we'll need to modify <code>app/views/articles/new.html.erb</code> to check for error messages:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>New Article<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">scope: :article</span><span class="p">,</span> <span class="ss">url: </span><span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>

  <span class="cp">&lt;%</span> <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">any?</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"error_explanation"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">pluralize</span><span class="p">(</span><span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">count</span><span class="p">,</span> <span class="s2">"error"</span><span class="p">)</span> <span class="cp">%&gt;</span> prohibited
        this article from being saved:
      <span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;ul&gt;</span>
        <span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">msg</span><span class="o">|</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">msg</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>At the top of this view, we're now using <code>@article.errors</code> to check for any errors. The <code>@article</code> variable here will come from the <code>create</code> action, when the <code>app/views/articles/new.html.erb</code> view is rendered due to an invalid article.</p>
<p>Inside the check for any errors, we call <code>pluralize</code>. <code>pluralize</code> is a rails helper that takes a number and a string as its arguments. If the number is greater than one, the string will be automatically
pluralized.</p>
<p>If we attempt to go to <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> at this point, we'll see it fail:</p>
<p><img src="images/getting_started/no_method_in_form.png" alt="NoMethodError" /></p>
<p>This is happening because we're referring to a variable called <code>@article</code> within <code>app/views/articles/new.html.erb</code>, but the <code>new</code> action does not provide this variable at all.</p>
<p>The path to this error is:</p>
<ol>
<li>Browser goes to <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a></li>
<li>Rails sees <code>/articles/new</code> is the route, routes the request to the <code>ArticlesController</code>'s <code>new</code> action</li>
<li>The <code>new</code> action is blank, and so Rails defaults to rendering <code>app/views/articles/new.html.erb</code>.</li>
<li>The template attempts to reference <code>@article</code>, but it is not defined.</li>
</ol>
<p>So to make this error go away, we need to define this <code>@article</code> variable. We can do it like this in the <code>new</code> action inside <code>app/controllers/articles_controller.rb</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">new</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This <code>@article</code> is a brand-new <code>Article</code> object, and will be perfect for our form. It doesn't have any errors on it -- because we haven't tried saving it yet! -- and so the form will not display any errors.</p>
<p>If we refresh this <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> page, we should see our form renders once again.</p>
<p><img src="images/getting_started/new_article.png" alt="The form works again" /></p>
<p>Now you'll get a nice error message when saving an article without a title when
you attempt to do just that on the new article form
<a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a>:</p>
<p><img src="images/getting_started/form_with_errors.png" alt="Form With Errors" /></p>
<p>And there we have it! We now have the ability to create new articles within our application.</p>
<h3 id="updating-articles">Updating Articles</h3>
<p>Now what should happen if we make a mistake when creating an article? Well, we should have a way to edit an article and correct that mistake.</p>
<p>Our edit form will look just like our new form, just with a few differences:</p>
<p><img src="/images/getting_started/edit_form.png" alt="Edit form" /></p>
<p>Firstly, the title will say &quot;Edit Article&quot;, not &quot;New Article&quot;. Secondly, the fields will be filled out with the article's current values. And lastly, the submit button says &quot;Update Article&quot;, not &quot;Save Article&quot;.</p>
<p>To add this feature to our application, we're going to need to add a new route, a route just for editing articles. Let's do this now in <code>config/routes.rb</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s2">"/articles/:id/edit"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#edit"</span><span class="p">,</span> <span class="ss">as: :edit_article</span>
</code></pre></div></div>
<p>This new route is another <code>get</code> route. This time, we're routing to <code>/articles/:id/edit</code>, so that we can see that edit form for a particular article. Which article we're editing depends on that <code>:id</code> parameter in the route.</p>
<p>The route will be handled by the <code>edit</code> action within <code>ArticlesController</code>. We'll add that action soon.</p>
<p>The <code>as</code> option will provide us with a routing helper that we can use across our application to take us to this edit form for a specific article.</p>
<p>As a first step, let's add an &quot;Edit&quot; link for each article on <code>app/views/articles/index.html.erb</code>:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"New Article"</span><span class="p">,</span> <span class="n">new_article_path</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Edit"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>This &quot;Edit&quot; link will now appear next to all of the articles at <a href="http://localhost:3000/articles">http://localhost:3000/articles</a>.</p>
<p><img src="/images/getting_started/articles_with_edit.png" alt="Articles with edit links" /></p>
<p>If we click on any one of those &quot;Edit&quot; links, we'll see that we haven't yet defined the <code>edit</code> action.</p>
<p><img src="/images/getting_started/no_edit_action.png" alt="No edit action" /></p>
<p>So the next step here is to add that action to our controller. Let's open <code>app/controllers/articles_controller.rb</code> and add that action:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">new</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">create</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

  <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
    <span class="n">redirect_to</span> <span class="vi">@article</span>
  <span class="k">else</span>
    <span class="n">render</span> <span class="s1">'new'</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">edit</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
<span class="k">end</span>
</code></pre></div></div>
<p>NOTE:  We're using <code>edit</code> to render just a form to display the current values of the article. For the actual updating of the article, we'll use a different action for this shortly called <code>update</code>.</p>
<p>The view will contain a form similar to the one we used when creating new articles. Create a file called <code>app/views/articles/edit.html.erb</code> and put this content inside:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Edit Article<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="vi">@article</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>

  <span class="cp">&lt;%</span> <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">any?</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"error_explanation"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">pluralize</span><span class="p">(</span><span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">count</span><span class="p">,</span> <span class="s2">"error"</span><span class="p">)</span> <span class="cp">%&gt;</span> prohibited
        this article from being saved:
      <span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;ul&gt;</span>
        <span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">msg</span><span class="o">|</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">msg</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Back'</span><span class="p">,</span> <span class="n">articles_path</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>The only things different in this view are the <code>&lt;h1&gt;</code> at the top of the view, and the <code>form_with</code>. The <code>form_with</code> is not using <code>scope</code> or <code>url</code>, but is instead using a different key called <code>model</code>.</p>
<p>The <code>model</code> key for <code>form_with</code> takes an instance of a model's class and builds a form for that particular object. By using <code>form_with</code> in this way, Rails will pre-populate the title and body fields in this form for us.</p>
<p>There's one extra feature that Rails does for us that is not immediately obvious from looking at the form itself. This feature requires us to look at the HTML source of this form. Inside this source at the top of the <code>&lt;form&gt;</code> element, here's what we'll see:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/articles/1"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"_method"</span> <span class="na">value=</span><span class="s">"patch"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>
<p>Firstly, the <code>action</code> attribute for this form goes to a route called <code>/articles/1</code>. This path was automatically generated by Rails; in short: it uses the <code>article_path</code> helper to generate this route. The second thing to notice is that hidden field. This hidden field is a special field that will make the form do a <code>PATCH</code> request when this form is submitted, instead of the default <code>POST</code> (as is configured in the <code>form</code> element's <code>method</code> attribute).</p>
<p>This means that our form will make a <code>PATCH /articles/1</code> request when it is submitted. If we hit submit on the form, we'll see that this is correct, and that this route is currently missing:</p>
<p><img src="/images/getting_started/no_route_for_patch_articles.png" alt="No route matches [PATCH] &quot;/articles/1&quot;" /></p>
<p>This route is supposed to handle the submission of our form, but the route does not exist yet. To make this form work, we'll need to define this route. Let's go back to <code>config/routes.rb</code> and define this route:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#new"</span><span class="p">,</span> <span class="ss">as: :new_article</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span><span class="p">,</span> <span class="ss">as: :article</span>
  <span class="n">post</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#create"</span>
  <span class="n">get</span> <span class="s2">"/articles/:id/edit"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#edit"</span><span class="p">,</span> <span class="ss">as: :edit_article</span>
  <span class="n">patch</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#update"</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This <code>patch</code> method will generate us a route for <code>PATCH /articles/:id</code> requests. We use the <code>PATCH</code> HTTP routing method for when we want to modify an existing resource.</p>
<p>These requests to <code>PATCH /articles/:id</code> will be routed to the <code>update</code> action in our <code>ArticlesController</code>. Let's add that action now underneath the <code>edit</code> action:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">edit</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">update</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>

  <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>
    <span class="n">redirect_to</span> <span class="vi">@article</span>
  <span class="k">else</span>
    <span class="n">render</span> <span class="s1">'edit'</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="kp">private</span>
  <span class="k">def</span> <span class="nf">article_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
  <span class="k">end</span>
</code></pre></div></div>
<p>The new method, <code>update</code>, is used when you want to update a record that already exists, and it accepts a hash containing the attributes that you want to update. As before, if there was an error updating the article we want to show the form back to the user.</p>
<p>We reuse the <code>article_params</code> method that we defined earlier for the create action. We want to accept the same parameters here, and so it makes sense to use the same <code>article_params</code> method.</p>
<p>TIP: It is not necessary to pass all the attributes to <code>update</code>. For example, if <code>@article.update(title: 'A new title')</code> was called, Rails would only update the <code>title</code> attribute, leaving all other attributes untouched.</p>
<p>Let's try this again. We'll go to <a href="http://localhost:3000">http://localhost:3000</a>, click the &quot;Edit&quot; link next to one of the articles and change its title. I'm going to change the &quot;Hello Rails&quot; article's title to &quot;Hello Rails, how are you today?&quot;. When this happens and we submit the form, we will see the new title for that article:</p>
<p><img src="/images/getting_started/how_are_you_rails.png" alt="How are you, Rails?" /></p>
<p>On this page, we're currently missing a way to edit an article. This route that we're currently on is <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a>, and we know that the route matches to <code>app/views/articles/show.html.erb</code>.</p>
<p>This now finishes our adventures in adding the ability to edit an article in this application.</p>
<h3 id="using-partials-to-clean-up-duplication-in-views">Using partials to clean up duplication in views</h3>
<p>Our <code>edit</code> page looks very similar to the <code>new</code> page; in fact, they both share almost same code for displaying the form. Rails has yet another great feature that we can use to reduce this duplication and this feature is called <em>partials</em>.</p>
<p>Partials allow us to extract out comon pieces of views into a file that is then shared across many different views, or in this case, just two views. Let's remove this
duplication by using a partial. By convention, partial files are
prefixed with an underscore.</p>
<p>TIP: You can read more about partials in the
<a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a> guide.</p>
<p>Create a new file <code>app/views/articles/_form.html.erb</code>. We're going to copy <em>most</em> of <code>app/views/articles/edit.html.erb</code> into this new partial file:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">article</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>

  <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">any?</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"error_explanation"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">pluralize</span><span class="p">(</span><span class="n">article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">count</span><span class="p">,</span> <span class="s2">"error"</span><span class="p">)</span> <span class="cp">%&gt;</span> prohibited
        this article from being saved:
      <span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;ul&gt;</span>
        <span class="cp">&lt;%</span> <span class="n">article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">msg</span><span class="o">|</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">msg</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>This partial can now be used in both the <code>new</code> and <code>edit</code> views. Let's update the new view:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>New Article<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'form'</span><span class="p">,</span> <span class="ss">article: </span><span class="vi">@article</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Then do the same for the <code>app/views/articles/edit.html.erb</code> view:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Edit Article<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'form'</span><span class="p">,</span> <span class="ss">article: </span><span class="vi">@article</span> <span class="cp">%&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Back'</span><span class="p">,</span> <span class="n">articles_path</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>This <code>render</code> call in a view works differently to the <code>render</code> call in a controller. Back in the <code>create</code> action for <code>ArticlesController</code>, we have this:</p>
<pre><code>def create
  @article = Article.new(article_params)

  if @article.save
    redirect_to @article
  else
    render 'new'
  end
end
</code></pre>
<p>This <code>render</code> method call will render a <em>view</em>, not a partial. In this case, it will render the <code>app/views/articles/new.html.erb</code> view.</p>
<p>But when we call <code>render</code> inside a view, it will render a <em>partial</em>. When we call <code>render 'form', article: @article</code> inside our <code>new.html.erb</code> and <code>edit.html.erb</code> views, this will render the <code>app/views/articles/_form.html.erb</code> partial. How does Rails know that we want <em>this</em> particular form partial? It assumes we want the one in the same directory as the current view by default. This is another one of Rails' conventions at work!</p>
<p>The <code>article: @article</code> syntax at the end of this line tells Rails that we want to pass the instance variable <code>@article</code> to the partial as a <em>local variable</em> called <code>article</code>.</p>
<p>Inside that partial, we can access whatever the current article is by using the <code>article</code> local variable.</p>
<p>Now, an interesting thing happens here. When this partial is rendered for the <code>new</code> action, the form will submit to the <code>create</code> action. But when it's rendered for the <code>edit</code> action, it will submit to the <code>update</code> action. Go ahead and try it.</p>
<p>How can one piece of code do two things? The way this works lies in the magic of <code>form_with</code> and what it outputs, depending on its <code>model</code> option.</p>
<p>When this partial is rendered by the <code>new</code> action, the <code>@article</code> variable is set like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">new</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
<span class="k">end</span>
</code></pre></div></div>
<p>The <code>form_with</code> helper from Rails detects that this object hasn't yet been saved to the database, and therefore assumes we want to display a form for <em>creating</em> a new article. If you look at the HTML source from <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a>, you'll see the form is configured like this:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/articles"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
</code></pre></div></div>
<p>When the form is submitted, it will make a <code>POST /articles</code> request. This will go to the <code>create</code> action in <code>ArticlesController</code>, because that's how our routes are configured:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#create"</span>
</code></pre></div></div>
<p>Over in the <code>edit</code> action, we instead set <code>@article</code> like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">edit</span>
  <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This <code>@article</code> represents an article that has already been saved to the database, and so <code>form_with</code> behaves different. Let's look at the HTML source from <a href="http://localhost:3000/articles/1/edit">http://localhost:3000/articles/1/edit</a> and see:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/articles/1"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"_method"</span> <span class="na">value=</span><span class="s">"patch"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>
<p>This is the same <code>form_with</code> method call that is running, but it is acting differently. This time, the form is generated with an <code>action</code> of <code>/articles/1</code>. The hidden field called <code>_method</code> will make Rails do a <code>PATCH /articles/1</code> request. If we look in our routes file, we'll see that such a request goes to the <code>update</code> action:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">patch</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#update"</span>
</code></pre></div></div>
<p>This is no coincidence. We have chosen these routes very specifically so that we can follow Rails conventions. The <code>form_with</code> helper acts differently depending on if the <code>@article</code> has been saved or not, and so we can use this one partial to represent a form in either <code>new.html.erb</code> or <code>edit.html.erb</code>.</p>
<p>Partials are a very handy feature of Rails that we can use to remove duplication between separate views. And combining them with <code>form_with</code> allows us to merge together two forms into one, without sacrificing any of our sanity.</p>
<h3 id="deleting-articles">Deleting Articles</h3>
<p>We're now able to see, create, and update articles within our application. The final part that we'll cover for articles in this guide is how to delete them.</p>
<p>In order to edit articles, we provided a link right next to the article's title in <code>app/views/articles/index.html.erb</code>. To delete articles, let's do the same thing:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"New Article"</span><span class="p">,</span> <span class="n">new_article_path</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Edit"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Delete"</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre></div></div>
<p>This <code>link_to</code> won't delete the article. It will instead take us to the <code>show</code> action in <code>ArticlesController</code> and show us the article itself. We need to add one extra thing to this link, which is a <code>method</code> option:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Delete"</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">),</span> <span class="ss">method: :delete</span>
<span class="cp">%&gt;</span>
</code></pre></div></div>
<p>This will make the link make a <code>DELETE /articles/:id</code> request. The <code>DELETE</code> HTTP method is one that we use when we want to delete things.</p>
<p>We can now refresh this page and click one of these &quot;Delete&quot; links. This request currently won't work, because we don't have a <code>DELETE /articles/:id</code> route set up:</p>
<p><img src="/images/getting_started/no_delete_route.png" alt="No delete route" /></p>
<p>Let's add this route to <code>config/routes.rb</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#new"</span><span class="p">,</span> <span class="ss">as: :new_article</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span><span class="p">,</span> <span class="ss">as: :article</span>
  <span class="n">post</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#create"</span>
  <span class="n">get</span> <span class="s2">"/articles/:id/edit"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#edit"</span><span class="p">,</span> <span class="ss">as: :edit_article</span>
  <span class="n">patch</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#update"</span>
  <span class="n">delete</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#destroy"</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This route will now match <code>DELETE /articles/:id</code> requests and send them to the <code>destroy</code> action in <code>ArticlesController</code>. Let's add this action now in the <code>ArticlesController</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">destroy</span>
  <span class="n">article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="n">article</span><span class="p">.</span><span class="nf">destroy</span>

  <span class="n">redirect_to</span> <span class="n">articles_path</span>
<span class="k">end</span>
</code></pre></div></div>
<p>The complete <code>ArticlesController</code> in the
<code>app/controllers/articles_controller.rb</code> file should now look like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="s1">'new'</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="s1">'edit'</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="n">article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="n">article</span><span class="p">.</span><span class="nf">destroy</span>

    <span class="n">redirect_to</span> <span class="s1">'/'</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">article_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>You can call <code>destroy</code> on model instances when you want to delete them from the database. Note that we don't need to add a view for this action since we're redirecting back to '/' -- the root of our application.</p>
<p>If we click &quot;Delete&quot; again on our list of articles, we'll each article disappear in turn.</p>
<p>We might want to be a little mindful here and ask users if they're <em>really</em> sure that they want to delete an article. Having a link so close to &quot;Edit&quot; like this is a recipe for disaster!</p>
<p>To prompt the user, we're going to change the &quot;Delete&quot; link in <code>app/views/articles/index.html.erb</code> to this:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Delete"</span><span class="p">,</span>
  <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">),</span>
  <span class="ss">method: :delete</span><span class="p">,</span>
  <span class="ss">data: </span><span class="p">{</span>
    <span class="ss">confirm: </span><span class="s2">"Are you sure you want to delete this article?"</span>
  <span class="p">}</span>
<span class="cp">%&gt;</span>
</code></pre></div></div>
<p>This <code>data</code> option uses a feature of Rails called <em>Unobtrusive JavaScript</em>. By default, Rails applications come with a little bit of JavaScript for features like this.</p>
<p>TIP: Learn more about Unobtrusive JavaScript on
<a href="working_with_javascript_in_rails.html">Working With JavaScript in Rails</a> guide.</p>
<p>When we refresh this page and click &quot;Delete&quot; once again, we'll see a new dialog box appear:</p>
<p><img src="/images/getting_started/confirm_dialog.png" alt="Confirm Dialog" /></p>
<p>If you press &quot;Cancel&quot; on this box, nothing will happen. The article will <em>not</em> be deleted. But if you press &quot;OK&quot;, then the article will be deleted. Rails provides this option on links just for links like this &quot;Delete&quot; link. We want people to be <em>really sure</em> that they mean to delete articles before they actually do it!</p>
<p>That is the last of our actions in the <code>ArticlesController</code>. We now have ways to create, read, update and delete articles. This pattern is so common in Rails applications that it even has its own acronym: CRUD: Create, Read, Update and Delete. What we have built here is a CRUD interface for articles.</p>
<h3 id="routing-for-resources">Routing for resources</h3>
<p>So far, we have not had to write much code to make our application functional. But there's one extra thing that will massively reduce the lines of code you will write in the future, and that thing is called <em>resource routing</em>.</p>
<p>Rails has a convention that it follows when it comes to routing. When we list a collection of a resource, such as articles, that list is going to appear under the <code>index</code> action. When we want to see a single resource, such as a single article, that appears at the <code>show</code> action, and so on.</p>
<p>So far, we have been following this convention in Rails without drawing attention too much attention to it. In this section, we're going to draw a lot of attention to it. By following this routing convention, we can simplify the code within <code>config/routes.rb</code> drastically. That file currently contains this code:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/new"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#new"</span><span class="p">,</span> <span class="ss">as: :new_article</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span><span class="p">,</span> <span class="ss">as: :article</span>
  <span class="n">post</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#create"</span>
  <span class="n">get</span> <span class="s2">"/articles/:id/edit"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#edit"</span><span class="p">,</span> <span class="ss">as: :edit_article</span>
  <span class="n">patch</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#update"</span>
  <span class="n">delete</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#destroy"</span>
<span class="k">end</span>
</code></pre></div></div>
<p>We've been able to define our routes using the <code>root</code>, <code>get</code>, <code>post</code>, <code>patch</code> and <code>delete</code> helpers. But Rails comes with one helper that we haven't seen yet, and that helper is called <code>resources</code>.</p>
<p>We can delete most of the code in this routes file and replace it with this method call:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>

  <span class="n">resources</span> <span class="ss">:articles</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This one line replaces all 7 of the routes that we had defined previously. This is one of the parts of Rails that people claim as the most &quot;magical&quot;, and hopefully by defining all 7 routes manually first you will gain an appreciation for the elegance of <code>resources</code> here.</p>
<p>To see what this has done, we can run this command in the terminal:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails routes <span class="nt">--controller</span> articles
</code></pre></div></div>
<p>Or:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails routes <span class="nt">-c</span> articles
</code></pre></div></div>
<p>This command will show us all the routes for the <code>ArticlesController</code>:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      Prefix Verb   URI Pattern                  Controller#Action
        root GET    /                            articles#index
    articles GET    /articles(.:format)          articles#index
 new_article GET    /articles/new(.:format)      articles#new
     article GET    /articles/:id(.:format)      articles#show
             POST   /articles(.:format)          articles#create
edit_article GET    /articles/:id/edit(.:format) articles#edit
             PATCH  /articles/:id(.:format)      articles#update
             DELETE /articles/:id(.:format)      articles#destroy
</code></pre></div></div>
<p>This command shows us four things:</p>
<ul>
<li>Prefix: The routing helper <em>prefix</em> that can be used to generate this route. For example &quot;article&quot; means <code>article_path</code> can be used.</li>
<li>Verb: The HTTP Verb / method that is used to make this request.</li>
<li>URI pattern: the <em>path</em> of the route that is used to make this request.</li>
<li>Controller &amp; Action: The controller &amp; action that will serve this request.</li>
</ul>
<p>From this output, we'll be able to tell that a <code>GET</code> request to <code>/articles/new</code> will go to the <code>ArticlesController</code>'s <code>new</code> action.</p>
<p>These are all the same routes that we had previously, it's just that we're using one line to generate them now instead of 7.</p>
<p>TIP: In general, Rails encourages using resources objects instead of declaring routes manually. For more information about routing, see <a href="routing.html">Rails Routing from the Outside In</a>.</p>
<p>We have now completely finished building the first part of our application. If you've gotten this far, give yourself a pat on the back! And maybe a little break before you continue on this guide.</p>
<p>We're about two-thirds of the way through, and have just a few more features of Rails to show off.</p>
<h2 id="adding-comments">Adding Comments</h2>
<p>Let's expand this application a little further by adding the ability for users to leave comments on articles.</p>
<h3 id="generating-a-model">Generating a Model</h3>
<p>To start with, we're going to generate a model for comments.</p>
<p>We're going to see the same generator that we used before when creating the <code>Article</code> model. This time we'll create a <code>Comment</code> model to hold a reference to an article. Run this command in your terminal:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails g model Comment commenter:string body:text article:references
</code></pre></div></div>
<p>This command will generate four files:</p>
<pre><code>invoke  active_record
create    db/migrate/[timestamp]_create_comments.rb
create    app/models/comment.rb
invoke    test_unit
create      test/models/comment_test.rb
create      test/fixtures/comments.yml
</code></pre>
<p>First, let's take a look at <code>app/models/comment.rb</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:article</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This is very similar to the <code>Article</code> model that you saw earlier. The difference is the line <code>belongs_to :article</code>, which sets up an Active Record <em>association</em>. You'll learn a little about associations in the next section of this guide. This <code>belongs_to</code> was added to our model because we specific <code>article:references</code> when we generated this model.</p>
<p>The <code>references</code> type is a special type that define an association between the model that we're generating and another model. In this case, we're saying that every comment <em>belongs to</em> an article.</p>
<p>Let's look at the migration next:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateComments</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">6.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:comments</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:commenter</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">text</span> <span class="ss">:body</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">references</span> <span class="ss">:article</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">foreign_key: </span><span class="kp">true</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>The <code>t.references</code> line creates does a few things:</p>
<ol>
<li>It adds a field called <code>article_id</code> to the comments table</li>
<li>A <a href="https://www.essentialsql.com/what-is-a-database-index/">database index</a> is added for that column. This will speed up retrieving comments for particular articles.</li>
<li>The <code>null: false</code> option says that in no circumstance can this column be set to a <code>NULL</code> value.</li>
<li>The <code>foreign_key: true</code> option says that this column is linked to the <code>articles</code> table, and that the column's values must be represented in the <code>articles</code> table, in the <code>id</code> column. There can be no comments without a related article to match.</li>
</ol>
<p>Go ahead and run the migration:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails db:migrate
</code></pre></div></div>
<p>Rails is smart enough to only execute the migrations that have not already been
run against the current database, so in this case you will just see:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">==</span>  CreateComments: migrating <span class="o">=================================================</span>
<span class="nt">--</span> create_table<span class="o">(</span>:comments<span class="o">)</span>
   -&gt; 0.0115s
<span class="o">==</span>  CreateComments: migrated <span class="o">(</span>0.0119s<span class="o">)</span> <span class="o">========================================</span>
</code></pre></div></div>
<p>This migration will create our comments table. It will look like this in our database:</p>
<table>
<thead>
<tr>
<th>id</th>
<th>commenter</th>
<th>body</th>
<th>article_id</th>
<th>created_at</th>
<th>updated_at</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> </td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="associating-models">Associating Models</h3>
<p>Active Record associations let you easily declare the relationship between two
models. In the case of comments and articles, you could write out the
relationships this way:</p>
<ul>
<li>Each comment belongs to one article.</li>
<li>One article can have many comments.</li>
</ul>
<p>In fact, this is very close to the syntax that Rails uses to declare this
association. You've already seen the line of code inside the <code>Comment</code> model
(app/models/comment.rb) that makes each comment belong to an Article:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:article</span>
<span class="k">end</span>
</code></pre></div></div>
<p>You'll need to edit <code>app/models/article.rb</code> to add the other side of the
association:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:comments</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span>
                    <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">5</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>
<p>These two declarations enable a good bit of automatic behavior. Let's explore some of this behaviour by starting up a new console:</p>
<pre><code>rails c
</code></pre>
<p>First, let's find an article:</p>
<pre><code>irb(main):001:0&gt; article = Article.first

Article Load (0.1ms)  SELECT &quot;articles&quot;.* FROM &quot;articles&quot; ORDER BY &quot;articles&quot;.&quot;id&quot; ASC LIMIT ?  [[&quot;LIMIT&quot;, 1]]

=&gt; #&lt;Article id: 1, title: &quot;Hello Rails&quot;, body: &quot;I'm on Rails&quot;, created_at: &quot;2020-01-20 05:22:45&quot;, updated_at: &quot;2020-01-20 05:22:45&quot;&gt;
</code></pre>
<p>Next up, let's create a new comment for this article by using the <code>comments</code> association method:</p>
<pre><code>irb(main):002:0&gt; article.comments.create(commenter: &quot;DHH&quot;, body: &quot;Welcome to Rails!&quot;)

Comment Create (0.4ms)  INSERT INTO &quot;comments&quot; (&quot;commenter&quot;, &quot;body&quot;, &quot;article_id&quot;, &quot;created_at&quot;, &quot;updated_at&quot;) VALUES (?, ?, ?, ?, ?)  [[&quot;commenter&quot;, &quot;DHH&quot;], [&quot;body&quot;, &quot;Welcome to Rails!&quot;], [&quot;article_id&quot;, 9], [&quot;created_at&quot;, &quot;2020-01-20 06:19:33.572961&quot;], [&quot;updated_at&quot;, &quot;2020-01-20 06:19:33.572961&quot;]]

=&gt; #&lt;Comment id: 1, commenter: &quot;DHH&quot;, body: &quot;Welcome to Rails!&quot;, article_id: 1, created_at: &quot;2020-01-20 06:19:33&quot;, updated_at: &quot;2020-01-20 06:19:33&quot;&gt;
</code></pre>
<p>If you look at the list of attributes here, you'll see that both <code>commenter</code> and <code>body</code> are set the values that we passed in. We have come to expect this behaviour from Active Record: we give it attributes, it sets them on the object.</p>
<p>What we haven't seen before is what has happened to <code>article_id</code> here. That attribute has been automatically set to the ID of the <code>article</code> object. This is what links that <code>Comment</code> object back to the article.</p>
<p>To find an article's comments, we can do this:</p>
<pre><code>irb(main):003:0&gt; article.comments

Comment Load (0.9ms)  SELECT &quot;comments&quot;.* FROM &quot;comments&quot; WHERE &quot;comments&quot;.&quot;article_id&quot; = ? LIMIT ?  [[&quot;article_id&quot;, 9], [&quot;LIMIT&quot;, 11]]

=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Comment id: 1, commenter: &quot;DHH&quot;, body: &quot;Welcome to Rails!&quot;, article_id: 9, created_at: &quot;2020-01-20 06:19:33&quot;, updated_at: &quot;2020-01-20 06:19:33&quot;&gt;]&gt;
</code></pre>
<p>This <code>comments</code> method on <code>Article</code> objects allows us to work with the comments for any given article.</p>
<p>Similarly, there is an <code>article</code> method on comments. Let's see that in action too:</p>
<pre><code>irb(main):004:0&gt; comment = Comment.first

Comment Load (0.2ms)  SELECT &quot;comments&quot;.* FROM &quot;comments&quot; ORDER BY &quot;comments&quot;.&quot;id&quot; ASC LIMIT ?  [[&quot;LIMIT&quot;, 1]]

=&gt; #&lt;Comment id: 1, commenter: &quot;DHH&quot;, body: &quot;Welcome to Rails!&quot;, article_id: 9, created_at: &quot;2020-01-20 06:19:33&quot;, updated_at: &quot;2020-01-20 06:19:33&quot;&gt;


irb(main):005:0&gt; comment.article

Article Load (0.2ms)  SELECT &quot;articles&quot;.* FROM &quot;articles&quot; WHERE &quot;articles&quot;.&quot;id&quot; = ? LIMIT ?  [[&quot;id&quot;, 9], [&quot;LIMIT&quot;, 1]]

=&gt; #&lt;Article id: 9, title: &quot;dsfsadfasdf&quot;, body: &quot;asdfasdfasdf&quot;, created_at: &quot;2020-01-20 05:22:45&quot;, updated_at: &quot;2020-01-20 05:22:45&quot;&gt;
</code></pre>
<p>This <code>article</code> method is granted to us by the <code>belongs_to</code> method call in the <code>Comment</code> model.</p>
<p>TIP: For more information on Active Record associations, see the <a href="association_basics.html">Active Record Associations</a> guide.</p>
<h3 id="displaying-comments-on-articles">Displaying comments on articles</h3>
<p>Now that we can create comments on articles, it would be really useful to display them somewhere. The most appropriate place to do that would be within the <code>app/views/articles/show.html.erb</code> view. Let's change this view now to display all of the comments:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;h2&gt;</span>Comments<span class="nt">&lt;/h2&gt;</span>

<span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Commenter:<span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Comment:<span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;div&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Back"</span><span class="p">,</span> <span class="s2">"/"</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>
<p>The new code that we've just added to this view will go through all of the article's comments and display the commenter and the comment that was made. When we go to <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a> now, we should see this comment appear:</p>
<p><img src="/images/getting_started/article_with_comments.png" alt="Article with comments" /></p>
<p>Well, that was pretty straight forward! Rails has given us an easy way to list all of the article comments, by way of the <code>has_many</code> method in the <code>Article</code> model.</p>
<h3 id="adding-a-comment">Adding a comment</h3>
<p>Now that we have a way to see all of the current comments, let's add a form that lets us create additional comments. To start with, we're going to put this form in <code>app/views/articles/show.html.erb</code>, just below the comments we just added:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="o">|</span> <span class="cp">%&gt;</span>
  ...
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;h2&gt;</span>Add a comment:<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="p">[</span><span class="vi">@article</span><span class="p">,</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">build</span><span class="p">],</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>This form looks almost like the one in <code>app/views/articles/_form.html.erb</code>, but it has one key difference: the <code>model</code> key has been passed an array, instead of a single model instance. What will happen here is that the form will build what's called a <em>nested route</em> for the comment.</p>
<p>The second element in that array is <code>@article.comments.build</code>. This is a helper method that comes from <code>has_many</code>, that is essentially equivalent to this code:</p>
<pre><code>Comment.new(article_id: @article.id)
</code></pre>
<p>We're going to be building a new comment for the purposes of saving it to the database, eventually.</p>
<p>If we refresh <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a>, we'll see an error message which hints a little bit at this nested route:</p>
<p><img src="/images/getting_started/no_method_error_article_comments_path.png" alt="NoMethodError: article_comments_path" /></p>
<p>The <code>form_with</code> helper here is attempting to use a routing helper called <code>article_comments_path</code> to generate the route for the form. This routing helper doesn't exist yet, and we'll create it in a moment. But first, let's talk about how Rails came to be wanting <code>article_comments_path</code> in the first place.</p>
<p>When we use <code>form_with</code>'s <code>:model</code> option, it combines the <em>class names</em> of the resources we pass it into a routing helper. Back when we were doing <code>form_with model: @article</code>, it would see that the class name of <code>@article</code> was <code>Article</code>. Then, <code>form_with</code> would see if this object had been saved to the database before or not. If the object had not been saved, the form would use <code>articles_path</code> -- the <em>plural</em> version of the routing helper. If the object had been saved, it would use <code>article_path</code> -- the <em>singular</em> version of routing helper.</p>
<p>The same rule applies here. <code>form_with</code>'s underlying code checks to see what <code>@article</code> is first. It's an <code>Article</code> that has been saved to the database, so the first part of the routing helper is <code>article</code>. Then it checks what <code>@article.comments.build</code> is. This object is a <code>Comment</code> that has <em>not</em> been saved to the database, so the helper's next component is <code>comments</code>. Then we're out of array elements, so <code>form_with</code> puts <code>_path</code> on the end. This is how we arrive at <code>article_comments_path</code>.</p>
<p>This is another one of those excellent Rails conventions you've heard about throughout this guide. And it's one of the more &quot;magical&quot; (or &quot;confusing&quot;) aspects of Rails. So don't worry too much if you don't get it first pass.</p>
<p>In order to solve the issue here, we need to add the route that has that routing helper. This time, however, instead of writing seven routes one-at-a-time for comments, just like we did for articles, we're going to use <code>resources</code> again.</p>
<p>Open up the <code>config/routes.rb</code> file again, and edit it as follows:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>

  <span class="n">resources</span> <span class="ss">:articles</span> <span class="k">do</span>
    <span class="n">resources</span> <span class="ss">:comments</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This creates <code>comments</code> as a <em>nested resource</em> within <code>articles</code>. This is another part of capturing the hierarchical relationship that exists between articles and comments. By nesting comments inside of articles like this, this will give us the <code>article_comments_path</code> helper that our form is expecting.</p>
<p>We can verify this by going into a terminal and running:</p>
<pre><code>rails routes -c comments
</code></pre>
<p>And we'll see these routes:</p>
<pre><code>              Prefix Verb   URI Pattern                                       Controller#Action
    article_comments GET    /articles/:article_id/comments(.:format)          comments#index
                     POST   /articles/:article_id/comments(.:format)          comments#create
 new_article_comment GET    /articles/:article_id/comments/new(.:format)      comments#new
edit_article_comment GET    /articles/:article_id/comments/:id/edit(.:format) comments#edit
     article_comment GET    /articles/:article_id/comments/:id(.:format)      comments#show
                     PATCH  /articles/:article_id/comments/:id(.:format)      comments#update
                     PUT    /articles/:article_id/comments/:id(.:format)      comments#update
                     DELETE /articles/:article_id/comments/:id(.:format)      comments#destroy
</code></pre>
<p>The <code>article_comments</code> routing helper is the first line. We can see from this routing helper that it will generate the following path:</p>
<pre><code>/articles/:article_id/comments
</code></pre>
<p>We can see this in action if we go back to <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a> and inspect the page's HTML source again. We'll see the form has that route as its <code>action</code> attribute:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/articles/9/comments"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
</code></pre></div></div>
<p>TIP: For more information on routing, see the <a href="routing.html">Rails Routing</a>
guide.</p>
<p>When we fill out the comment form and click &quot;Create Comment&quot;, we'll now see that the <code>CommentsController</code> is missing:</p>
<p><img src="/images/getting_started/comments_controller_missing.png" alt="Comments Controller missing" /></p>
<h3 id="generating-a-controller">Generating a Controller</h3>
<p>To fix this issue, we will need to generate the <code>CommentsController</code>. Let's do that now:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>bin/rails g controller comments
</code></pre></div></div>
<p>This creates four files and one empty directory:</p>
<table>
<thead>
<tr>
<th>File/Directory</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>app/controllers/comments_controller.rb</td>
<td>The Comments controller</td>
</tr>
<tr>
<td>app/views/comments/</td>
<td>Views of the controller are stored here</td>
</tr>
<tr>
<td>test/controllers/comments_controller_test.rb</td>
<td>The test for the controller</td>
</tr>
<tr>
<td>app/helpers/comments_helper.rb</td>
<td>A view helper file</td>
</tr>
<tr>
<td>app/assets/stylesheets/comments.scss</td>
<td>Cascading style sheet for the controller</td>
</tr>
</tbody>
</table>
<p>If we attempt to submit the form again, we'll see that the <code>create</code> action is missing in this new controller:</p>
<p><img src="/images/getting_started/create_action_comments_controller.png" alt="Create action missing in CommentsController" /></p>
<p>Let's wire up the <code>create</code> in <code>app/controllers/comments_controller.rb</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CommentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="vi">@comment</span> <span class="o">=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">comment_params</span><span class="p">)</span>
    <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">comment_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:comment</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:commenter</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>You'll see a bit more complexity here than you did in the controller for articles. That's a side-effect of the nesting that you've set up. Each request for a comment has to keep track of the article to which the comment is attached, thus the initial call to the <code>find</code> method of the <code>Article</code> model to get the article in question.</p>
<p>But where did we get the idea for <code>article_id</code> from? Well, if we look at our route again with:</p>
<pre><code>rails routes -c comments
</code></pre>
<p>Then we'll see:</p>
<pre><code>              Prefix Verb   URI Pattern                                       Controller#Action
    article_comments GET    /articles/:article_id/comments
</code></pre>
<p>The colon before <code>:article_id</code> indicates that this part of the URL will be available as <code>params[:article_id]</code> in our controller. This is why we're using <code>:article_id</code> here, and not <code>:id</code>.</p>
<p>In addition, the code takes advantage of some of the methods available for an association. We use the <code>create</code> method on <code>@article.comments</code> to create and save the comment. This will automatically link the comment so that it belongs to
that particular article, just as we saw earlier when we created a comment in the Rails console.</p>
<p>Once we have made the new comment, we send the user back to the original article using the <code>article_path(@article)</code> helper. As we have already seen, this calls the <code>show</code> action of the <code>ArticlesController</code> which in turn renders the <code>show.html.erb</code> template.</p>
<p>If we fill out the comment form again, we will see our comment appear.</p>
<p>Now you can add articles and comments to your blog and have them show up in the right places.</p>
<p><img src="/images/getting_started/article_with_two_comments.png" alt="Article with Two Comments" /></p>
<h2 id="refactoring">Refactoring</h2>
<p>Now that we have articles and comments working, take a look at the <code>app/views/articles/show.html.erb</code> template. It is getting long and awkward. We can use partials to clean this view up.</p>
<h3 id="rendering-partial-collections">Rendering Partial Collections</h3>
<p>First, we will make a comment partial to extract showing all the comments for the article. Create the file <code>app/views/comments/_comment.html.erb</code> and put the following into it:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;strong&gt;</span>Commenter:<span class="nt">&lt;/strong&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">commenter</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;strong&gt;</span>Comment:<span class="nt">&lt;/strong&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>
<p>Then you can change <code>app/views/articles/show.html.erb</code> to look like the
following:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;strong&gt;</span>Title:<span class="nt">&lt;/strong&gt;</span>
  <span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;strong&gt;</span>Text:<span class="nt">&lt;/strong&gt;</span>
  <span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">text</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;h2&gt;</span>Comments<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span> <span class="cp">%&gt;</span>

...
</code></pre></div></div>
<p>This is the third style of <code>render</code> that we've seen throughout this guide.</p>
<p>The first was <code>render</code> in an action. That one will render a view by using code like <code>render &quot;new&quot;</code>.</p>
<p>The second was <code>render</code> in a view, we saw it in <code>app/views/articles/new.html.erb</code> and <code>app/views/articles/edit.html.erb</code>. It was written as <code>&lt;%= render &quot;form&quot;, article: @article %&gt;</code>, and that meant to render the partial at <code>app/views/articles/_form.html.erb</code>.</p>
<p>This third one is <code>render</code> with a collection of objects. Rails will inspect these objects and see what class they are, and then it will render a partial that matches the name of the class: <code>comments/_comment.html.erb</code> for this one. If we were to do the same sort of thing for articles, it would render <code>articles/_article.html.erb</code>.</p>
<p>Inside the <code>comments/_comment.html.erb</code> partial, we're able to refer to the local variable <code>comment</code> to refer to each comment, just like we did earlier with the <code>each</code> version of this code.</p>
<h3 id="rendering-a-partial-form">Rendering a Partial Form</h3>
<p>Let's keep tidying up this <code>app/views/articles/show.html.erb</code> view. We can definitely move that comment form out too.</p>
<p>Let us also move that new comment section out to its own partial. To do this, we create a file <code>app/views/comments/_form.html.erb</code> containing:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="p">[</span><span class="n">article</span><span class="p">,</span> <span class="n">article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">build</span><span class="p">],</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Then you make the <code>app/views/articles/show.html.erb</code> look like the following:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...

<span class="nt">&lt;h2&gt;</span>Comments<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;h2&gt;</span>Add a comment:<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"comments/form"</span><span class="p">,</span> <span class="ss">article: </span><span class="vi">@article</span> <span class="cp">%&gt;</span>

...
</code></pre></div></div>
<p>This is the second version of the <code>render</code> method: it will render that partial at <code>app/views/comments/_form.html.erb</code> and pass through the instance variable of <code>@article</code> as a local variable called <code>article</code> to that partial.</p>
<h2 id="deleting-comments">Deleting Comments</h2>
<p>Another important feature of a blog is being able to delete spam comments. To do this, we need to implement a link of some sort in the view and a <code>destroy</code>
action in the <code>CommentsController</code>.</p>
<p>So first, let's add the delete link in the
<code>app/views/comments/_comment.html.erb</code> partial:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;strong&gt;</span>Commenter:<span class="nt">&lt;/strong&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">commenter</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;strong&gt;</span>Comment:<span class="nt">&lt;/strong&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;p&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Destroy Comment'</span><span class="p">,</span> <span class="p">[</span><span class="n">comment</span><span class="p">.</span><span class="nf">article</span><span class="p">,</span> <span class="n">comment</span><span class="p">],</span>
               <span class="ss">method: :delete</span><span class="p">,</span>
               <span class="ss">data: </span><span class="p">{</span> <span class="ss">confirm: </span><span class="s1">'Are you sure?'</span> <span class="p">}</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>
<p>The second argument to <code>link_to</code> is new to us. Well, sort of. We've seen it just before in the form for comments, but that was with <code>form_with</code>, and this is with <code>link_to</code>. This syntax for <code>link_to</code> works exactly the same as it did back in <code>form_with</code>; it works to build a routing helper. The <code>link_to</code> helper checks to see what kind of object <code>comment.article</code> is. It's an <code>Article</code> object and that object exists in the database, so the first part of that helper is <code>article</code>. Then the second object is a <code>Comment</code> object, and so the second part is <code>comment</code>. This means that the routing helper used will be <code>article_comment_path</code>.</p>
<p>We could write this code out in a longer fashion if we wished:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Destroy Comment'</span><span class="p">,</span> <span class="n">article_comment_path</span><span class="p">(</span><span class="n">comment</span><span class="p">.</span><span class="nf">article</span><span class="p">,</span> <span class="n">comment</span><span class="p">),</span>
               <span class="ss">method: :delete</span><span class="p">,</span>
               <span class="ss">data: </span><span class="p">{</span> <span class="ss">confirm: </span><span class="s1">'Are you sure?'</span> <span class="p">}</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>
<p>But Rails' routing conventions save us some time and keystrokes by allowing us to write <code>[comment.article, comment]</code> instead.</p>
<p>Clicking this new &quot;Destroy Comment&quot; link will fire off a <code>DELETE /articles/:article_id/comments/:id</code> to our <code>CommentsController</code>, which can then use this to find the comment we want to delete. Right now, the <code>destroy</code> action that matches that route is missing, and so we will see this if we attempt to delete a comment:</p>
<p><img src="/images/getting_started/comments_destroy_not_found.png" alt="Destroy not found" /></p>
<p>So let's add a <code>destroy</code> action
to our controller (<code>app/controllers/comments_controller.rb</code>):</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CommentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="vi">@comment</span> <span class="o">=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">comment_params</span><span class="p">)</span>
    <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="vi">@comment</span> <span class="o">=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@comment</span><span class="p">.</span><span class="nf">destroy</span>
    <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">comment_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:comment</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:commenter</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>The <code>destroy</code> action will find the article we are looking at, locate the comment within the <code>@article.comments</code> collection, and then remove it from the database and send us back to the show action for the article.</p>
<p>If we attempt to delete a comment again, this time it will disppaear.</p>
<h3 id="deleting-associated-objects">Deleting Associated Objects</h3>
<p>If you delete an article, its associated comments will also need to be deleted, otherwise we would see an <code>ActiveRecord::InvalidForeignKey</code> error happen:</p>
<p><img src="/images/getting_started/foreign_key_constraint.png" alt="Foreign key constraint" /></p>
<p>This error happens because the database will not allow <code>comments</code> to be without an associated article, due to this line in the <code>db/migrate/[timestamp]_create_comments.rb</code> migration:</p>
<pre><code>t.references :article, null: false, foreign_key: true
</code></pre>
<p>The <code>foreign_key</code> option on this line, when set to <code>true</code>, says  that the <code>article_id</code> column within the <code>comments</code> table must have a matching <code>id</code> value in the <code>articles</code> table. If a situation arises where this <em>might</em> happen, the database raises a <em>foreign key constraint</em> error, which is what we're seeing here.</p>
<p>To avoid this issue, we need to give our <code>Article</code>'s <code>comments</code> association one extra option, called <code>dependent</code>. Let's change <code>app/models/article.rb</code> to this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:comments</span><span class="p">,</span> <span class="ss">dependent: :destroy</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span>
                    <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">5</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Now when an article is deleted, all of its comments will be deleted too, and we will avoid having a foreign key constraint error happen.</p>
<h2 id="security">Security</h2>
<h3 id="basic-authentication">Basic Authentication</h3>
<p>If you were to publish your blog online, anyone would be able to add, edit and delete articles or delete comments.</p>
<p>Rails provides a very simple HTTP authentication system that will work nicely in this situation.</p>
<p>In the <code>ArticlesController</code> we need to have a way to block access to the various actions if the person is not authenticated. Here we can use the Rails <code>http_basic_authenticate_with</code> method, which allows access to the requested action if that method allows it.</p>
<p>To use the authentication system, we specify it at the top of our <code>ArticlesController</code> in <code>app/controllers/articles_controller.rb</code>. In our case, we want the user to be authenticated on every action except <code>index</code> and <code>show</code>,
so we write that:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="n">http_basic_authenticate_with</span> <span class="ss">name: </span><span class="s2">"dhh"</span><span class="p">,</span> <span class="ss">password: </span><span class="s2">"secret"</span><span class="p">,</span> <span class="ss">except: </span><span class="p">[</span><span class="ss">:index</span><span class="p">,</span> <span class="ss">:show</span><span class="p">]</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="c1"># snippet for brevity</span>
</code></pre></div></div>
<p>We also want to allow only authenticated users to delete comments, so in the <code>CommentsController</code> (<code>app/controllers/comments_controller.rb</code>) we write:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CommentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="n">http_basic_authenticate_with</span> <span class="ss">name: </span><span class="s2">"dhh"</span><span class="p">,</span> <span class="ss">password: </span><span class="s2">"secret"</span><span class="p">,</span> <span class="ss">only: :destroy</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="c1"># snippet for brevity</span>
</code></pre></div></div>
<p>Now if you try to create a new article, you will be greeted with a basic HTTP Authentication challenge:</p>
<p><img src="images/getting_started/challenge.png" alt="Basic HTTP Authentication Challenge" /></p>
<p>Other authentication methods are available for Rails applications. Two popular
authentication add-ons for Rails are the
<a href="https://github.com/plataformatec/devise">Devise</a> rails engine and
the <a href="https://github.com/binarylogic/authlogic">Authlogic</a> gem,
along with a number of others.</p>
<h3 id="other-security-considerations">Other Security Considerations</h3>
<p>Security, especially in web applications, is a broad and detailed area. Security
in your Rails application is covered in more depth in
the <a href="security.html">Ruby on Rails Security Guide</a>.</p>
<h2 id="whats-next">What's Next?</h2>
<p>Now that you've seen your first Rails application, you should feel free to
update it and experiment on your own.</p>
<p>Remember, you don't have to do everything without help. As you need assistance
getting up and running with Rails, feel free to consult these support
resources:</p>
<ul>
<li>The <a href="index.html">Ruby on Rails Guides</a></li>
<li>The <a href="https://groups.google.com/group/rubyonrails-talk">Ruby on Rails mailing list</a></li>
<li>The <a href="irc://irc.freenode.net/#rubyonrails">#rubyonrails</a> channel on irc.freenode.net</li>
</ul>
<h2 id="configuration-gotchas">Configuration Gotchas</h2>
<p>The easiest way to work with Rails is to store all external data as UTF-8. If
you don't, Ruby libraries and Rails will often be able to convert your native
data into UTF-8, but this doesn't always work reliably, so you're better off
ensuring that all external data is UTF-8.</p>
<p>If you have made a mistake in this area, the most common symptom is a black
diamond with a question mark inside appearing in the browser. Another common
symptom is characters like &quot;Ã¼&quot; appearing instead of &quot;ü&quot;. Rails takes a number
of internal steps to mitigate common causes of these problems that can be
automatically detected and corrected. However, if you have external data that is
not stored as UTF-8, it can occasionally result in these kinds of issues that
cannot be automatically detected by Rails and corrected.</p>
<p>Two very common sources of data that are not UTF-8:</p>
<ul>
<li>Your text editor: Most text editors (such as TextMate), default to saving
files as UTF-8. If your text editor does not, this can result in special
characters that you enter in your templates (such as é) to appear as a diamond
with a question mark inside in the browser. This also applies to your i18n
translation files. Most editors that do not already default to UTF-8 (such as
some versions of Dreamweaver) offer a way to change the default to UTF-8. Do
so.</li>
<li>Your database: Rails defaults to converting data from your database into UTF-8
at the boundary. However, if your database is not using UTF-8 internally, it
may not be able to store all characters that your users enter. For instance,
if your database is using Latin-1 internally, and your user enters a Russian,
Hebrew, or Japanese character, the data will be lost forever once it enters
the database. If possible, use UTF-8 as the internal storage of your database.</li>
</ul>
]]></content>
 </entry>
 
 <entry>
   <title>They fixed the keyboard</title>
   <link href="http://ryanbigg.com/2019/11/they-fixed-the-keyboard"/>
   <updated>2019-11-28T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2019/11/they-fixed-the-keyboard</id>
   <content type="html"><![CDATA[<p>Consider this post a sequel to my <a href='https://ryanbigg.com/2019/08/can-apple-please-design-a-laptop-that-has-a-functional-keyboard-for-the-love-of-all-that-is-precious'>
The 2018 MacBook Pro Keyboard Drives Me Crazy
(Aug '19)</a> post from earlier in the year.</p>
<p>In that post, I listed the following complaints about the 2018 MacBook Pro keyboard:</p>
<blockquote>
<ul>
<li>duplicated &quot;o's&quot; that I've had to go back and fix, or missing ones -- guess how fun it is to write <a href="https://leanpub.com/elixir-toyrobot">a book about a Toy Robot</a> with this particular problem</li>
<li>double spaces -- or no spaces</li>
<li>a Command key that registers 9 out of every 10 times</li>
<li>words like &quot;times&quot; that inexplicably get spelled like &quot;timies&quot;, or &quot;about&quot; that gets spelled like &quot;abouot&quot;</li>
</ul>
</blockquote>
<p>I've now been using a brand-new 2019 MacBook Pro for about 5 hours and I've been using the keyboard <em>extensively</em> during the setup of this machine.</p>
<p>Those complaints that I had above? They don't exist on this keyboard. There has been no duplicated letters, spaces, dodgy Command keys, or mispelled words that were not my clumsiness.</p>
<p>I've <em>felt</em> more productive on this keyboard since I got it. I'm guessing because I didn't have to go back and fix up so many mistakes.</p>
<p>But I wanted to get quantifiable data on this, and given that I <em>type for a living</em> what better way to do this than to run a few tests.</p>
<p>So I went over to <a href="https://typeracer.com">TypeRacer</a> on my <em>old</em> MacBook Pro and scored in the 95-105WPM range over 5 tests.</p>
<p>Then I went to TypeRacer on my <em>new</em> MacBook Pro and did 5 more tests.</p>
<p>My range there was 105-120WPM. So I'm typing at 15-20WPM faster on this keyboard than I was on the old one.</p>
<p>This keyboard <em>is</em> better for me than the old one was. It seems that Apple has fixed the keyboard issues.</p>
<p>Bravo.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Rough Edges</title>
   <link href="http://ryanbigg.com/2019/11/rough-edges"/>
   <updated>2019-11-18T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2019/11/rough-edges</id>
   <content type="html"><![CDATA[<p>Our job as software developers is to make functional software.</p>
<p>A user should be able to use our software to accomplish tasks that might otherwise take a long time if they were doing it without computers. This has a wide-and-varied range, of course. But the main thing is that we need to make software <em>that works</em>.</p>
<p>If we didn't do that, we would find ourselves out of a job very quickly.</p>
<p>However, functional software shouldn't just be the only thing we strive for.</p>
<p>We should also strive to eliminiate rough edges in our software. We can do this through a process of quality assurance testing, introspection and by plain old taking feedback from our users <em>and acting on it</em>.</p>
<p>We need to listen to real user feedback, discover what the rough edges are in our software and work to eliminate the roughness.</p>
<p>For users of our software this can look like:</p>
<ul>
<li>A page that takes 10 seconds to load <em>is a rough edge</em>. Could we make it load in 5 seconds, or under a second? Why are our users waiting so long?</li>
<li>A process that takes a user several clicks through tricky menus <em>is a rough edge</em>. Can we make a shortcut for common user flows instead?</li>
<li>A part of our application that works on browsers, but not on mobile <em>is a rough edge</em>. Can we make that page responsive and useable on devices smaller than a 30&quot; desktop or 13&quot; laptop?</li>
<li>A feature that works in one part of our application, but not in another <em>is a rough edge</em>. A feature should work in predictable ways, everywhere. For instance: <code>/collapse</code> works in the main Slack window, but not in threads. Why not?</li>
</ul>
<p>Rough edges in software are human-software interaction problems. They should be treated at the same level as a bug or as an exception. A rough edge <em>is an exceptional thing</em>.</p>
<p>We must work to make functional, smooth software that is pleasing to use. Software that is as free as rough edges as we can make it.</p>
]]></content>
 </entry>
 
 <entry>
   <title>RubyConf Indonesia Keynote - Transcript</title>
   <link href="http://ryanbigg.com/2019/09/hiring-juniors-2019"/>
   <updated>2019-09-19T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2019/09/hiring-juniors-2019</id>
   <content type="html"><![CDATA[<p><em>This post (and talk) is an updated version of my <a href="/2018/03/hiring-juniors">2018 &quot;Hiring Juniors&quot; talk at RubyConf AU</a>. This version of the talk was given at RubyConf Indonesia 2019 as the closing keynote. You can view <a href="https://speakerdeck.com/radar/hiring-juniors-rubyconf-indonesia-2019-closing-keynote">the slides for this talk on Speakerdeck</a></em></p>
<h2 id="intro">Intro</h2>
<p>Who's hiring right now?</p>
<p>And who's finding it easy to hire developers at the moment?</p>
<p>If you said it was easy to hire developers at the moment, you're either very lucky or lying.</p>
<p>I work at a company back in Australia called Culture Amp and for the three years I've worked there I've never known hiring developers to be an easy task. There just isn't anyone out there to hire! Everyone's already working somewhere else. I hear this story from everyone I speak to.</p>
<p>It feels a bit like this.</p>
<p>But the industry is booming! Us developer folk are in a golden era of profitability and growth. To keep pace with that growth, we keep trying to hire more developers, but we have a really hard time with that.</p>
<p>We need to try something different. But what?</p>
<p>Hiring more mids and seniors doesn't work, and so we need to look elsewhere.</p>
<p>The solution to this problem is to hire junior developers. That's a scary concept, isn't it? &quot;Junior developer&quot; evokes images of frustration, lost productivity and accidentally dropped production databases. But it doesn't need to be scary. In fact, it can be the opposite.</p>
<p>I run a program at Culture Amp called the Junior Engineering Program where we have successfully hired and trained 18 junior developers to be the next generation of amazing talent at our company. And I'm so proud of them all.</p>
<p>You can do it too and I'll tell you how.</p>
<p>&quot;But Ryan, we only hire senior Ruby developers!&quot; -- ahh the classic
ActiveMantra in the Rails community: &quot;Hiring seniors. Hiring seniors. Hiring seniors.&quot;. Maybe if we say it enough and click our heels together three times our dreams might come true.</p>
<p>But how's that working out for you at the moment? Probably not so great. It's well known that there are only three hard problems in computer science: cache invalidation, naming things and hiring more seniors.</p>
<p>We have drained the talent pool dry. And yet our obsession and our Active Mantra continues. We only want to hire seniors. But why do we have this obsession?</p>
<p>Well, we want a senior developer -- but we might be happy to take a mid too -- because they have the skills to instantly dive straight into our application with little-to-no guidance and they can start shipping code. That old expression: &quot;they can hit the ground running&quot;.</p>
<p>This is because our code is so brilliantly well-structured and organized according to the Rails best practices. Nobody will have to upskill on any single parts of the codebase at all because we follow the Laws of Sandi and Commandments of Avdi to the letter.</p>
<p>There is no legacy code with their legacy decisions that meta-programs the constants from Java, written in a hurry because we needed to ship that thing <em>fast</em>.</p>
<p>You may think that you need to hire only these best-of-the-best badasses because your application is a large unmaintable collection of event-sourced microservices written in obscure languages surrounding a ginormous monolith and only the badasses can understand it. That you need seniors to navigate the spaghetti that is your legacy code. Maybe you use technologies that only <em>true</em> geniuses can understand, like Node or Go. Or Webpack.</p>
<p>That may indeed be the case. After all, if our code was simple, elegant and only written in a single Ruby monolith, would as many of us still be employed?</p>
<p>Companies spend thousands of dollars hunting the elusive 10x Developer Rockstar Unicorns (note: term used ironically), but the Unicorns are no longer out grazing in the sunny meadows, readily available for capture.  They're already working somewhere else and the conditions of where they work are extremely competitive. The stables in which these Unicorns are now kept are filled with energy drinks, ping pong tables, lucrative salary bonuses and other extremely good perks. You will have a hard time luring these Unicorns away.</p>
<p>We're out of freely available Rockstar Unicorns because they're already employed elsewhere. Attempting to hire them is an exercise in futility. And so it's time that we started to grow our own. It's time that we started to hire and train our own 10x Developer Rockstar Unicorns.</p>
<hr />
<p>But where do we find these developers? Well, to start with we need to lower our bar for engineering talent and not be so caught up on hiring the best-of-the-best <em>now</em>, but instead we should be investing more in people's future potential. We should be hiring junior developers and training them up.</p>
<p>A very smart person once said this: <confucious tweet></p>
<p>Your next Rockstar Unicorn isn't within today's top 5-10% of all
developers. The top 5-10% already works elsewhere. Your Next Rockstar Unicorn is hanging out with the rest of their peers in the other part of this totally scientific picture that I made up. These people need some mentoring in order to grow into the next generation of brilliant people.</p>
<p>They're not brilliant <em>today</em>, but if you give them time and care, they will become brilliant.</p>
<p>It's imperative that we do this because there isn't an endless supply of brilliant people -- sorry, I mean Developer Rockstar Unicorns -- that we can just keep harvesting today. This talent pool of amazingly gifted developers, as we're painfully finding out, is not limitless.</p>
<p>The best time to train a senior developer was 10 years ago, but the second best time is now.</p>
<p>We must lower the bar for our hiring, and hire outside of the top 5-10%. We must hire juniors. We must then train these juniors up to be our next generation of brilliant minds.</p>
<p>It is very, very difficult to hire a senior developer today in Rubyland. And so we must grow our own senior developers. This is a process that will take time.</p>
<p>There's no packet mix where you &quot;just add water&quot; and blammo you've got a senior developer.</p>
<p>I'm talking about <em>years</em> of hard work. But these are <em>vital</em> years
of hard work to ensure that our companies and this community continues to thrive and grow. This is necessary work to ensure that we have well-trained developers working at our companies. We will know they're well-trained because we did the training ourselves.</p>
<p>We need to be <em>developers developing developers</em>.</p>
<p>At Culture Amp, we hired and trained 18 juniors. We are not frustrated by them. Our productivity is the highest it has ever been. And right before I got on stage I checked: our production database is still up.</p>
<p>These are 18 developers that we did not have two-and-a-half years ago. But now we do. They're about 25% of our engineering staff right now. We invested time and energy into training these people up and now we have 18 excellent developers. And that's on top of the other developers that we've hired during that time too! We didn't stop hiring mids and seniors. We kept hiring them too! It's just that we supplemented them by hiring and training some juniors too.</p>
<p>I want to spend the next 20 minutes giving you some reasons why you would want to do this yourself, and some tips about how you can go about doing it too. I want you to leave here today as enthusiastic about hiring juniors as I am.</p>
<h2 id="why">Why?</h2>
<p>So let's start off with the why. Why would you want to hire juniors? I told you already: we can hire juniors to boost the number of developers at our companies. But we're going to need a better reason.</p>
<p>I have one major killer reason: juniors make your teams <em>better</em>. You want your teams to be better, right?</p>
<p>But wait: what do I mean by &quot;better&quot;? Better is a pretty subjective term! So let's be more exact. I mean that your team will be more productive as a result of having at least one junior on it. I have seen this work out at Culture Amp many times over, and I've seen it happen at other companies too. Teams that have juniors on them are better than teams that do not.</p>
<p>Why?</p>
<p>When you have a junior, you have to break down explanations into simpler forms. This helps the junior understand things about your business, code and practices. It has the side-effect of easing the understanding of other members of the team too because they get into the habit of explaining things in a clearer way as well. There's no better way for you to test your own knowledge of something than having to explain that knowledge to someone else.</p>
<p>Along that point, when you have a junior in your team communication becomes explicit. I reckon some of you might have experienced the opposite of this. Here's the situation I'm thinking of: You're on a senior-heavy team and you <em>want</em> to ask a question, but you don't want to be seen as not knowing as much as the rest of the people around you. You have to figure it out yourself. It's <em>implicit</em>. Communication is <em>implicit</em>. All in your heads.</p>
<p>Now what happens if you put a junior on that team? They're going to need some explanations. Their intuition isn't as well-crafted as yours is. So communication comes out into the open, which makes it <em>explicit</em>. This then creates a culture of asking questions and other team members feel safe to do that as well. We talk about things in the open more often and contribute to a shared pool of understanding. This improves the understanding of the entire team and therefore makes the team more effective.</p>
<p>My last point around &quot;why?&quot; is that <em>diversity out-performs sameness</em>. There has been many studies done on what makes a good team, and universally having a team that is not <em>all the same as each other</em> leads to the greatest benefit. I mean diversity in all aspects: gender, race, age, and so on. But I'd also like to give a special mention to <em>skill</em> diversity too. Having people who aren't all <em>experts</em> on your team makes the team better.</p>
<p>So to answer the why question: not only will we get <em>more</em> developers if we hire juniors, but our teams will be better for it. We want more developers and better teams, right? The way we can get both is to hire juniors.</p>
<p>So now that I've answered why, let's talk about the practicalities of doing this. The rest of this talk is all tips on what you can do to make hiring juniors into your companies really successful.</p>
<h2 id="part-1-before">Part 1: Before</h2>
<p>The first thing we need is some support structures in place.</p>
<p>First, we need the <em>company</em> to support the initiative of hiring junior developers. They need to recognise that taking on a junior will require some upfront investment of time and energy to train them up, but it <em>will</em> pay off in the long term. Juniors who are well looked after turn into mids soon enough.</p>
<p>Second, we need the <em>team</em> or <em>teams</em> that take on the juniors to support this initiative as well. These teams are going to be the people doing the majority of the training and development, and it's their job to make the junior feel at home. A good team environment will help the junior developer grow in the best way possible.</p>
<p>Lastly, we need a <em>champion</em> who supports the juniors. Someone they can always turn to for support, who exists outside of their team structure. At Culture Amp, I'm this person and my role is mostly 1-on-1 developer mentoring and (sometimes) emotional support.</p>
<p>Once you've got those support structures in place, organise together to work out a plan for the people that you're hiring. What are they going to do on their first day? How can you help ease them into what might be their <em>first ever</em> development job? What do you need to teach them for them to be productive at your company?</p>
<p>Having a plan for how to deal with the initial onboarding of a junior on your team can take a lot of that early-stage pressure out of the process. I suggest you spend a bit of time coming up with one. Every company is different and you'll all come up with different ways that suit your own companies.</p>
<h2 id="part-2-recruit">Part 2: Recruit</h2>
<p>With your plan in hand, it's time to start recruiting a junior developer.</p>
<p>Where on earth do you find one of these people? Fortunately for all us, they're everywhere. They come out of universities and coding schools by the hundreds or even thousands. On top of that, there are a bunch of people who teach themselves programming. These people are usually career-changers who have worked somewhere previously, and are now looking to get into development. All of these are great candidate pools to source your junior developers from.</p>
<p>To find juniors, reach out to universities and coding schools and ask them when they're next graduating a cohort, and ask if you can come in to speak to the cohort. Building those connections will help you source some amazing developers.</p>
<p>Now that you know where to find them, you'll want to know how to find the <em>best</em> ones. For that purpose, I want to talk about how you should interview your junior developers.</p>
<h2 id="interviewing">Interviewing</h2>
<p>I think a good interview process takes the shape of two stages: a take home coding test, and a second stage comprising of two interviews: a social interview and a tech interview.</p>
<p>Here's how we've done it at Culture Amp. We sent anyone who applied a coding challenge written in Ruby, involving some basic Ruby tests for things like Arrays and Hashes. It also contained a test suite they had to extend and pass. They had two weeks to complete it.</p>
<p>When we received the coding test back from them, we scored it according to a bunch of yes or questions like &quot;did they use an <code>attr_reader</code> here?&quot;. The people with the highest grade then got through to the next stage, our social and tech interview stage.</p>
<p>In this second stage, juniors bring their coding tests in, and we interview them about their knowledge of tech during the tech interview. At the half-way point of the interview, we switch to a pairing mode where the juniors expand on their coding test. All of this is done with with two Culture Amp employees in the room -- usually a mixed gender pair. We interview in pairs to eliminate bias that may arise during a 1-on-1 interview.</p>
<p>The junior drives the development of the code and can ask us any questions they wish -- even down to what Ruby method they could use to solve a problem. We give them some direction and observe them go through this exercise.</p>
<p>This tech interview is designed to assess how well the juniors can work with other people -- not to gauge how well they can code. This is because a junior developer will spend most of their time working with other people, listening to them and collaborating, rather than doing development themselves. It also helps us gauge how open they are to asking questions, or knowing when they're stuck. These are important things to check because they'll be doing a lot of that kind of thing when they come to work with us.</p>
<p>The social interview is the 2nd interview stage, and in this one we assess their social abilities by asking them a bunch of open ended questions like &quot;What kind of projects have you worked on with other people?&quot;. We value this interview slightly higher than the coding test.</p>
<p>What we look for in this interview is how friendly or outgoing the junior developer is, as well as any particular red flags. If someone champions their own efforts while diminishing the work of others, that's a huge red flag. If they prefer to work alone instead of in a group, that's another.</p>
<p>That's a quick run-through of how we've ran our interview process, and from the almost 250 interviews we've done, I can give you three big tips for when you're interviewing juniors.</p>
<h3 id="tip-1-treat-them-gently">Tip #1: Treat them gently</h3>
<p>The first is to treat them gently. For some people you interview, this will be one of their very first interviews. If you're both lucky, it'll be their very first. You might be working with this person in the near future, so treat the interview like a <em>collaboration</em> rather than an <em>interrogation</em>. Treat them gently.</p>
<p>Here's a quick image showing the regular job application process for junior developers these days. Juniors try to make the leap from <em>learning how</em> to program to <em>getting paid</em> to program and then they get rejected a bunch of times. This can feel a lot like leaping across a chasm and smashing into a cliff face repeatedly, hence the illustration.</p>
<p>We do not need to interview these juniors harshly or impersonally. We <em>can</em> treat them gently.</p>
<h3 id="tip-2-social-over-technical">Tip #2: Social over Technical</h3>
<p>My second tip is to value the <em>social</em> interview over the technical interview.</p>
<p>I would explain why in my own words, but Brian Hogan has done it on Twitter much better than I could:</p>
<p><a href="https://twitter.com/bphogan/status/1173301278040035335?s=20">https://twitter.com/bphogan/status/1173301278040035335?s=20</a></p>
<p>It's true. I can teach an easy-going, well-humoured person programming easily. They're fun to work with! But if you're a grumpy, self-centered narcissist, we're going to have a bad time.</p>
<p>All of the juniors that we have hired have scored good-to-excellent on the tech interview, but they've all scored <em>excellent</em> on the social interview and we've seen it work out really well as a result.</p>
<p>So my tip here is to value social skills over tech skills. You can teach tech easily. You can't teach nice as easily.</p>
<h3 id="tip-3-give-them-feedback">Tip #3: Give them feedback</h3>
<p>My third and final interviewing tip is to give all your junior candidates feedback on the process. Yup, that means <em>everyone</em>.</p>
<p>That coding test that we gave to our junior developers went out to about 70 people. 55 of those people sent it back. In response, we wrote 25,000 words of feedback, which is about 500 words per person. That may seem like a lot, but it's really about a page to page and a half per person, depending on your font size.</p>
<p>We give out feedback to all our candidates because we want them to have a good impression of our company, <em>even if we reject them</em>. We want them to be able to look at the coding test and see what they could improve, and to have some resources they could follow up on to get better.</p>
<p>Being rejected is <em>hard</em> and a flat &quot;no&quot; with nothing further to follow up on is something the juniors are going to get <em>a lot</em> of. Remember the cliff face? So we should all be more gentle with them by giving them this feedback.</p>
<p>This feedback has paid off for us at Culture Amp. During the most recent Culture Amp junior hiring round, we had two candidates apply who also applied in the first round two years ago, but didn't get through. By studying hard for a year, they were able to skill themselves up and they both made it in this time around.</p>
<p>So my third and final interviewing tip is to give feedback to juniors because it gives them a direction to go in, even if you reject them. And it has a good chance of paying off in the future.</p>
<h2 id="a-new-junior-appeared">A new junior appeared</h2>
<p>Ok, so now you've gone through the hiring process, sent out all your feedback and decided to hire a junior. What do you do now?</p>
<h2 id="part-3-belonging">Part 3: Belonging</h2>
<p>You make them feel like they belong.</p>
<p>If you thought being a junior during the <em>hiring</em> process was hard enough, try working as one! It's terrifying.</p>
<p>During the interview, juniors can feel like they need to prove themselves for, at most, 2 hours.</p>
<p>But then when they get down to working, they can feel that need to prove themselves for <em>days</em> or <em>weeks</em> at a time. That's exhausting!</p>
<p>If you remember <em>anything</em> from this talk let it be this next slide.</p>
<p>How do you treat a junior developer? Like an adorable puppy, and not like a spiky cactus.</p>
<p>With the cactus, you can leave it for <em>months</em> in the corner without giving it attention and it will still thrive. Somehow. Science can't explain it.</p>
<p>But a puppy! A puppy needs attention, love, and care. And to be trained!</p>
<p>Juniors need to feel like they <em>belong</em> in their companies, their teams and their jobs. With those support structures I mentioned before, the company, the team and the champions can all help with that sense of belonging.</p>
<p>I have some ground rules that can majorly help with that feeling of belonging.</p>
<p>One ground rule that I like to set at the very beginning is this one: it's always okay to ask questions. Whenever you have a question it's okay to ask it. Asking questions is how we <em>learn</em>. Asking questions means that you want to know something. It means <em>you're thinking</em>. So ask away!</p>
<p>Another ground rule that I like to set is that juniors should pair with a more senior developer most of the time. Being introduced to a big scary company, codebase and team that you've never seen before is terrifying and exhausting. You need someone who can be the Gandalf senior to the junior's Hobbit. You need someone who can help the junior integrate with your teams.</p>
<p>My third ground rule is one that can sometimes be the hardest one to follow. Smile more! When someone asks for your help, dive in with eagerness and joy. Someone wants <em>you</em> to help <em>them</em>! Don't get frustrated with them!</p>
<p>And this also applies to text as well, where emotional meaning goes missing. A simple phrase like &quot;why are you doing this?&quot; can be interpreted majorly differently depending on the mood the recipient is in. &quot;Smile more&quot; with your juniors over text too.</p>
<p>If you feel like they're still having a rough time, go around to your juniors and speak to them in person -- or over a quick video call if they're remote. I call this &quot;escalating in fidelity&quot; and it's a technique I employ when I think I'm being misinterpreted.</p>
<h3 id="project-aristotle">Project Aristotle</h3>
<p>I'd like to back up all this belonging chatter with one final thing. A company you might've heard of, one not far from here, called Google... ran this study called Project Aristotle. They wanted to know what made teams the most productive. They tried a bunch of things. Small teams. Big teams. Senior teams. Junior teams. Teams in the same room, or teams working remotely. None of it made as big an impact on team productivity as these five things.</p>
<p>These five things are the pillars of making teams at Google the most productive. And this does not just apply at Google. It's universal. And I can think of nowhere else they apply more than helping juniors feel like they belong in our teams. The first one is the biggest: team members feel safe to take risks and be vulnerable in front of each other.</p>
<p>This diagram might look familiar to you. If you flip it up the other way and rename the layers, it is Maslow's Hierarchy of Needs -- Maslow's take on how humans partake in behavioural motivation -- how we get motivated to do the things we do. You'll notice here that the bottom two layers on the right are remarkably close to the top layer in Google's document.</p>
<p>When we hire juniors, we need to keep these five things in mind. We must put a strong focus on psychological safety so that they feel like they belong in our teams and that they can take risks as small as asking a &quot;dumb&quot; question or as large as merging a major pull request. And we must also provide Dependability, Structure &amp; Clarity, Meaning and Impact too. But we can do none of those if the junior does not first feel safe -- feel like they <em>belong</em> in our teams.</p>
<h2 id="summary">Summary</h2>
<p>And so to summarise:</p>
<p>Hiring experienced developers is hard to do at the moment. To work around this current lack of talent, we must focus on hiring and training junior developers to be the next generation of experienced developers that we need.</p>
<p>We have done this at Culture Amp successfully. Plenty of other companies are also training developers. We need more companies doing it too. It is important work to ensure that we can grow our companies and this wonderful community of ours. Hiring juniors is a worthwhile investment for your company and for the future of this community. It's in our collective best interests to hire juniors.</p>
<p>Putting <em>at least one</em> junior developer into a team makes that team <em>better</em>. Communication is explicit. The team works more effectively as a result.</p>
<p>When we get these juniors, we must remember the puppy-not-cactus rule. We have to make them feel like they <em>belong</em> in our teams -- because they have as much right to be there as everyone else does. When we do this, we'll supercharge the development of this junior and before we know it we'll have a set of <em>amazing</em> developers who are helping our teams be the best version of themselves.</p>
<p>We can do this. Hiring juniors is the right thing to do.</p>
<p>We can be developers developing developers.</p>
]]></content>
 </entry>
 
 <entry>
   <title>The 2018 MacBook Pro Keyboard Drives Me Crazy</title>
   <link href="http://ryanbigg.com/2019/08/can-apple-please-design-a-laptop-that-has-a-functional-keyboard-for-the-love-of-all-that-is-precious"/>
   <updated>2019-08-29T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2019/08/can-apple-please-design-a-laptop-that-has-a-functional-keyboard-for-the-love-of-all-that-is-precious</id>
   <content type="html"><![CDATA[<p>I recently upgraded from a 2015 MacBook Pro to a 2018 MacBook Pro. And by
&quot;recently&quot;, I mean back at the start of June. I wanted a new MacBook Pro because of the faster performance that a new computer would give me. Work (Culture Amp) was also upgrading their fleet of Macs and I was one of the lucky people to get a new one.</p>
<p>So I've been using this computer as a work computer for almost 3 months now and, my god, the keyboard <em>drives me mental</em>. Even writing this blog post now on the train and there's:</p>
<ul>
<li>duplicated &quot;o's&quot; that I've had to go back and fix, or missing ones -- guess how fun it is to write <a href="https://leanpub.com/elixir-toyrobot">a book about a Toy Robot</a> with this particular problem</li>
<li>double spaces -- or no spaces</li>
<li>a Command key that registers 9 out of every 10 times</li>
<li>words like &quot;times&quot; that inexplicably get spelled like &quot;timies&quot;, or &quot;about&quot; that gets spelled like &quot;abouot&quot;</li>
</ul>
<p>Apple is <em>all about</em> the thinness of their laptops. I do not particularly care about the thinness of this device. For the most part, it sits on one of two desks that I use or it sits on my lap on the train. <em>Maybe</em> I use it on the couch from time-to-time. I do not care about the thinness of this device <em>while I am using it</em>. I only care about it when I store it away, in my backpack.</p>
<p>This keyboard has a key travel distance that, I am sure, is measured in microns or perhaps nanometers. It feels like I am typing on a concrete slab. Key presses inexplicably duplicate. Or don't register at all. All for <em>thinness</em>.</p>
<p>This keyboard is a catastrophic engineering failure, designed by a company that should know better. A company with more money in the bank than several countries <em>combined</em>. This keyboard would be, by far, the part of the MacBook Pro that is used the <em>most</em> by everybody who owns one, and it is so poorly engineered for the pursuit of <em>thinness</em>.</p>
<p>Apple <em>must</em> fix this problem in their upcoming MacBook Pro releases. I want a <em>fat</em> MacBook pro keyboard, one that has a travel distance of the older wireless keyboards and doesn't have that &quot;concrete slab&quot; feel. I want to be able to type <em>an entire paragraph</em> without having to go back and correct things because the keyboard failed.</p>
<p>I am tired of having to correct what I type because of this keyboard's faults. I am tired of having to use external keyboards to actually <em>enjoy</em> using this computer. I love the Mac and it's software and how things <em>just</em> work. But I will leave if this keyboard farce continues.</p>
<p>If Apple releases their new Macs with an <em>identical</em> keyboard, then I'm ditching Macs and will pick up a Microsoft Surface Book or something similar. Whatever it is, I'll make sure to pick a laptop that has <em>a god damned functional keyboard</em>.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Culture Amp Junior Engineering Program Discontinued</title>
   <link href="http://ryanbigg.com/2019/07/culture-amp-junior-engineering-program-discontinued"/>
   <updated>2019-07-16T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2019/07/culture-amp-junior-engineering-program-discontinued</id>
   <content type="html"><![CDATA[<p>For the past two years, I have ran not one but <em>two</em> successful Junior Engineering Programs (JEPs) at Culture Amp. The official number of developers that I have trained there is 19. But I trained a bunch more developers from time-to-time as well. So the proper total would probably be in the range of 30-40 developers at Culture Amp that I have helped train, support and grow over the past two years. I am really proud of this work that I have done and I have really enjoyed my time doing it.</p>
<p><strong>Unfortunately, Culture Amp has decided not to run the JEP in 2020 and are yet to make any decisions around future programs.</strong></p>
<p>I understand this decision will be surprising to hear for a number of people who have been expecting to be able to apply for the program when applications open. Especially as I have been doing a little bit of a &quot;speaking tour&quot; recently talking about the JEP. It was surprising to me when I heard it, too.</p>
<p>I am grateful that these two JEPs even happened in the first place. It's very &quot;Culture Amp&quot; to have even <em>talked</em> about doing one, let alone doing it as well. It started as an idea from a hackathon we ran internally -- then referred to as the &quot;Graduate Developer Program&quot;. The (slightly-embellished) story I tell is that I had a one-on-one with my Mentor, Jo Montanari, about 4 months after the hackathon and I asked her &quot;why aren't we running this program? and she shot back: &quot;Why aren't <em>you</em> running this program?&quot;.</p>
<p>The rest is history.</p>
<h2 id="culture-amp-continues-investing-in-learning-and-development">Culture Amp continues investing in learning and development</h2>
<p>Culture Amp ran JEP for two years, but still does a lot of great work towards investing in the learning and development of their employees outside of this program. I'd like to mention two of them quickly here.</p>
<p>Culture Amp has the &quot;Learn Yourself Up&quot; (LYSU) program, $1k USD per-camper per-year to spend on whatever learning &amp; development expenses you want. If it's related to your job, you can expense it up to 90% off. If it's something outside of that, you can still use this budget but expense only 50%. This is an excellent initiative; and something I think more tech companies should think about doing.</p>
<p>The second of these is the Mentoring assignments that every single employee gets. When you join Culture Amp, you get paired up with a Mentor who can give you &quot;strategic&quot; career advice and be an advocate for you in the organisation. I've been fortunate enough to have Doug English (the CTO), Jo Montanari (now Director of People &amp; Culture), and Paul Hughes (Backend Practice Lead) as my mentors for the 3 years that I have been at Culture Amp.</p>
<p>Thanks to both the LYSU and mentoring, I have grown more as not just a developer but as a <em>person</em> faster than anywhere I've ever worked before. It has been the best time I've ever had working at a company in my entire career.</p>
<h2 id="i-will-continue-advocating-for-juniors">I will continue advocating for juniors</h2>
<p>I have spoken at places such as RMIT, Le Wagon, Coder Academy about this program. I have had many 1-on-1 chats with juniors about their learning progress and how they could prepare themselves for the JEP. I have replied to many emails from interested juniors about this program, giving them similar levels of advice. There are literally <em>hundreds</em> of <em>excellent</em> junior developers out there. I'm happy to keep talking to juniors about their career prospects and what I sought out as someone who actively hired them.</p>
<p>I have even given feedback on juniors that have attempted either <a href="https://github.com/radar/surveyor">the 2017 JEP coding test</a> or <a href="https://github.com/radar/surveyor-2">the 2018 JEP coding test</a>. I am still going to keep doing this in to the future as much as I can. I think that technical feedback / direction like this is something that a lot of juniors are missing out on. They can read all the great tech books, follow all the cool screencasts, but that's pretty one-way. How do they know if they're writing code the &quot;right&quot; way? Well, having me look at their attempts at the coding test is a good way of getting that feedback. Let's keep doing that.</p>
<p>Every time I go to the Melbourne Ruby night, I spend a huge portion of the night talking to juniors about the program. I do all this because <a href="https://ryanbigg.com/2018/03/hiring-juniors">I care <em>tremendously</em> about juniors, and especially hiring juniors</a>. I will keep having these talks with juniors too. I love meeting them and then seeing them get into jobs, and following how they go in their career.</p>
<p>I've also been advocating for other companies around the world to run their own junior programs too, and I think that it's gaining some traction. I'm going to continue to have these conversations too.</p>
<h2 id="what-this-means-for-juniors">What this means for juniors</h2>
<p>What this means for juniors who were thinking about applying to a future JEP is that there's now going to be <em>slightly fewer</em> job opportunities out there in an already tight job market. Such is the nature of the job market.</p>
<p>I am happy to still act as an advisor for juniors who need it and as an advocate for companies hiring more juniors. If there are any companies out there that are hiring juniors, I'm happy to refer on some excellent ones too.</p>
<h2 id="what-this-means-for-my-future">What this means for my future</h2>
<p>Somewhere around November, I will be leaving Culture Amp. The official date depends on some other factors and future discussions. I've really enjoyed working here: the people are very cool, the Culture Amp platform is solving a problem I care a lot about, and the tech is interesting.</p>
<p>Most of all though: I have been remarkably well-supported in whatever I've set my mind to at Culture Amp. From being a Ruby dev, to an Elixir dev, to running a Junior Engineering Program <em>twice</em>. Culture Amp has always had my best interests at heart, and I know that we part ways with no hard-feelings on either side here.</p>
<p>If you've read this far and you'd like to reach out to me about future job opportunities, please <a href="/work">check out /work</a>, and <a href="/history">check out /history</a> too.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Ruby Trickery</title>
   <link href="http://ryanbigg.com/2019/03/ruby-trickery"/>
   <updated>2019-03-05T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2019/03/ruby-trickery</id>
   <content type="html"><![CDATA[<p>Last week I gave a talk at Melbourne Ruby involving some card tricks and Ruby trickery.</p>
<p>The talk is up on Youtube:</p>
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/lSiD3LZanPI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>I do some card tricks for about 10 minutes, and then some Ruby tricks. I won't reveal how I did the card tricks in this blog post, but I will reveal how I did the Ruby tricks.</p>
<p>The Ruby trickery starts at about the 9m30s mark in that video. You can see the code for most of these tricks at <a href="https://github.com/radar/trickery">radar/trickery on GitHub</a>.</p>
<p>In this post, I'll cover all the tricks I had planned for the talk, not just the ones I showed off.</p>
<p><strong>Please, do not use any code in this blog post in production systems. It can cause weird behaviour. Especially the one involving JavaScript sorting.</strong></p>
<p>The point of this post is to show the things Ruby is capable of.</p>
<h2 id="numbers">Numbers</h2>
<h3 id="addition">Addition</h3>
<p>My first trick was to override addition, which I did with this code:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Integer</span>
  <span class="kp">alias_method</span> <span class="ss">:old_plus</span><span class="p">,</span> <span class="p">:</span><span class="o">+</span>

  <span class="c1"># 2 + 2 = 6</span>
  <span class="k">def</span> <span class="nf">+</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="n">old_plus</span><span class="p">(</span><span class="n">old_plus</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
  <span class="k">end</span>
</code></pre></div></div>
<p>This allowed me to call <code>2 + 2</code> and get a result of <code>6</code>. It runs two plus operations, effectively doubling the number on the left before adding the number on the right. This is why <code>2 + 5 = 9</code> and <code>3 + 7 = 13</code>. By aliasing the original <code>+</code> method using <code>old_plus</code>, we can override the <code>+</code> method, but still use the old one.</p>
<h3 id="multiplication">Multiplication</h3>
<p>The next trick applies to multiplication, but is a little more advanced:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Integer</span>
  <span class="kp">alias_method</span> <span class="ss">:old_multiply</span><span class="p">,</span> <span class="p">:</span><span class="o">*</span>

  <span class="k">def</span> <span class="nf">*</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="n">m</span> <span class="o">=</span> <span class="nb">method</span><span class="p">(</span><span class="ss">:old_multiply</span><span class="p">).</span><span class="nf">unbind</span>
    <span class="n">m</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="n">num</span> <span class="o">/</span> <span class="nb">self</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This code calls <code>method(:old_multiply)</code>, but <code>unbind</code>s it from <code>self</code>. I can then rebind this method to anything else with the <code>bind</code> method, before calling it again. This re-binding makes the number <code>3</code> always the <code>self</code> within the <code>old_multiply</code> method, regardless of what is passed through on the left. However, the <code>self</code> reference inside this override will still be the left-hand-side number.</p>
<p>Some examples:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">3</span>
<span class="mi">6</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span>
<span class="mi">99</span> <span class="o">*</span> <span class="mi">999</span> <span class="o">==</span> <span class="mi">30</span>
</code></pre></div></div>
<h3 id="unary-minus">Unary minus</h3>
<p>The unary methods are often ignored within Ruby, despite having their uses. There's <a href="http://www.rubyinside.com/rubys-unary-operators-and-how-to-redefine-their-functionality-5610.html">a good Ruby Inside article about unary methods</a>. You should read it.</p>
<p>The TL;DR is that unary methods work as prefixed method calls on particular objects within Ruby. I'll show you what I mean. But let's look at the override first:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">-@</span>
  <span class="o">+</span><span class="nb">self</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This is pretty straight forward. When we're told to minus something, make it a positive instead.</p>
<p>What's interesting here is that it won't work on negative numbers straight off the bat:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">-</span><span class="mi">5</span>
<span class="o">=&gt;</span> <span class="o">-</span><span class="mi">5</span>
</code></pre></div></div>
<p>This is because negative numbers are... well, they're negative numbers. The minus symbol there isn't a unary method call.</p>
<p>But things change if you assign a variable:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
<span class="o">&gt;&gt;</span> <span class="o">-</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
</code></pre></div></div>
<p>The number remains positive, even though it should've been negated. This is because this code is calling the <code>-@</code> unary method.</p>
<p>What's fun with this is that you can keep chaining negative signs, positive signs or a combination of both:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">--------</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
<span class="o">&gt;&gt;</span> <span class="o">++++++++</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
<span class="o">&gt;&gt;</span> <span class="o">+-+-+</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
</code></pre></div></div>
<p>All of these examples either call <code>-@</code>, <code>+@</code> or a combination of both multiple times.</p>
<h2 id="arrays">Arrays</h2>
<h3 id="sorting-the-javascript-aka-quotrightquot-way">Sorting, the JavaScript (aka &quot;right&quot;) way</h3>
<p>JavaScript sorting is a well-known case of... well, weird behaviour. For example, this code:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">].</span><span class="nx">sort</span><span class="p">()</span>
</code></pre></div></div>
<p>Should maintain the same order of the numbers, increasing left-to-right. Instead, the output is this:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>
<p>This &quot;weird behaviour&quot; happens because JavaScript sorts objects based on their string versions. The string &quot;-1&quot; comes before &quot;-2&quot;, but &quot;-2&quot; comes before &quot;0&quot;, and so on. This  <a href="https://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.11">is specified in the EcmaScript specification (5.1), Section 15.4.4.11</a>, but you need a PhD or higher qualification (read: galaxy brain) to understand exactly what it is saying.</p>
<p>How does this relate to Ruby? Well, first of all Ruby does the sorting order correctly:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">].</span><span class="nf">sort</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>
<p>But if we wanted to bring JavaScript style sorting to Ruby, then we can use this code:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">JSSort</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">included</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
    <span class="n">base</span><span class="p">.</span><span class="nf">alias_method</span> <span class="ss">:old_sort</span><span class="p">,</span> <span class="ss">:sort</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">sort</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">).</span><span class="nf">old_sort</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_i</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Array</span><span class="p">.</span><span class="nf">include</span><span class="p">(</span><span class="no">JSSort</span><span class="p">)</span>
</code></pre></div></div>
<p>This converts each element to a string via <code>map</code>, then sorts them using the old sorting behaviour (the default Ruby way), before converting them all back to integers.</p>
<p>We're not guaranteed to have arrays of integers at all times, so we might want to put a guard around that to check at least the first element is a number:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">sort</span>
  <span class="k">if</span> <span class="n">first</span><span class="p">.</span><span class="nf">is_a?</span><span class="p">(</span><span class="no">Numeric</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">).</span><span class="nf">old_sort</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_i</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">old_sort</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This doesn't prevent against arrays that contain a mix of datatypes (numbers and strings), but only really nefarious people create those, and there aren't many of those in the Ruby community so I think we can be safe here.</p>
<p>This code will now make Ruby sort &quot;correctly&quot; -- at least according to JavaScript:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">].</span><span class="nf">sort</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>
<p>If we include this module into <code>Range</code>, we can get the same delicious behaviour:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Range</span><span class="p">.</span><span class="nf">include</span><span class="p">(</span><span class="no">JSSort</span><span class="p">)</span>
</code></pre></div></div>
<p>Let's try it:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">..</span><span class="mi">2</span><span class="p">).</span><span class="nf">sort</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>
<p>Now we can make Ruby sort the same way as JavaScript.</p>
<h3 id="double-equality">Double Equality</h3>
<p>A little known fact is that the <code>==</code> in code like <code>[1,2,3] == [1,2,3]</code> is actually a method call. This code calls <code>Array#==</code>, and we can override this method too.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Array</span>
  <span class="kp">alias_method</span> <span class="ss">:old_double_equals</span><span class="p">,</span> <span class="ss">:==</span>

  <span class="k">def</span> <span class="nf">==</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="nb">method</span><span class="p">(</span><span class="ss">:old_double_equals</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="p">?</span> <span class="s2">"yes"</span> <span class="p">:</span> <span class="s2">"no"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Rather than getting the plain (and boring) <code>true</code> or <code>false</code> when we compare arrays, we will now get &quot;yes&quot; or &quot;no&quot;.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="s2">"yes"</span>
<span class="o">&gt;&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="s2">"no"</span>
</code></pre></div></div>
<p>You can make this method a little more fun by first checking the length and then determining what to do on that:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">other</span><span class="p">.</span><span class="nf">length</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="p">?</span> <span class="s2">"maybe"</span> <span class="p">:</span> <span class="p">(</span><span class="nb">method</span><span class="p">(</span><span class="ss">:old_double_equals</span><span class="p">)</span><span class="o">.</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="p">?</span> <span class="s2">"yes"</span> <span class="p">:</span> <span class="s2">"no"</span><span class="p">)</span>
</code></pre></div></div>
<p>This way then, you get &quot;maybe&quot; if you try to compare against an array of more than 3 elements:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="s2">"maybe"</span>
</code></pre></div></div>
<h3 id="triple-equality">Triple Equality</h3>
<p>Similarly to <code>==</code>, <code>===</code> is also a method call. When we're making this call we want to be <em>really</em> sure that the things are equal. Getting back <code>false</code> would be disappointing, so we can override this method to always return <code>true</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">===</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
    <span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<h3 id="not-equal">Not Equal</h3>
<p>Just like its siblings <code>==</code> and <code>===</code>, <code>!=</code> is also a method call. We can override this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="o">!=</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
    <span class="s2">"can't say, tbqh"</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>We can't say, to be quite honest.</p>
<h3 id="unary-minus-again">Unary Minus (again)</h3>
<p>We saw an example of unary minus working on a variable, but unary methods can be called before data types in Ruby too. Strings are one case where we can freeze a string by prefixing it with <code>-</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="s2">"string"</span>
<span class="o">=&gt;</span> <span class="s2">"string"</span>
<span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="nf">frozen?</span>
<span class="o">=&gt;</span> <span class="kp">true</span>
</code></pre></div></div>
<p>But arrays are another case. Arrays in Ruby don't have a unary minus method defined by default, but that doesn't stop us defining our own:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">-@</span>
    <span class="n">clear</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>What this code allows us to do is to clear an array by prefixing it with <code>-</code>. It'll work for the array itself, or a variable representing the array too:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">-</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[]</span>
<span class="o">&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;</span> <span class="o">-</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="p">[]</span>
<span class="o">&gt;&gt;</span> <span class="n">a</span>
<span class="o">=&gt;</span> <span class="p">[]</span>
</code></pre></div></div>
<p>This saves us a full 5 characters of typing that we would otherwise have to do:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="nf">clear</span>
</code></pre></div></div>
<h3 id="unary-plus">Unary Plus</h3>
<p>Just like <code>-@</code>, we can add a <code>+@</code> method to arrays:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">+@</span>
  <span class="n">replace</span> <span class="n">flat_map</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="p">}</span>
  <span class="nb">self</span>
<span class="k">end</span>
</code></pre></div></div>
<p>The Japanese &quot;十&quot; character is the one for 10, so it makes sorta-sense that our <code>+@</code> method takes each of the element, and makes 10 of those in the array:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;</span> <span class="o">+</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>
<p>This operation mutates the array using <code>replace</code>, replacing whatever's in the array with 10 of each of the elements.</p>
<p>It should be noted that <code>*</code> is <a href="http://ruby-doc.org/core-2.6.1/Array.html#method-i-2A">also an Array method</a>, but this one hasn't been overriden here. I should also note that the <code>*</code> method can take <em>either</em> an Integer or a String as an argument and it behaves differently depending. Check out the docs for more info.</p>
<h3 id="unary-bang">Unary Bang</h3>
<p>We've seen a few unary methods so far, but an even lesser known one is the <code>!@</code> unary method. My override for this is straightforward:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="o">!</span><span class="err">@</span>
    <span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This will give us random numbers in our array, between 0 and 100:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">82</span><span class="p">]</span>
</code></pre></div></div>
<h3 id="unary-tilde">Unary Tilde</h3>
<p>The last in the long line of unary methods is <code>~@</code>. This one kinda looks like a wave, so I think it should shuffle arrays:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Array</span>
  <span class="k">def</span> <span class="nf">~</span><span class="err">@</span>
    <span class="n">shuffle</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Here's an example of using it:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">~</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>
<p>This saves us a grand total of 8 characters. Wow, such savings!</p>
<h3 id="unary-combos">Unary combos</h3>
<p>As we saw before with the unary methods <code>+@</code> and <code>-@</code>, we can chain them:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">--------</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
<span class="o">&gt;&gt;</span> <span class="o">++++++++</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
<span class="o">&gt;&gt;</span> <span class="o">+-+-+</span><span class="n">a</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
</code></pre></div></div>
<p>Same goes for these array methods:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">!+~</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">53</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">36</span><span class="p">]</span>
</code></pre></div></div>
<p>Why would you want to do this? I am not sure. I think it is a quirk of the Ruby language that allows this.</p>
<p>But the order matters:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="o">+!~</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="no">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">from</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">asdf</span><span class="o">/</span><span class="n">installs</span><span class="o">/</span><span class="n">ruby</span><span class="o">/</span><span class="mf">2.5</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">irb</span><span class="p">:</span><span class="mi">11</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'
SyntaxError ((irb):4: syntax error, unexpected !~)
+!~[1,2,3]
 ^~
</span></code></pre></div></div>
<h2 id="typing-without-typing">Typing without typing</h2>
<p>That covers all my Ruby tricks in the video (and some more!), but there were a couple of other tricks I should mention. There were two distinct tricks: one where the code typed itself, and another where a terminal displayed a card after someone spoke it.</p>
<h3 id="self-writing-code">Self-writing code</h3>
<p>It sure would be nice if code wrote itself. But alas, technology hasn't reached that particular zenith yet.</p>
<p>We can simulate this sort of technology using <em>other</em> tech, such as <a href="https://asciinema.org/">Asciinema</a>. This will record your terminal session, and you can play it back as you wish. This is what I did when I wrote the original <code>cards.rb</code>.</p>
<h3 id="activelistening">ActiveListening</h3>
<p>The <a href="https://github.com/radar/trickery/blob/master/cards.rb">second <code>cards.rb</code></a>, works with a dual keypress on the keyboard. Six of diamonds is &quot;6D&quot;. Ten of hearts is &quot;0H&quot; or &quot;TH&quot;. Jokers aren't used in any serious card games, so they are not accounted for in this script.</p>
<p>So this code, if you read it, works by taking terminal input of two characters. But during the talk I get Kasia to read out some cards and then, a little while later, they appear on the screen.</p>
<p>But how?</p>
<p>This is a cheeky trick, and I needed another assistant for it. I recruited one of my juniors, Nick Wolf for this. I ran a <a href="https://en.wikipedia.org/wiki/Tmux"><code>tmux</code></a> session for all the code demos during the talk, and gave Nick <code>ssh</code> access to my machine.</p>
<p>Nick then connected in via <code>ssh</code>, ran <code>tmux attach-session</code> and then could control my terminal as easily as I could. When Kasia read out a card, Nick would type in the two characters required for that card.</p>
<p>Magic isn't magic if you know how it works. This trick was a little cheeky, but I included it as I wanted to show off that <code>tmux</code> can allow two people to share a terminal over SSH.</p>
<h2 id="conclusion">Conclusion</h2>
<p>I hope this post has been helpful to understand what strange things Ruby is capable of. There's no logical reason to override the <code>+</code> method on <code>Integer</code>, or to add extra unary methods to Arrays. It's just something that Ruby allows us to do because of the language's flexibility.</p>
<p>Other people have done truly amazing things with the Ruby language. There's the <a href="https://github.com/tric/trick2018/">trick2018</a> repo which includes some really amazing Ruby files. Go through those and take a look.</p>
<p>My favourite though is the <a href="https://github.com/knoxknox/qlobe">qlobe</a> -- a quine that outputs a rotating globe of the earth. It even <a href="https://www.youtube.com/watch?v=HynsTvRVLiI">remembered to include New Zealand</a>.</p>
]]></content>
 </entry>
 
 <entry>
   <title>JEP #2: The first 8 weeks</title>
   <link href="http://ryanbigg.com/2019/03/jep-2-first-8-weeks"/>
   <updated>2019-03-04T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2019/03/jep-2-first-8-weeks</id>
   <content type="html"><![CDATA[<p>At Culture Amp, we kicked off the latest round of our Junior Engineering Program (JEP) about 8 weeks ago. We hired 9 junior developers all of varying levels of past experience and set about teaching them the foundational skills they need to be productive members of our product teams.</p>
<p>In this post, I want to take the time to reflect on what we've accomplished during those 8 weeks, and to note down my own personal reflections.</p>
<h2 id="the-new-program">The new program</h2>
<p>Before the juniors started, I spent a large amount of my time reviewing the curriculum from the last JEP. <a href="https://ryanbigg.com/2018/08/junior-engineering-program-resources">I talked about this in my last JEP post</a>. On (or around) that topic I want to speak about a few things:</p>
<ul>
<li>Expectation setting</li>
<li>The tech that we covered</li>
<li>Team building activities</li>
<li>1-on-1 support</li>
</ul>
<h3 id="expectation-setting">Expectation setting</h3>
<p>The very first presentation that I gave to the juniors contained very little to do with the tech side of things and with good reason. It covered a timeline of the JEP, and a bunch of focus on setting up expectations early. There is no better time to set expectations like this than at the very beginning.</p>
<p>In particular, I outlined things such as &quot;I will never expect you to know what I know at all times.&quot; and &quot;I will never expect you to be able to keep up with me.&quot; I know that both of these things were things that the original JEP cohort had anxiety about, so I thought to cover these first. I don't, and never will, expect juniors to be able to know what I know or to be able to keep up with me. It is the most unreasonable expectation I could possibly have, but it needed saying.</p>
<p>On a more positive side, I also said &quot;I will always expect you to ask me to slow down and explain things again.&quot; I stressed that it doesn't matter if I have explained it fifty times already. Make me explain it again for the fifty-first time. It'll give me practice in being a better teacher. I want to be a better teacher.</p>
<p>In this same presentation, I outlined that &quot;Priority Zero&quot; is self care. This includes things like setting fixed times for your work days and not exceeding them, talking to other people about your struggles when you're struggling (even though it can be hard!) and asking questions when you feel stuck on something.</p>
<p><strong>Taking care of yourself should <em>always</em> be the highest priority. Nothing trumps this.</strong> It feels like it doesn't need saying, but it does. It's almost a form of giving permission.</p>
<p>Finally, I outlined what they could expect from the program: a great culture, an exceptionally supportive environment and learning &amp; development opportunities galore. These were my promises to the old cohort too, but with the new cohort I made them very explicit.</p>
<h3 id="the-tech-side-of-things">The tech side of things</h3>
<p>There is an incredible amount of stuff to learn when it comes to building web applications. Building a tech-focussed curriculum for this program is a massive undertaking. For the initial part of the program, I had the juniors for an 8 week &quot;kickstart&quot; program where I could teach them full-time for those 8 weeks. Figuring out what to teach them was a fun exercise!</p>
<p>I re-worked the JEP curriculum it this time around to start with a focus on browser technologies -- HTML, CSS and JavaScript -- since that's where users interact with applications the most: through a browser. The first project for the juniors was a quick user manual built in HTML + CSS. As an example, <a href="https://cultureamp.github.io/jep-bios/ryan/">here's mine</a>.</p>
<p>Starting at the browser level allowed us to expand &quot;outwards&quot; in complexity, bringing things like React and TypeScript into the mix very soon after starting. We started by using <a href="https://stackblitz.com/">StackBlitz</a> here to develop our first React application, and this was a really good experience -- especially with the code reloading. The juniors watched the <a href="https://frontendmasters.com/courses/complete-react-v4/">Frontend Masters - Complete Intro to React v4</a> or <a href="https://www.udemy.com/react-redux/">the Udemy React + Redux course</a> to learn more about React.</p>
<p>Once we were comfortable with our React applications, we downloaded them to our machines and added TypeScript to them. We had our first guest lecture during this week, ran by one of our staff: Louis Quinnell. He ran the juniors through a Webpack setup with TypeScript.</p>
<p>This week involving React, Webpack and TypeScript was one of the hardest JEP weeks, and next time I'd probably spread it out over two weeks next time. There was just so much content crammed into one week!</p>
<p>After covering browser and JS tooling tech, we then moved out to networking concepts, like hosts, ports and HTTP. We talked about how processes can listen on specific ports, and that when they listen, they communicate over established protocols like HTTP.</p>
<p>To solidify that knowledge, we then made React applications talk to HTTP servers that served JSON data by using the <a href="https://github.com/axios/axios">axios</a> package. To serve a JSON API, we used <a href="https://github.com/typicode/json-server">the wonderful <code>json-server</code></a> package. To explain how these different routes within <code>json-server</code> worked, I wrote them up on a whiteboard:</p>
<p><img src="/images/jep/jep2-crud-whiteboard.jpg" alt="JEP 2 whiteboard" /></p>
<p>By this point, we had a clearly separated frontend + backend application structure, which is the style of application structure that we are moving towards at Culture Amp: a clear separation between backend and frontend applications.</p>
<p>We then took a week to do some coding exercises through <a href="https://www.codewars.com">CodeWars</a>, with some of the juniors completing <a href="https://www.codewars.com/kata/the-lift">a 3-kyu ranked coding problem called &quot;The Lift&quot;</a> in Ruby. During this week, I also set the juniors some homework of completing the Toy Robot exercise in either Ruby or TypeScript. The catch was that it had to be tested using RSpec. At the start of the week, we had our second guest lecturer: David Carlin. He ran through a short RSpec testing tutorial <a href="https://exercism.io/tracks/ruby/exercises/roman-numerals">based on the roman numerals exercise from Exercism</a>.</p>
<p>The week after that, we rebuilt our own version of <code>json-server</code> with <a href="http://sinatrarb.com/intro.html">Ruby's Sinatra web framework</a>. By using <code>json-server</code> first, then building the same thing in Sinatra, we would have a clear idea of what we were trying to accomplish. This application used a combination of <code>File.read</code>, <code>File.write</code> and <code>JSON.parse</code> to accomplish its task, giving the juniors experience working with one particular file format.</p>
<p>During this time, I wrote a suite of tests in <a href="https://rspec.info">RSpec</a> that made requests to the Sinatra application to assert that it behaved correctly. These tests would assert that everyone's Sinatra application was working correctly.</p>
<p>Once we had the Sinatra application working and reading from a JSON file to serve data, we then converted it again to use a <a href="https://www.mongodb.com/">Mongo database</a>. Why Mongo? Simply, because it is what we use in our main application at Culture Amp and that application will be the first touch point for a lot of juniors once they reach their teams.</p>
<p>We touched on Mongo database querying (through the <code>mongo</code> console) relatively quickly (less than an hour), before moving onto Mongoid and how to use that within a Sinatra application. We went quickly to <a href="https://rubygems.org/gems/mongoid">Mongoid</a> because that's what we use most often to talk to our Mongo database, not direct queries in a <code>mongo</code> console.</p>
<p>We touched on what the Object-Document-Mapper (ODM) pattern was, and how it related to the Object-Relation-Mapper pattern (ORM) from Active Record. We replaced our Ruby code within the Sinatra application that read from a JSON file with one that read from a Mongoid model instead. This change made our Sinatra applications much easier to work with! The juniors were able to use the test suite to assert that their application was functioning correctly too.</p>
<p>To wrap up the 8 weeks, we spent the final week learning about <a href="https://rubyonrails.org">Ruby on Rails</a>, going through the <a href="https://guides.rubyonrails.org/getting_started.html">Getting Started guide</a> and then building an application with it. This application served a CRUD interface through regular Rails HTML+ERB views, as well as an API that worked exactly the same as our Sinatra application. We moved the RSpec tests from the Sinatra application into this new Rails application, and turned them into <a href="https://relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec">RSpec request specs</a> so that we could easily test our Rails application.</p>
<p>One final bit of testing that we added later on was feature tests using the excellent <a href="https://rubygems.org/gems/capybara">Capybara gem</a>, paired with <a href="https://rubygems.org/gems/selenium-webdriver">selenium-webdriver</a> and <a href="https://rubygems.org/gems/chromedriver-helper">chromedriver-helper</a>. This allowed us to run tests within a real browser, and the juniors really loved seeing the tests run through their app blazingly fast in a real browser. I think this sort of thing is a good demonstration of what testing provides.</p>
<h3 id="building-a-team">Building a team</h3>
<p>Both of our JEP cohorts did more than just learn a bunch of pieces of tech. The whole reason why we hire a cohort of developers rather than just one or two is so that they can bond through the process. The shared experiences that the group has helps the team support each other and grow faster. To that end, we did a bunch of team building activities too.</p>
<h4 id="team-lunches">Team lunches</h4>
<p>One of our common activities was to go out to team lunches. Before the program started, we all went out and had lunch at Pok Pok Junior, a Thai restaurant. During our first week, we went out for a &quot;Welcome to Culture Amp&quot; lunch at Tahini Diner in the city:</p>
<p><img src="/images/jep/jep2-tahini-diner.jpg" alt="Tahini Diner" /></p>
<p>During the program, we regularly went out for lunch together as a group and I reckon that helped the group bond well.</p>
<p>By about the 3 week stage, the team had really gelled well and were routinely helping each other out, which made my work easier too. Something happened during this week -- I'm not sure what -- and suddenly the grouped clicked as a whole. It was very noticeable and awesome to watch.</p>
<h4 id="werewolf--dominoes">Werewolf + Dominoes</h4>
<p>On Friday afternoons, we run semi-regular sessions of Werewolf. Here's some of our juniors during one of our Werewolf sessions at an off-site company event having a bunch of fun accusing others of lying:</p>
<p><img src="/images/jep/jep2-werewolf.jpg" alt="Werewolf" /></p>
<p>One of the other activities we've done for &quot;team building&quot; was during the 3rd week, where I brought in 500 dominoes and asked the juniors to work in teams to build the longest chain, tallest tower and a few other things:</p>
<p><img src="/images/jep/jep2-dominoes.jpg" alt="Dominoes" /></p>
<p>It turns out that 500 dominoes is not enough to share between 9 juniors so next time I might bring in 1000 and see how that goes.</p>
<p>This dominoes exercise was intended as a learning exercise for the juniors -- something based around &quot;if you take your time you produce a better quality of work&quot; (dominoes are unforgiving if you rush them!) -- but it ended up being way more fun than serious.</p>
<p>At the end of this session on dominoes, we all signed dominoes for each other and took them home as a memento of our time during the JEP even though it's nowhere near over yet.</p>
<p><img src="/images/jep/jep2-signed-dominoes.jpg" alt="Signed Dominoes" /></p>
<p>This was a really nice touch on this lesson.</p>
<h3 id="on-1-support">1-on-1 support</h3>
<p>While the juniors may feel comfortable expressing themselves one way within the JEP group, there's going to be cases where they reserve some things for more private cases. Being a junior within a large company with a bunch of experienced engineers is tough. Being in a group of people who you constantly compare yourself to can be tough too.</p>
<p>To help with this part, I spared an hour of my week every single week for each of the juniors. The juniors were told to bring their own agenda along to this meeting. We could catch up and talk about how the week was going, how they were feeling, and talk about any issues that they have encountered that week. I enjoyed these catch ups and I felt like I got to know them all better.</p>
<p>A major topic of conversation was anxiety at feeling like they weren't good enough. This is a pretty common thing for juniors to encounter. I provided the junior assurances that this feeling of &quot;being not good enough&quot; is a perfectly normal thing to happen to them is what I try to do when it pops up. It'll keep coming up from time-to-time, and I think it's a root of imposter syndrome. Almost all of my juniors experienced this feeling during the first 8 weeks.</p>
<p>My main job here is to turn the juniors into confident and capable developers, and these 1-on-1s are critical to making that happen.</p>
<h2 id="reflections">Reflections</h2>
<p>It wouldn't be a JEP post if I didn't include some reflections at the end. So here they are!</p>
<h3 id="curriculum-was-great">Curriculum was great</h3>
<p>I strongly believe that the approach I took to curriculum this time around worked incredibly well. The rough order was this:</p>
<ul>
<li>Expectation setting</li>
<li>HTML, CSS and JavaScript</li>
<li>React</li>
<li>TypeScript</li>
<li>Networking fundamentals + servers</li>
<li>Ruby</li>
<li>Coding exercises, TDD &amp; BDD</li>
<li>Sinatra</li>
<li>Mongo &amp; Mongoid</li>
<li>Rails</li>
<li>Capybara</li>
</ul>
<p>All of this was covered in roughly 6 weeks of &quot;hands-on&quot; time. It helped a lot that the juniors had a grip on some of these things already.</p>
<p>Next time I would like to separate out the React &amp; TypeScript week into two consecutive weeks -- cramming them into one week felt quite intense for me and esepcially for the juniors. During the React week I could add some more content around testing with Jest.</p>
<p>By moving TypeScript out to its own week it would &quot;disconnect&quot; it from React. I would show that it can be used independently and how it compiles down into JavaScript. Then I can show how to use it in conjunction with React.</p>
<hr />
<p>The week spent on Rails + Capybara also felt a bit short I would split this week into two as well, so that we could cover more.</p>
<p>I would've loved to cover Rails + React integration using the <a href="https://github.com/rails/webpacker">Webpacker</a> gem, but we ran out of time during the last week. This gem would've allowed us to move our frontend code into our Rails application and would've gotten us a close model of how Culture Amp's major Rails application works.</p>
<p>This is the last major piece of the puzzle of how our major Rails application works and I worry that the juniors who have now begun working on their teams won't understand this concept well enough when they see it within the application. But maybe I am being a worry wart.</p>
<p>So overall, we covered this material in 6 weeks but I think 8 weeks of time would be more suitable.</p>
<h3 id="make-dev-machine-setup-smoother">Make dev machine setup smoother</h3>
<p>Lots of time was spent setting up their developer machines. I <em>strongly feel</em> like I should be able to automate this but I worry if I try I would be running into <a href="https://xkcd.com/1205/">this classic XKCD</a>.</p>
<p>There wasn't a canonical list of things for the juniors to work through to set it up, and it always feel a bit ad-hoc. I think maybe keeping a list of these common tasks that developers go through when setting up their computers here would be beneficial. Sharing this list in a todo list application (Wunderlist? Things?) might help provide some order and sense to the steps.</p>
<h3 id="more-quotwhyquot">More &quot;Why?&quot;</h3>
<p>One thing that I need to seriously do better is to explain the &quot;why&quot; of what we're doing a lot better. The &quot;why?&quot; question was a pretty common one.</p>
<p>It's all well and good to learn new tech (it's exciting!) but covering <em>why</em> it is important would help sell the juniors on it. Why was it important to learn React? What about JSON APIs? More why.</p>
<p>Providing more details about the &quot;story arc&quot; of the week / program-as-a-whole would've been more useful too, I believe.</p>
<h3 id="webpacker-react-amp-rails">Webpacker, React &amp; Rails</h3>
<h3 id="none-on-ones">None-on-Ones</h3>
<p>For the past 8 weeks, I honestly have felt like I've been running around, shouting &quot;AAAAAHHHHHH&quot; with my arms flailing above my head.</p>
<p>Onboarding 9 new developers to the company and teaching them new curriculum kept me incredibly busy. So busy that I actually went to sleep at 6:30pm on at least one Friday.</p>
<p>This, coupled with my regular amount of meetings and the 1-on-1s on top of it, meant that I didn't have much &quot;spare&quot; time. In this spare time I would regularly catch up on todo list items, actions that come out of 1-on-1s, emails and so on.</p>
<p>So in the future, I am setting aside <em>at least</em> 5 hours a week in sessions that I'm calling &quot;None-on-Ones&quot;. They're booked in my calendar as regular meetings (where I'm marked as &quot;busy&quot;), except I am the only one invited. I hope this will convince myself to focus on clearing out those small-but-important tasks that I never seemed to have spare time to get around to.</p>
<p>Maybe this is a management trick I wasn't taught yet. I think it'll be useful.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Polymorphic Routes</title>
   <link href="http://ryanbigg.com/2018/12/polymorphic-routes"/>
   <updated>2018-12-13T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2018/12/polymorphic-routes</id>
   <content type="html"><![CDATA[<p>Really early on in Rails, you would write routes like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">redirect_to</span> <span class="ss">:controller</span> <span class="o">=&gt;</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="ss">:action</span> <span class="o">=&gt;</span> <span class="s2">"show"</span><span class="p">,</span> <span class="ss">:id</span> <span class="o">=&gt;</span> <span class="vi">@post</span><span class="p">.</span><span class="nf">id</span>
</code></pre></div></div>
<p>What this would do is dutifully redirect to the <code>show</code> action inside the <code>PostsController</code> and pass along the <code>id</code> parameter with a
value of whatever <code>@post.id</code> returns. Typical 302 response.</p>
<p>Then Rails 1.2 came along and allowed you to use routing helpers, like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">redirect_to</span> <span class="n">post_path</span><span class="p">(</span><span class="vi">@post</span><span class="p">)</span>
</code></pre></div></div>
<p>And the people rejoiced.</p>
<p>This would do effectively the same thing. <code>post_path</code> here would build a route using the <code>@post</code> object that would look something
like <code>/posts/1</code> and then <code>redirect_to</code> would send back a 302 response to that route and the browser would follow it.</p>
<p>Then later versions (I can't remember which one), allowed syntax like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">redirect_to</span> <span class="vi">@post</span>
</code></pre></div></div>
<p>And the people rejoiced a second time.</p>
<h3 id="magic-but-not-really">Magic, but not really</h3>
<blockquote>
<p>Any sufficiently advanced technology is indistinguishable from magic.</p>
</blockquote>
<p>While this seems like magic, it's not. What this is doing is actually very, very neat. The <code>redirect_to</code> method, much like its cousins <code>link_to</code> and <code>form_for</code> all use a common method to build URLs, called <code>url_for</code>. The <code>url_for</code> method takes many different varieties of objects, such as strings, hashes or even instances of models, like in the example above and then uses whatever's input to build a URL. <code>url_for</code> does this in conjunction with another method called <code>polymorphic_url</code> too.</p>
<p>Let's look at what <code>redirect_to</code>, <code>url_for</code> and <code>polymorphic_url</code> does with these objects. In the case of the <code>redirect_to @post</code> call above, it inspects the <code>@post</code>
object, sees that it is an object of the <code>Post</code> class (we assume, anyway) and checks to see if that object has been persisted in a
database somewhere by calling <code>persisted?</code> on it.</p>
<p>By &quot;persisted&quot;, I mean that a Ruby object has a matching record in the database somewhere. The <code>persisted?</code> method in Active Record is implemented like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">persisted?</span>
  <span class="o">!</span><span class="p">(</span><span class="n">new_record?</span> <span class="o">||</span> <span class="n">destroyed?</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>
<p>If the object wasn't created through a call such as <code>Model.new</code> then it won't be a new record, and if it hasn't had the <code>destroy</code> method called on it won't be
destroyed either. If both of these cases are true, then that makes the object has most likely been <em>persisted</em> to the database in the form of a record.</p>
<p>If it has been persisted, then <code>url_for</code> knows that this object can be found
somewhere, and that the place it can be found is most likely under a method called <code>post_path</code>. It infers the &quot;post&quot; part of this method from the name of the model: <code>Post</code>. Rails then calls this method, and passes in whatever <code>to_param</code> on the model returns. By default, <code>to_param</code> is configured to return the <code>id</code>, but you can override this method in your model to return something else, like a permalink instead:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">to_param</span>
  <span class="n">permalink</span>
<span class="k">end</span>
</code></pre></div></div>
<p>In short, Rails is effectively building a method call like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#{@post.class.downcase}_path(@post.to_param)</span>
</code></pre></div></div>
<p>Which comes out to being this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post_path</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>
<p>And when that method is called you would get this little string:</p>
<pre><code>&quot;/posts/1&quot;
</code></pre>
<p>Lovely!</p>
<p>This is called <em>polymorphic routing</em>. You can pass an object to methods like <code>redirect_to</code>, <code>link_to</code>, <code>form_for</code> and <code>form_with</code> and Rails will
attempt to work out the correct URL of what to use.</p>
<h3 id="the-form-of-formform">The form of form_form</h3>
<p>Now, when you're coding Rails you may have used <code>form_for</code> like this a very long time ago:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="n">form_for</span> <span class="vi">@post</span><span class="p">,</span> <span class="ss">:url</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:controller</span> <span class="o">=&gt;</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="ss">:action</span> <span class="o">=&gt;</span> <span class="s2">"create"</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Of course, with advancements in Rails you could simplify it to this:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="n">form_for</span> <span class="vi">@post</span><span class="p">,</span> <span class="ss">:url</span> <span class="o">=&gt;</span> <span class="n">posts_path</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Because the form is going to default to having a <code>POST</code> HTTP method and therefore a request to <code>posts_path</code> is going to go to the
<code>create</code> action of <code>PostsController</code>, rather than the <code>index</code> action, which is what would result if it were a <code>GET</code> request.</p>
<p>But why stop there? Why not just write this?</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">form_for</span> <span class="vi">@post</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Personally, I see no reason not to... if it's something as simple as this. The <code>form_for</code> method uses <code>url_for</code> underneath, just like
<code>redirect_to</code> to work out where the form should go. It knows that the <code>@post</code> object is of the <code>Post</code> class (again, we assume) and it
checks to see if the object is persisted. If it is, then it will use <code>post_path(@post)</code>. If it's not, then <code>posts_path</code>.</p>
<p>The <code>form_for</code> method itself checks to see if the object passed in is persisted also, and if it is then it'll default to a <code>PUT</code> HTTP
method, otherwise a <code>POST</code>.</p>
<p>So this is how <code>form_for</code> can be flexible enough to have an identical syntax on both a <code>new</code> and <code>edit</code> view. It's becoming more and
more common these days for people to even put their whole <code>form_for</code> tags into a single partial and include it in both the <code>new</code> and
<code>edit</code> pages.</p>
<h3 id="a-more-complex-form">A more complex form</h3>
<p>So <code>form_for</code> is fairly simple for when you pass a normal object, but what happens if you pass an array of objects? Like this, for
instance:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">form_for</span> <span class="p">[</span><span class="vi">@post</span><span class="p">,</span> <span class="vi">@comment</span><span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>Well, both <code>url_for</code> and <code>form_for</code> have you covered there too.</p>
<p>The <code>url_for</code> method detects that this is an array and separates out each part and inspects them individually. First, what is this
<code>@post</code> thing? Well, in this case let's assume it's a <code>Post</code> instance that <em>is</em> persisted and has the id of 1. Second, what is this
<code>@comment</code> object? It's a <code>Comment</code> instance that has not yet been persisted to the database.</p>
<p>What <code>url_for</code> will do here is build up the URL helper method piece by piece by placing each part in an array, joining it into a routing method and then calling that routing method with the necessary arguments.</p>
<p>First, it knows that the <code>@post</code> object is of the <code>Post</code> class and is persisted, therefore the URL helper will begin with <code>post</code>. Second, it knows that the <code>@comment</code> object is of the <code>Comment</code> class and is <em>not</em> persisted, and therefore <code>comments</code> will follow <code>post</code> in the URL helper build. The parts that <code>url_for</code> now knows about are <code>[:post, :comments]</code>.</p>
<p>The <code>url_for</code> method combines these individual parts with an underscore, so that it becomes <code>post_comments</code> and then appends <code>_path</code>
to the end of that, resulting in <code>post_comments_path</code>. Then it passes in just the persisted objects to the call to that method, resulting in a call like this:</p>
<pre><code>post_comments_path(@post)
</code></pre>
<p>Calling that method results in this:</p>
<pre><code>&quot;/posts/1/comments&quot;
</code></pre>
<p>Best part? <code>form_for</code> will still know to use <code>POST</code> if the <code>@comment</code> object is not a persisted object, and <code>PUT</code> if it is. A good
thing to remember is that the <code>form_for</code> is always for the <em>last</em> object specified in the array. The objects prior to it are just its
nesting, nothing more.</p>
<p>The more objects that are added, the more times <code>url_for</code> will do the hard yards and build the path out... although I recommend that
you keep it to just two parts.</p>
<h3 id="a-symbolic-form">A symbolic form</h3>
<p>Now that we've covered using an array containing objects for <code>form_for</code>, let's take a look at another common use. An array containing
at least one Symbol object, like this:</p>
<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">form_for</span> <span class="p">[</span><span class="ss">:admin</span><span class="p">,</span> <span class="vi">@post</span><span class="p">,</span> <span class="vi">@comment</span><span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
</code></pre></div></div>
<p>What the <code>url_for</code> method does here is very simple. It sees that there's a <code>Symbol</code> and takes it as it is. The first part of the
<code>url</code> will simply be the same as the symbol: <code>admin</code>. The URL that <code>url_for</code> knows of at this point is just <code>[:admin]</code>.</p>
<p>Then <code>url_for</code> goes through the remaining parts of the array. In this case, let's assume both <code>@post</code> and <code>@comment</code> are persisted
and that they have the ids of 1 and 2 respectively. Same classes as before. <code>url_for</code> then adds <code>post</code> to the URL that it's building,
and <code>comment</code> too, resulting in <code>[:admin, :post, :comment]</code>.</p>
<p>Then the joining happens, resulting in a method of <code>admin_post_comment_path</code>, and because both <code>@post</code> and <code>@comment</code> are persisted here,
they're passed in, resulting in this method call:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">admin_post_comment_path</span><span class="p">(</span><span class="vi">@post</span><span class="p">,</span> <span class="vi">@comment</span><span class="p">)</span>
</code></pre></div></div>
<p>Which (usually) turns into this path:</p>
<pre><code>/admin/posts/1/comments/2
</code></pre>
<h3 id="testing-routes-in-the-rails-console">Testing routes in the Rails console</h3>
<p>Rails provides a way to test out these routes in the <code>rails console</code>, through its <code>app</code> helper.</p>
<p>If we want to test out our <code>post_path</code> helper, we can do it with this call in the <code>rails console</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">post_path</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># =&gt; /posts/1</span>
</code></pre></div></div>
<p>If we wanted to test out something more complex, like what <code>redirect_to @post</code> might return, we can invoke <code>url_for</code>:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">first</span>
<span class="n">app</span><span class="p">.</span><span class="nf">url_for</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
<span class="c1"># =&gt; /posts/1</span>
</code></pre></div></div>
<p>This will also work with an array of objects:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">first</span>
<span class="n">comment</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">first</span>
<span class="n">app</span><span class="p">.</span><span class="nf">url_for</span><span class="p">([</span><span class="n">post</span><span class="p">,</span> <span class="n">comment</span><span class="p">])</span>
<span class="c1"># =&gt; /posts/1/comments/2</span>
</code></pre></div></div>
<p>And also if we use the array with a symbol inside it:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">first</span>
<span class="n">comment</span> <span class="o">=</span> <span class="n">post</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">first</span>
<span class="n">app</span><span class="p">.</span><span class="nf">url_for</span><span class="p">([</span><span class="ss">:admin</span><span class="p">,</span> <span class="n">post</span><span class="p">,</span> <span class="n">comment</span><span class="p">])</span>
<span class="c1"># =&gt; /admin/posts/1/comments/2</span>
</code></pre></div></div>
<h3 id="working-with-weirdly-named-routes">Working with weirdly named routes</h3>
<p>If you have routes that do not match their model names within the application, then you're going to run into trouble with <code>url_for</code> and friends.</p>
<p>Let's imagine you've got routes like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resources</span> <span class="ss">:posts</span><span class="p">,</span> <span class="ss">as: :articles</span>
</code></pre></div></div>
<p>You will not be able to use things like:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">link_to</span> <span class="vi">@post</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="vi">@post</span>
</code></pre></div></div>
<p>Or:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">redirect_to</span> <span class="vi">@post</span>
</code></pre></div></div>
<p>This is because the routing helper that we will need for this is called <code>article_path</code>, and not <code>post_path</code>. The inferrence of the route from the model name will break in this particular usage of <code>link_to</code>.</p>
<p>If you are unable to change the routes themselves to correct this difference, the way around it is to use a different syntax. This one:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">link_to</span> <span class="vi">@post</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="p">[</span><span class="ss">:article</span><span class="p">,</span> <span class="ss">id: </span><span class="vi">@post</span><span class="p">.</span><span class="nf">id</span><span class="p">]</span>
</code></pre></div></div>
<p>We can test this in our console too by using <code>app.url_for</code> again:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">post</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">first</span>
<span class="n">app</span><span class="p">.</span><span class="nf">url_for</span><span class="p">([</span><span class="ss">:article</span><span class="p">,</span> <span class="ss">id: </span><span class="n">post</span><span class="p">.</span><span class="nf">id</span><span class="p">])</span>
</code></pre></div></div>
<p>The way this work is that it sees that the first element is a symbol called <code>:article</code>, and so it infers that the start of the routing helper is <code>article_</code>. Then, given that there's no more symbols, it builds a routing helper called <code>article_url</code>. The final element of the array is then passed as an argument to this method, finishing up as this method call:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">article_url</span><span class="p">(</span><span class="ss">id: </span><span class="n">post</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="conclusion">Conclusion</h3>
<p>You can use the array form of polymorphic routing with the <code>redirect_to</code>, <code>link_to</code>, <code>form_for</code> and <code>form_with</code> methods. There's probably other
methods that I'm not remembering right now that can do it too... it's generally anything in Rails that would normally take a URL.</p>
<p>There's no need to build your URLs in any Rails version greater-than 2 using hashes; that's pretty old school. If you see cases like this in your applications, attempt a refactoring!</p>
<p>Experiment with your new knowledge of polymorphic routing and use it to the best of your advantage.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Working Towards Integration Testing Duolithic Applications</title>
   <link href="http://ryanbigg.com/2018/10/integration-testing-duolithic-applications"/>
   <updated>2018-10-16T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2018/10/integration-testing-duolithic-applications</id>
   <content type="html"><![CDATA[<p>I've been revisiting <a href="https://github.com/radar/twist-v2">Twist v2</a> recently. It's my book review tool that I've rebuilt multiple times over the past 8 years. Its latest incarnation is what I'm calling a &quot;duolith&quot;: a very light Hanami backend application with a GraphQL API, and a frontend built with React and Apollo.</p>
<p>The backend and the frontend codebases are kept in separate directories in the same codebase. This allows for separation between the Ruby and JavaScript code, but also the ability to commit changes to both at the same time. The frontend knows how to communicate with the backend, but the backend is frontend-agnostic. Tomorrow I could replace it with Vue and the backend wouldn't care at all.</p>
<p>I've got pretty extensive testing for the backend, but sparse tests for the frontend. But nothing testing the connection between the two. So I've been thinking about how to write some integration tests to cover everything. In the apps I'm used to (Rails ones), I'd just drop some tests into <code>spec/features</code> and it would Just Work™ because that's what Rails is good at.</p>
<p>But this time I've made my life (intentionally) harder by separating the codebases, with the intention over the long-term being that these two codebases are easy to navigate due to their clean separations. The time between re-visiting this app can be months, so it's important that it's easy to grok again once I come back to it.</p>
<hr />
<p>Integration testing though is an interesting problem. I know I need some sort of test harness that boots a database, the backend app and the frontend app and then runs some tests over it? But how would I do that?</p>
<p>But then there's an added complication: for each test I need to setup specific data to test it. And that data should be included in the test itself, so it's easy to find what's relevant to this particular test.</p>
<p>To start with, I tried creating a completely separate thing called <code>integration</code> at the top-level of this repository, but ran into issues with how to setup the data cleanly. I wanted classes from the <code>backend</code> application, but in <code>integration</code> they weren't there.</p>
<p>So I tried another tack: putting the integration tests in the <code>backend</code> application. This instantly meant that I could access classes to create data for my tests. I could then also rely on the RSpec suite of tests that were already there, extending it a little further.</p>
<p>I've been <a href="https://github.com/radar/twist-v2/blob/integration-tests/docker-compose.yml">looking into Docker Compose</a> for just this and it seems to be working. I can start up:</p>
<ul>
<li>A database</li>
<li>Migrations (to create the tables)</li>
<li>Frontend application</li>
<li>Backend application</li>
<li>Feature tests</li>
</ul>
<p>And then it run those tests in an &quot;integration test environment&quot;.</p>
<p>I've got a work-in-progress branch that I wanted to share here: <a href="https://github.com/radar/twist-v2/tree/integration-tests">twist-v2 @ integration-tests</a>. You can start following along at <code>docker-compose.yml</code> to see how things are piecing together. Take a look at <code>backend/Dockerfile</code> and <code>frontend/Dockerfile</code> too.</p>
<p>Now that I have something working, I can be more confident that this application is working as I intend it to.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Junior Engineering Program: Resources</title>
   <link href="http://ryanbigg.com/2018/08/junior-engineering-program-resources"/>
   <updated>2018-08-29T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2018/08/junior-engineering-program-resources</id>
   <content type="html"><![CDATA[<p>This post is part of a series of posts about the first cohort of the Culture Amp Junior Engineering Program (JEP). You can read the first two posts here:</p>
<ul>
<li><a href="https://ryanbigg.com/2018/08/junior-engineering-program-launch">Junior Engineering Program: Launch</a></li>
<li><a href="https://ryanbigg.com/2018/08/junior-engineering-program-onboarding">Junior Engineering Program: Onboarding</a></li>
</ul>
<p>In the last post I covered the process of what we did in the weeks immediately following the juniors starting, but didn't talk too much about what we taught them during those or subsequent weeks. That is what this post is going to talk about: what we taught our juniors over the 26 weeks of the Junior Engineering Program.</p>
<p>In the first post, I briefly rattled off some tech that we used:</p>
<blockquote>
<p>The juniors learned how to work effectively in teams and amongst themselves, as well as learning about /Ruby, PostgreSQL, Mongo, Rails, JavaScript, Flow, React, JSON APIs and GraphQL/, all within 6 months time.</p>
</blockquote>
<p>This would seem to imply a logical progression from Ruby to PostgreSQL to Mongo and so on. Things were not quite done that way. At the start of the program, I had pre-planned the first 7 weeks of work. In hindsight, this planning was excessive.</p>
<p>At the start of most JEP weeks, we had a retrospective session where we discussed the previous week's work, and what we would like to do in the coming weeks. This really influenced what was taught throughout the program and provided a better structure than one I could've come up with myself. Often, the JEP cohort would be the one deciding what we would learn next time, not me.</p>
<h2 id="part-1-git-github--ruby-weeks-1-5">Part 1: Git, GitHub + Ruby (Weeks 1-5)</h2>
<p>In this first part, we covered Git + GitHub and Ruby.</p>
<p>For the Git + GitHub sessions, the juniors wrote some &quot;user manuals&quot;, telling us about themselves. They then had to commit these manuals to a git branch and submit a pull request to merge that into the master branch. Other juniors would then review that PR. This was designed to get them familiar with git branching, merging and the GitHub pull request / review cycle.</p>
<p>For the remainder of this part, we focussed on Ruby skills. We covered some Exercism and Advent of Code Exercises. I think these exercises are a great tool to practice Ruby with. When working on these exercises, we introduced the concept of &quot;mob programming&quot;, where one junior would write code for 5 minutes while the other juniors told them what to type. Once the 5 minutes was up, another junior would take over. This was good practice working well together in a group.</p>
<p>We also worked on modelling a small Ruby application that had a similar data model as our big Rails application. Alongside this small application, I taught them about <a href="https://github.com/radar/guides/blob/master/code-organisation.md">code organisation within a Ruby application</a> and how to write RSpec tests from scratch.</p>
<p>During the writing of this application, I showed examples of two of my favourite design principles: the Single Responsibility Principle and the Law of Demeter. Code was written to intentionally violate these design principles, and then the code was refactored to use them. I think this demonstration went well.</p>
<h2 id="part-2-v1-rails-weeks-6-8">Part 2, v1: Rails (Weeks 6-8)</h2>
<p>And then I tried teaching them Rails. The goal here was for the juniors to build a link shortener application, which is more complicated than it sounds.</p>
<p>I'll cover more about this in the &quot;Lessons Learned&quot; section at the end, but one does not simply teach Rails to juniors straight after teaching them Ruby. I realised this after some of my juniors asked &quot;What does this <code>SELECT * FROM</code> thing mean in the output?&quot;. It became pretty clear to me that I had completely ignored that the juniors didn't know about databases yet.</p>
<p>We started working on this Rails application, using RSpec &amp; Capybara to test it. We got as far as building out the initial CRUD implementation of this app, but really the juniors needed to know more about databases before they could work effectively in a Rails application.</p>
<h2 id="part-2-v2-databases-weeks-9-13">Part 2: v2: Databases (Weeks 9-13)</h2>
<p>And so I spent a few weeks teaching them about databases. Because our link shortener Rails application was using a relational database to start with, we started learning about PostgreSQL (Week 9).</p>
<p>In these weeks, we covered how to insert, select, update and delete records from a table, how to join multiple tables together and about <a href="https://en.wikipedia.org/wiki/Database_normalization">database normalization</a>.</p>
<p>At Culture Amp we also use MongoDB, and so we spent two weeks covering the same sorts of actions as above, but with that database instead.  We also covered some more esoteric knowledge, like the <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline/">MongoDB Aggregation Pipeline</a>.</p>
<h2 id="part-3-rails-week-14">Part 3: Rails (Week 14)</h2>
<p>Once we had worked on databases for a few weeks, we came back to the link shortener Rails application. The juniors finished off their CRUD implementations, and began work on adding user authentication and a JSON API to this application.</p>
<h2 id="part-4-the-rails-exam-week-15">Part 4: The Rails Exam (Week 15)</h2>
<p>Once the juniors had built out this application, we then gave them an exam to test their knowledge of Rails applications. <a href="https://github.com/cultureamp/jep/tree/master/week15">This exam</a> involved building a small CRUD application from scratch, using all the skills that they had learned in the proceeding weeks. The juniors had an entire week to complete this exam. There was to be no &quot;pass&quot; or &quot;fail&quot; in this exam; it was just to provide some insight into where the juniors were at when it came to Rails.</p>
<p>The following week I spent marking these exams, again using a rubric that I had devised. I spent a lot of this week talking to the juniors about their results. I covered things like what they might've missed, ways to write cleaner code and more. To say more would be to give away a few of the &quot;answers&quot;.</p>
<h2 id="part-5-javascript--react--apis-weeks-16-18">Part 5: JavaScript / React / APIs (Weeks 16-18)</h2>
<p>We rounded off the program by teaching the juniors about JavaScript, React, and APIs.</p>
<p>This part was kicked off by one of our Senior JavaScript Engineers, Sam Margalit. He ran two days of JEP, teaching the foundations of JavaScript, Flow and React in that time.</p>
<p>The juniors then learned how to integrate their React applications with the Rails app that they had built. This was done first by building and using a JSON API that they built within the Rails application, and then later on by an equivalent GraphQL API.</p>
<h2 id="lessons-learned">Lessons Learned</h2>
<p>Planning the JEP course was remarkably hard and I have newfound respect for teachers who do this sort of curriculum planning thing year-round.</p>
<h3 id="better-explanations--walkthroughs">Better explanations / walkthroughs</h3>
<p>What I found with a lot of the material for juniors, especially when it was <em>brand new</em> to them, was that in order to learn they needed more than just the code itself. While it's intuitive <em>to me</em> to read code top-to-bottom and (usually) understand it first-pass, it is not the case for juniors. Writing code is  the same.</p>
<p>For this, I would involve more pseudocode and step-by-step walkthroughs of what the code should be doing in order to accomplish a particular goal. A few weeks in it was brought up by a junior that the simple task of me writing the steps of a short program on the whiteboard really helped them understand the order of what the program was doing. I think a good term for this sort of thing is &quot;chunking&quot; -- breaking problems down into their smallest pieces. We'll focus a lot on this next JEP.</p>
<p>Along the same lines, I would like to do more practice of walking through code to track how something is defined and then used throughout a Rails codebase. As an example: how would a junior know how to find how a field is displayed on a particular page, if they only knew the route and the value of the field? How would they even <em>begin</em> to debug that sort of thing? More practice is required here also.</p>
<h3 id="more-focus-on-fundamentals">More focus on fundamentals</h3>
<p>What might've helped here also is more practice around the fundamentals. Just how does it all work when you type in <code>http://localhost:3000</code> into your browser and hit enter? What is a HTTP request? What's HTTP? What's a port? What's DNS? What's TCP?</p>
<p>I don't mean to say that there needs to be a whole <em>week</em> dedicated to each of these things, but at least covering them in a light amount of detail would be a good start. We definitely missed doing this at the start of the JEP and the next time around I will do this as these are the real fundamental concepts of every web application.</p>
<h3 id="databases-embeforeem-rails">Databases <em>before</em> Rails</h3>
<p>And now for the big regret: I hinted at this earlier on, but teaching Rails <em>immediately</em> after Ruby was... well, it was one of those &quot;what was I thinking?&quot; moments. The &quot;M(odel)&quot; of Rails applications is thing that underpins it all; if there is no data (no models) within a Rails application, what's the point? Teaching databases <em>first</em> is vital.</p>
<p>Juniors must have at least an understanding of how to query databases, and perhaps also an understanding of how to model them in the first place in order to work effectively within applications that are backed by a database.</p>
<p>I would like to spend more time earlier on in the course teaching them about MVC <em>after</em> Ruby but before even talking about Rails. I want to spend time teaching them about models and what they provide, and then about views and what they do and wrap it up with how controllers bring the two together. No Rails course or book out there that I know of introduces MVC <em>slowly</em> like this, but I think it is certainly required.</p>
<h3 id="flip-it-and-reverse-it">Flip it and reverse it</h3>
<p>Last time, we taught in roughly this (simplified) order:</p>
<ol>
<li>Ruby</li>
<li>Databases</li>
<li>Rails</li>
<li>APIs</li>
<li>JavaScript</li>
<li>React</li>
</ol>
<p>After our experiences with the JEP last time and talking about the structure of the next JEP with other people, I'm now convinced that this order was backwards.</p>
<p>We should be starting at the browser and then working back from there. The whole reason why we'd use Ruby to run Rails to serve an API that React reads from is so that we would see something in the browser! So I think rendering stuff in the browser <em>first</em> is a better approach.</p>
<p>This means that I would teach roughly in this order next time:</p>
<ol>
<li>HTML / CSS / JavaScript</li>
<li>React</li>
<li>APIs</li>
<li>Ruby / Sinatra</li>
<li>Databases</li>
<li>...</li>
</ol>
<p>The browser is the entry point for most requests. To understand why you need Ruby to build a web <em>thing</em>, you first need to realise what a web <em>thing</em> looks like. We could start with building a static site and then slowly make it more dynamic by bringing in things like React, external APIs, etc.</p>
<p>To work with browser tech there's sites like <a href="codepen.io">Codepen</a> and <a href="stackblitz.com">StackBlitz</a> that have zero-setup required. This means that we'll have a smoother time jumping into things too.</p>
<p>I'm glad that I get to experiment with the JEP structure like this and I really look forward to seeing what comes out of this browsers-first experiment.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Junior Engineering Program: Onboarding</title>
   <link href="http://ryanbigg.com/2018/08/junior-engineering-program-onboarding"/>
   <updated>2018-08-28T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2018/08/junior-engineering-program-onboarding</id>
   <content type="html"><![CDATA[<p>This post is part of a series of posts about the first iteration of the Culture Amp Junior Engineering Program (JEP). You can read <a href="https://ryanbigg.com/2018/08/junior-engineering-program-launch">the first post here</a>.</p>
<p>In the last post, I covered how we launched the Junior Engineering Program at Culture Amp, all the way up to formally hiring the juniors.</p>
<p>In this post, I'm going to cover what we did to make sure the juniors were successful when they arrived. First of all, we needed to be prepared!</p>
<h2 id="preparing-for-the-juniors">Preparing for the juniors</h2>
<p>First impressions matter.</p>
<p>At Culture Amp, our onboarding process is thoughtfully designed to slowly ease new people into their time with us. You can choose custom equipment if you like, and you'll get a wonderful welcome package on your first day, some of which is pictured here:</p>
<p><img src="/images/jep/onboarding.jpg" alt="Welcome package" /></p>
<p>Alongside these things, they also get some Culture Amp swag, as any good tech [ex-]startup would give their employees on their first day.</p>
<p>We also spent this time getting the teams ready to bring on a junior by talking with them about what would be required and answering any questions they had about the process.</p>
<h2 id="the-first-day">The first day</h2>
<p>As I said before: first impressions really matter. This is <em>especially</em> the case for juniors who may not have worked in a development job before. The last thing we want to do is to scare them away from the tech industry completely.</p>
<p>On the first day, juniors had a lovely late start at 10am instead of the regular 9am. I greeted them at the door and led them to their first induction session where they setup their computers, all new MacBook Pros.</p>
<p>This process was led by our People and Experience crew, Ginny Fry, Thang Ngo and one of our IT admins, James Smith. Even though this session was two-hours long, there was still more to setup.</p>
<p>But before that happened, we all went out for a big JEP lunch at Tahini Diner! Here's our juniors enjoying that lunch:</p>
<p><img src="/images/jep/team-lunch.jpg" alt="Team Lunch" /></p>
<p><em>Left-to-right: Lauren Hennessy, Angel Peña Ruiz, Rebecca Vo, Julie Huang, Namibia Lebron-Torres, Ramya Ravindranath, Jasmine Ellis, Jaime Terreu.</em></p>
<p>[aside] You may notice here that there are <em>eight</em> people around the table instead of <em>five</em>. Lauren, Angel and Ramya were all working at Culture Amp as juniors before the JEP started, but they chose to be a part of the program too to boost their skills. We call these people our &quot;super juniors&quot; because they had a head-start on the rest.</p>
<p>This was a great moment for all the juniors to spend some more time to get to know each other.</p>
<h2 id="the-first-week">The first week</h2>
<p>We ran our first couple of JEP sessions that week on Tuesday and Wednesday. The first session focussed on Command Line Tips &amp; Tricks. Things like:</p>
<ul>
<li>A few common command-line utils. Some examples: <code>ls</code>, <code>mkdir</code> and <code>touch</code>.</li>
<li>Using the <code>git</code> command to stage, commit and push files to a repository</li>
<li>Using <a href="https://github.com/rupa/z">z</a> to quickly navigate to a directory</li>
<li>Using <a href="https://github.com/junegunn/fzf">fzf</a> to recall commands or to find files in the current directory</li>
</ul>
<p>We chose to focus on the command-line first as its the thing that developers use the most. Learning how to be productive in the command-line is important.</p>
<p>Our second session covered Git in more detail, GitHub and Pull Requests.</p>
<p>For the Git exercise, we had the juniors write up &quot;User Manuals&quot; for themselves, which involved them filling out answers to some questions and sharing them with the group. These questions ranged from &quot;What does your perfect working day look like?&quot; to &quot;How do you take your coffee / tea / other hot beverage?&quot;. The juniors would then submit these answers as a pull request to a &quot;user manual&quot; repository, where they would then have to get a &quot;review&quot; from one of the other juniors. This was to be the first taste of the GitHub pull request review experience.</p>
<p>The idea behind this exercise was that it wasn't a pull request modifying an existing bit of code or document. It was something that was entirely unique to the junior that they could attend to and improve upon. We'll definitely do this again next time.</p>
<p>On the Thursday and Friday of that week, the juniors spent time finishing their user manuals as well as spending <em>a lot</em> of time configuring their editor and terminal setups exactly how they wanted them to be.</p>
<p>This was also to be their first introduction to the people on their teams, with all but two of the juniors going to separate teams. The teams held <em>another</em> team lunch for each of the juniors within this first week, which was a good way for the team to get to know who they'd just hired.</p>
<p>On the Friday we had <em>yet another</em> welcome lunch, this time in the office to welcome all new five starters. Everyone from the Melbourne office came along. This was a good way for our juniors to meet everyone who they could work with in the office and was another way for us to make them feel welcome.</p>
<p>The goal of this entire week was to leave the juniors with an <em>excellent</em> first impression of what it is like working at Culture Amp and I think we did a great job of that.</p>
<h2 id="the-first-few-weeks-structure">The first few weeks' structure</h2>
<p>During the first weeks of the JEP, we split the week between the JEP and &quot;team time&quot;, with the juniors spending Monday and Tuesday working on the JEP, and Wednesday, Thursday and Friday working with their teams. This was designed to give the juniors two days worth of time 100% dedicated to learning, but still give them that valuable work experience that they wouldn't get if they were studying at university, or in a code academy.</p>
<p>We would start our Mondays with a retro that talked about how the previous week went: what we loved, what didn't go so well, what we wanted to learn and anything that puzzled us. This was a great way to start the week and often the juniors made some suggestions about what they wanted to learn next. We then adapted the program to suit where they wanted to go.</p>
<p>For the remainder of Monday, we'd cover a particular facet of development, and then assign the juniors &quot;homework&quot; to do for the remainder of the day. They would then have <em>all</em> of Tuesday to work on that homework, and then whatever time they found throughout the rest of the week to do it.</p>
<p>On Wednesday, Thursday and Friday, they worked closely with their teams to learn the ropes about how work gets done at Culture Amp. The juniors learned about our very large Rails application. To introduce the juniors to the code, we gave them some small Trello cards to do. These tasks involved things as small as changing the text on some buttons, up to fixing a bug involving several different parts of the application. We wanted to get them some quick wins on the board so that they would feel like productive members of the team.</p>
<p>The juniors would pair with more senior developers to learn how to accomplish these tasks, with the hard-and-fast rule that the junior must be the one driving the computer as much as possible. We spent this a lot of this initial time explaining the &quot;whys&quot; of the work to help the junior understand why the work was meaningful. Rather than simply telling the junior what to type all the time, we would often ask them questions like &quot;why do you think this bug is happening?&quot; to help them practice their critical reasoning skills with the codebase.</p>
<h2 id="switching-to-a-3-week-cadence">Switching to a 3-week cadence</h2>
<p>At about the 10 week mark of the program, we realised that splitting the week up in 2 days for JEP and 3 days for the team was the wrong decision to make. Splitting it up this way meant that juniors would have a &quot;split-brain&quot; between the JEP and their team work, and also that teams would not be able to prioritise meaningful work for their juniors.</p>
<p>After some discussions with our leadership at Culture Amp, it was decided that we would switch to a 3-week cadence: 1 week with the JEP, and 2 weeks with the team. This worked so much better! Juniors were able to devote more of their attention to the work they were doing in JEP, and teams were able to give the juniors meaningful work.</p>
<p>This worked so well that we'll be doing this for the next program from the first day too.</p>
<h2 id="supporting-the-juniors">Supporting the Juniors</h2>
<p>Supporting juniors is absolutely critical. Having them do homework or teamwork is never supposed to be the &quot;be-all and end-all&quot; of any junior's life. What they need is someone there that can provide them with long-term career / life support because being a junior is <em>hard</em>, especially when you're &quot;surrounded&quot; by people who you can see are better than you.</p>
<p>When anyone starts at Culture Amp, they're assigned to a Mentor. This person is typically <em>not</em> their direct boss, but someone from a different team that can provide the new hire with some career, tech or life advice when it's asked for.</p>
<p>Our juniors were no different. They were paired up with one of our Mentors from the very first week. They were told that they could go to these people and ask them for help whenever they wished. It was the Mentor's job to ensure that the junior felt encouraged and supported at Culture Amp.</p>
<p>I should also mention about the &quot;CAmp buddy&quot; program too. Everyone who starts is <em>also</em> assigned a &quot;CAmp buddy&quot; who helps answer questions like where to find things around the office, where the best lunch options are, and who's who within the office. Our juniors were all paired up with one of these too.</p>
<p>This also meant that the juniors had four points of contact for potential support at Culture Amp:</p>
<ul>
<li>Their mentor</li>
<li>Their CAmp buddy</li>
<li>Their direct team lead</li>
<li>Me as the Junior Engineering Program Lead</li>
</ul>
<p>This support net is designed to ensure that every person who joins Culture Amp is tremendously well supported. Having this support for our juniors meant that we provided a fostering and welcoming environment.</p>
<p>We wanted not just their first week, but their &quot;life&quot; at Culture Amp to be one where they were supported and encouraged to grow in their capabilities. We felt like this is the way to set juniors off on the right foot in terms of their career progression.</p>
<h2 id="lessons-learned">Lessons learned</h2>
<p>Culture Amp's onboarding process has been consistently worked on, as we improve it each time we onboard someone. Giving our juniors their &quot;equipment&quot; on the first day and all the introductions were a great thing to do. Equipment, introduction and support-wise I think we're doing a great job.</p>
<p>One area that we could work on improving here is making it clearer what their responsibilities are as a junior. At Culture Amp, these juniors all joined teams that were senior-heavy. On those teams, the seniors have a high output of quality work and as a junior it can be super intimidating -- when a senior completes four cards in the time it takes you to get through half of one (or less).</p>
<p>During the first few weeks, I heard from <em>almost all of my juniors</em> about this particular feeling of inadequacy quite a lot.  While I think this is a natural part of being a junior at any company, I would love to spend more time with the next batch of juniors talking about this. I would really reenforce that their job is to <em>learn</em> and if that's all they're doing then that's <em>perfectly okay</em>. They don't have to fix bugs from Day 1 or even Week 1. More communication around this is essential next time. I did outline this once at the start, but a constant communication of this idea is required.</p>
<p>Along these same lines, I would hope to speak with the juniors' team leads more next time to ensure that there's no or very little pressure coming from them to get work done. I think I didn't communicate quite enough with them about that part either. Having the juniors hear from the team leads about this attitude of &quot;your job is to <em>learn</em>&quot; would probably help the next batch too. The way to fix this would be to have a big chat with the junior's team -- including the junior too -- and to very clearly outline expectations there.</p>
<hr />
<p>In the next post, I'll cover the resources that we used to teach the juniors now that they were working at Culture Amp.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Junior Engineering Program: Launch</title>
   <link href="http://ryanbigg.com/2018/08/junior-engineering-program-launch"/>
   <updated>2018-08-27T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2018/08/junior-engineering-program-launch</id>
   <content type="html"><![CDATA[<p>Over the last year, a lot of my time has gone into developing and running a Junior Engineering Program at Culture Amp. This program ran for a total of 6 months, but the preparation took a bit longer.</p>
<p>Within this program, we taught 10 junior developers the fundamentals of programming. The juniors learned how to work effectively in teams and amongst themselves, as well as learning about Ruby, PostgreSQL, Mongo, Rails, JavaScript, Flow, React, JSON APIs and GraphQL, all within 6 months time. Our target was for the juniors to become &quot;confident and capable engineers&quot; and we have succeeded in that target. They're now super-powered juniors!</p>
<p>In this post, I'm going to cover how we launched the Junior Engineering Program at Culture Amp.</p>
<p>In subsequent posts, I'll go into more detail about the onboarding process, as well as the resources and techniques that we used to teach the juniors.</p>
<h2 id="getting-started">Getting Started</h2>
<p>I've been mentoring junior developers for close to a decade. I do it because I have always got a thrill out of the “lightbulb moments” that happen when I’m doing that mentoring.</p>
<p>In April of 2017, Culture Amp had an internal &quot;Hackathon&quot; and one of the ideas to come out of that was a &quot;Graduate Developer Program&quot;. This ignited the interest in the company of running a structured program where we would hire more junior developers and provide structured training to the juniors that we already had, as well as providing the same training to the new juniors.</p>
<p>The idea was not immediately implemented after the Hackathon, but nevertheless the conversation continued for a couple of months and it picked up steam. I talked with a lot of people at Culture Amp about running a program, and a few months later it was decided that we would hire somewhere between 2-4 junior developers and launch this program.</p>
<p>Around about the same time, <a href="https://hooroo.com">Hooroo</a> was working on launching their own Graduate Developer Program. I had a couple of great chats with Elle Meredith and Stu Liston from that program which influenced parts of what I did with Culture Amp's program. I'm grateful to them for those talks.</p>
<h2 id="advertising">Advertising</h2>
<p>We didn't exactly have a pool of junior developers who we could call up and ask if they wanted to apply for a job opening, and so we had to advertise these new positions.</p>
<p>We created a small landing page for this purpose:</p>
<p><img src="/images/jep/launch.png" alt="JEP Launch Page" /></p>
<p>We advertised this page through out social networks, and by word of mouth. Within the first week we received 50 applications. By the cut-off date of August 25th, 3 weeks later, we had received 129 applications. Quite a few of those were on the very last day!</p>
<p>We quickly realised that we had a <em>mountain</em> of work to do. We had to filter down all these candidates to just a small handful.</p>
<h2 id="resume-screening">Resume Screening</h2>
<p>We read every single resume that was submitted to us, which took an extremely long time, but was well worth the investment.</p>
<p>What we were looking for was an interest in programming, and perhaps some examples of some development work that had been done. Even toy projects were good to see! It didn't have to be Ruby. We liked seeing anything in Ruby, JavaScript or even some HTML + CSS work.</p>
<p>Outside of the tech sphere, any work done within a team setting at another workplace was also seen as a big plus.</p>
<h2 id="the-initial-interview">The Initial Interview</h2>
<p>While the applications were open, we started our initial interview process. This was a quick 30 minute chat over Zoom with all the candidates who applied, just to see who they were and what their interests were. 104 candidates got through to this stage.</p>
<p>We tried to call as many of the candidates as possible to speak to them for this initial interview.  We ran into some problems getting in touch with some candidates after they applied: we couldn't contact them via email, or phone. This meant that some of the candidates missed out!</p>
<p>This initial interview went well: the best candidates felt like the ones we could talk to for much longer than half an hour!</p>
<p>This whole process took about two work weeks for two of us (Thang Ngo and myself) in our booths calling candidates. It was exhausting work, but when a great candidate came along it really sparked me back up.</p>
<p>Some candidates did not pass this initial interview. They did not have any prior experience with programming -- and we were definitely looking for this. We also liked hearing about those who had done some Ruby, but that wasn't as strict a requirement as programming in general. But this was a pretty low bar. We could've improved this part of the process by being stricter about our requirements.</p>
<p>Candidates that &quot;passed&quot; the initial interview were sent a coding test.</p>
<h2 id="coding-test">Coding Test</h2>
<p>We purpose-built a new coding test for juniors that applied through this program after realising our existing coding test would be too hard for juniors. This test required juniors to demonstrate an understanding of working with fundamental features of Ruby. I'm going to leave that description intentionally vague, as I'm probably going to re-use some ideas from that test in the next version.</p>
<p>The test was split into 6 different &quot;sections&quot;, which had an increasing grade of difficulty per section, with the final section being just that little bit harder than the previous 5. This last section contained problems that we'd expect most juniors to struggle with, but it was put in the coding test to be that little bit of an extra challenge.</p>
<p>Out of the candidates that received this coding test, 69 of them sent it back to us within two weeks for a review, meaning only half of the candidates made it this far.</p>
<h2 id="coding-test-feedback">Coding Test Feedback</h2>
<p>I gave a talk at <a href="https://www.youtube.com/watch?v=DiYjDHKSH-Q">Melbourne Ruby in October on &quot;Designing the Perfect Coding Test&quot;</a>)  where I cover more about this coding test, but here's a quick summary.</p>
<p>When building the coding test, we also built a rubric with information on what a &quot;good&quot; submission would look like, the kinds of things we cared about and what we'd forgive.</p>
<p>In this coding test, we cared <em>a lot</em> about the cleanliness of the Ruby code submitted and ran <a href="https://github.com/bbatsov/rubocop/">Rubocop</a> with a custom configuration -- as Rubocop's default rules are a little <em>too</em> pedantic. We ran Rubocop over the code to determine if the code complied with Ruby style guide best practices.</p>
<p>As an example of something we didn't care too much about: if someone used <code>collect</code> instead of <code>map</code>, we didn't mind. The same goes for <code>find</code> instead of <code>detect</code>. These methods function the same, and it's OK if a junior only knew one and not the other.</p>
<p>We had a team of reviewers to review these tests, to ensure there was no bias in the reviewing process. These reviewers built feedback by reading the coding test and checking it against our rubric.</p>
<p>Reviewing a single coding test took me about 30 minutes on average, and I reviewed about 50 of the coding tests. This required about 30 hours split between two work weeks and a lot of patience.</p>
<p>We decided that we would send the feedback to the candidates after we reviewed the coding test. We wanted to give juniors Actionable, Specific and Kind (A.S.K.) feedback on their coding test so that they could know how to improve for the future. We consider this an investment in the future potential of the juniors.</p>
<p>This feedback included suggested ways of writing code, similar to the sort of comments we might leave on a GitHub Pull Request. It also included recommended reading if we thought there could be something out there that might help the juniors learn.</p>
<p>The juniors were incredibly grateful for the feedback that they received. Here's some of the feedback on the feedback we received:</p>
<ul>
<li>The feedback provided is very valuable information which will help me improve for future interviews.</li>
<li>I wanted to say thank you for the detailed feedback that was supplied for the coding challenge.</li>
<li>Thank you for the feedback. I feel like I've already learned a lot from it.</li>
</ul>
<p>This was really heartwarming meta-feedback to receive from the juniors and we will definitely be doing this again next time.</p>
<h2 id="the-social-and-tech-interviews">The Social and Tech Interviews</h2>
<p>I would say that more than 50% of the juniors that submitted the coding test &quot;passed&quot; the coding test; roughly 35 candidates by this stage were, according to what we were looking for, suitable for the junior position. But we only still had 3 positions to fill!</p>
<p>The next stage of the process was to be a two-interview process where we would bring the candidates into the office. We closely reviewed the best coding tests again and chose the group that would proceed through to the next stage. It ended up that just 16 of our candidates reached the 3rd stage of our interview process, or about 12.5% of our initial applicant pool.</p>
<p>This stage comprised of two interviews: a social interview and a technical interview.</p>
<h3 id="the-social-interview">The Social Interview</h3>
<p>The first interview was an hour-long &quot;social&quot; interview, where we got to know the candidate a bit more. We endeavoured to have a diverse group of interviewers, with a mix of genders and people from different teams doing the interviewing.</p>
<p>In this social interview, We asked harder questions than the &quot;initial interview&quot; to gauge how enthusiastic the candidates were, talked about examples of their teamwork in the past, and asked them how they'd like to grow. This was a great opportunity to get to know our candidates a lot better.</p>
<p>We had this interview as a part of our process as we wanted to hire <em>socially</em> brilliant juniors, not just <em>technically</em> brilliant ones.</p>
<p>The people who were successful in this interview were those who were the most outgoing, excited and eager people. They could hold a friendly chat with our interviewers for half an hour with ease and enthusiasm.</p>
<h3 id="the-tech-interview">The Tech Interview</h3>
<p>The second interview was another hour-long interview, this time focussing on the candidate's tech skills. This was also done by two people of mixed genders from the engineering team.  We started with a gentle introduction containing a couple of tech questions to gauge how well the candidate could speak about their knowledge.</p>
<p>In the 2nd part of this interview, we asked the candidates to expand on their own coding submissions, using their own tests and code.</p>
<p>We emphasised at this point that the candidate didn't need to complete this part of the coding test. In fact, the task we set in this coding test was designed to be unable to be accomplished in the 30 minutes we allowed for it. Or so we thought! There were a small handful of juniors who did manage to get through it, and that was impressive.</p>
<p>As I said before: we didn't care about completion though. We cared more about these things:</p>
<ul>
<li>Could the candidate explain their thought process well?</li>
<li>Could they ask for help when they got stuck?</li>
<li>Would they approach the problem by writing tests first, and then the code?</li>
</ul>
<p>The first two things here are critically important skills for a junior developer to have, and not just because they're well-aligned with Culture Amp's value of &quot;have the courage to be vulnerable&quot;.</p>
<p>It's because a junior developer who can explain their thought process well gets practice explaining their technical thinking to other people, which is an excellent skill to have as a developer. Asking for help when stuck shows that the junior can easily reach a point of being comfortable to ask others for help. As a junior, there's going to be <em>a lot</em> of times where you don't know something. Asking questions to get answers to figure stuff out is a lot of what a great junior will do.</p>
<p>The final one was not as cared for as the first two, but more of an interesting artefact: has the junior practiced TDD / BDD before? We check for this at Culture Amp because all the work our developers do is tested in this way. We didn't really care about the <em>style</em> or framework of the tests, just more if they would write them or not. Writing tests is a great habit to be in. It makes you think more about the code you're writing and allows you to check your assumptions in an automated fashion.</p>
<h2 id="picking-the-final-candidates">Picking the final candidates</h2>
<p>By the end of the interview process we had more candidates that we loved than we had open roles. We went back to the teams and had some intense conversations, and ended up finding two more teams willing to take on a junior, bringing it up to 5 juniors that we could hire.</p>
<p>We hired our top 5 candidates, from the 16 that we brought in for interviews, and out of the 129 that initially applied. These were the &quot;top 4%&quot; of all candidates that applied. Another interesting tidbit is this: Out of these top 5, 4 were women. Women tended to grade higher on <em>both</em> the social and technical tests than the men.</p>
<h2 id="founder-interview">Founder interview</h2>
<p>For every candidate that goes through any Culture Amp interview process, they go through one final stage at the end: the Founder Interview. This isn't a &quot;pass or fail&quot; type of interview. It's more of a chat with one of our founders where the founders get to meet the candidates that the rest of us have decided are good enough to hire.</p>
<p>After this founder interview, contracts were issued and signed. We had 5 new juniors about to start!</p>
<h2 id="lessons-learned">Lessons learned</h2>
<p>No process of hiring is ever perfect and what works for one person or company will not work for all.</p>
<p>We had 104 people pass our initial resume screening, which meant that they went through to the &quot;initial phone interview&quot; phase. This is a lot of people to call!</p>
<p>To speed this up next time, we're going to try something different at the start of the hiring funnel: we'll send the junior developers the coding test directly after the resume screening point. In place of the initial chat, we'll be running a few &quot;open house&quot; events so that the juniors can come in and tour our office.</p>
<p>We will also be altering the coding test to provide some more room at the top-end of skill. Grading the <em>really good</em> coding tests was difficult because there wasn't much to differentiate them on. After now mentoring a group of juniors, we now have a better idea of what where we'd expect their skill level to be at from the outset and we'll adjust our coding test accordingly. This isn't to say we'll make it <em>drastically harder</em> -- that would just be mean! -- more like we'll just test for slightly different things.</p>
<p><em>Thanks to Rebecca Skinner, Kim Dowling, David Carlin and Jo Cranford for reviewing this post.</em></p>
<hr />
<p>In the next post, I'll cover how we brought these juniors into Culture Amp through our onboarding process.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Culture Amp Junior Engineering Program: Retrospective</title>
   <link href="http://ryanbigg.com/2018/08/culture-amp-junior-engineering-program-retrospective"/>
   <updated>2018-08-27T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2018/08/culture-amp-junior-engineering-program-retrospective</id>
   <content type="html"><![CDATA[<p>This post is a short summary of the <a href="https://cultureamp.com">Culture Amp</a> Junior Engineering Program (JEP) that I ran from November last year until June this year.</p>
<p>If you're keen to apply for the 2nd cohort then you can do that here:</p>
<p><strong><a href="https://boards.greenhouse.io/cultureamp/jobs/1295735">Apply here for the Culture Amp Junior Engineering Program's second cohort</a></strong></p>
<p>This post is the first in a series of four blog posts which will go into detail about how the last JEP operated, with the aim of giving potential future cohort applicants and the general public a taste of what a Culture Amp JEP looks like.</p>
<h2 id="our-first-junior-engineering-program">Our first Junior Engineering Program</h2>
<p>Culture Amp spun up our first Junior Engineering Program in November of 2017. It ran for 6 months, and we trained 10 junior engineers on the skills they needed to be confident and capable engineers who could work on a mixture of backend and frontend applications.</p>
<p>We started this program because we think it is vital to provide a way into the programming community for newcomers. New people bring fresh ideas, and proper training ensures the longevity of our community and engineering practices by providing a steady stream of people ready to become the next generation of engineers.
Training up junior engineers is also a great way for our more experienced engineers to practice their craft too. By explaining things to new people, our engineers get to practice understanding their own thoughts, code, and processes.</p>
<p>At Culture Amp we want to provide an entry path for newcomers and we want our existing engineers to practice explaining and teaching their skills too. These are the two main reasons why we started the Culture Amp Junior Engineering Program.</p>
<h2 id="recruitment">Recruitment</h2>
<p>After opening applications for the first program, we were blown away by the quality (and quantity!) of the applications we received.</p>
<p>We talked with most of the people who applied, gave them a junior-friendly coding test to work on, and if they passed that then we brought them in for a few more interviews too. It was a long process, but very worthwhile. We got some pretty amazing junior engineers out of it.</p>
<p>We worked hard on making our interview process as fair as possible by providing a set list of questions for all interviews and by getting pairs of people to do some of the interview stages. The goal of this was to eliminate any personal or unconscious bias that might've happened otherwise. At each step of the process, we had some clear measures around what we were looking for too.</p>
<h2 id="support-and-mentorship-for-junior-engineers">Support and mentorship for Junior Engineers</h2>
<p>Hiring junior engineers is the easy part. After we hired them, the real work begun.</p>
<p>One of our big goals during this program was to grow these engineers into people who were confident and capable within our company. But to do this, we needed to ensure that the juniors felt 100% supported during their time at Culture Amp. A junior who is supported well is one that will learn and grow well. We took a few different paths to support our juniors.</p>
<p>Our program is designed to foster collaboration, so instead of hiring a single junior we hire a cohort of them at a time. This is designed to give junior developers the ability to grow and to share the pain and joy of being a junior developer at Culture Amp as one big cohort. Having other people to talk about shared experiences helps juniors work through any issues that might come up.</p>
<p>We gave juniors extra support by pairing them up with a mentor who would provide them with career guidance and other assistance through 1-on-1 sessions weekly. These mentors would often work on goals with the juniors and check-in regularly about their progress. If the junior was ever unsure about something, they could reach out to their mentor for support.</p>
<p>Juniors were also placed into real development teams and paired up with more senior developers who would then help out the junior by answering their questions, walking through unfamiliar code with them or helping them to understand the processes involved with working within the team.
There isn't one single thing that we could do to help the juniors feel the most supported at Culture Amp.</p>
<h2 id="program-outline">Program Outline</h2>
<p>During the JEP, our junior engineers worked on a mixed schedule of training sessions and real-world work.
Initially, we split the week up so that they spent two days with the program and three days working in their team. We realised that this didn't work so well, so switched to a 3 week cadence of 1 week JEP, 2 weeks working on a team. The team work was designed to give juniors some time to practice the real-world skills that they learned during the JEP. This 3-week schedule worked really well last time, and it’s what we’ll be doing next time too.</p>
<h3 id="jep-weeks">JEP Weeks</h3>
<p>During the JEP weeks, the juniors were given training sessions on different programming concepts. These sessions were facilitated Junior Engineering Program Lead, Ryan Bigg and occasionally, some guest lecturers too. The training sessions covered technologies like SQL, Ruby, Rails and JavaScript. We use these technologies (and a few more!) at Culture Amp daily, so that provided the juniors the practice that they needed to put their skills to the test.</p>
<p>Juniors were often given homework to accomplish outside of these sessions which would be reviewed when the next JEP session happened. The juniors would discuss their solutions to the homework within the group and with the facilitator too. Out of this session would come some feedback that the junior could then learn from and apply to their future work. This feedback was a vital part about how we supported our juniors too.</p>
<p>While we had in mind what we wanted to teach our juniors during these JEP weeks, we were not too rigorous about it. The course content was adjusted on-the-fly to match up with what the juniors wanted to work on. This kept the juniors interested and engaged in what they were learning.</p>
<h3 id="team-weeks">Team Weeks</h3>
<p>When the juniors were outside of the training sessions, they would practice their craft by working with teams to fix bugs and deliver features on our real-world applications. All of our juniors contributed to things that thousands of people use world-wide, which is a pretty incredible feat! This work ranges from things like the infrastructure that our servers run on, all the way up to entirely new features like our Effectiveness dashboard.
While the juniors were working on their teams they were paired up with a more senior engineer who could help them out with whatever they needed to do. If the junior was comfortable with being left alone, then we would give them space to do whatever they needed to do as well. This practice worked well last time, and so we’ll be keeping it too.</p>
<h2 id="feedback">Feedback</h2>
<p>To finish up, I want to show you the feedback that we received from the last batch of juniors that went through this program:</p>
<blockquote>
<p>These lessons were invaluable to me as it gave me a chance to step back from my day to day work and take the time to understand the basics of several technologies which I was unfamiliar with.</p>
</blockquote>
<hr>
<blockquote>
<p>The Junior Engineering Program was a great way to kickstart my career in tech. It provided me with a unique opportunity to advance my skills as a developer, while contributing to exciting real world projects.</p>
</blockquote>
<hr>
<blockquote>
<p>The Culture Amp Junior Engineering Program is a great opportunity to get started on the engineering career and get a chance to learn the current standards and best practices from some of the best people in their areas of expertise. On top of that you also get the benefits of working for a culture first company that truly cares about your wellbeing.</p>
</blockquote>
<p>We loved working with our first cohort of junior developers we would love the opportunity to work a second cohort of juniors for our next program.</p>
<p>So if you're a junior developer who's keen to learn, go and apply for Culture Amp's second Junior Engineering Program:</p>
<p><strong><a href="https://boards.greenhouse.io/cultureamp/jobs/1295735">Apply here for the Culture Amp Junior Engineering Program's second cohort</a></strong></p>
]]></content>
 </entry>
 
 <entry>
   <title>Joy of Elixir - Progress Update</title>
   <link href="http://ryanbigg.com/2018/08/joy-of-elixir-progress-update"/>
   <updated>2018-08-22T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2018/08/joy-of-elixir-progress-update</id>
   <content type="html"><![CDATA[<p>I started writing Joy of Elixir <a href="https://ryanbigg.com/2017/07/joy-of-elixir">near the end of July last year</a>. I wrote a large amount of the book in a relatively short time and I've been quietly updating it (slowly) ever since.</p>
<p>I took time away from Joy of Elixir to publish <a href="http://leanpub.com/explodingrails">Exploding Rails</a> (which is doing very well!) and then took a little writing break to &quot;recover&quot;.</p>
<p>Recently, I received an email from someone called Svetlana Rosemond. She said:</p>
<blockquote>
<p>Hello Ryan,</p>
<p>I'm currently working my way through Joy of Elixir. Well done!</p>
<p>When will you complete chapter 11? Working with Files. I'm interested to see how to read and write files with Elixir.</p>
<p>Secondly, this isn't a problem with code, but I really like the way <a href="https://nostarch.com/pythoncrashcourse">Python Crash Course</a> was structured, and I think Joy of Elixir could be structured this way as well. It started with the basics and worked it's way up to intermediate topics. It might be good for chapter 1 to introduce what an Atom is and the basic types, and a chapter about if, case and cond. Also when working with files, it might be a good time to introduce try, catch, and rescue.</p>
<p>I just think Python Crash Course did a great job in how to structured it's topics and I believe all beginner level textbooks should be structured this way, but that's just my opinion. :D.</p>
</blockquote>
<p>I wrote up a relatively long reply to this, and then got her permission to publish it here. So I'm going to use my email reply as a way of reporting the current status of Joy of Elixir, as well as my future plans for the book.</p>
<p>Here's my reply:</p>
<hr />
<p>Hello Svetlana,</p>
<p>I've been pretty busy and haven't dedicated time to Joy of Elixir recently. Well, until last night!</p>
<p>Your email spurred me on. I took my notes from Chapter 11 and turned them into one section on reading a file.</p>
<p>You can read it here: <a href="https://joyofelixir.com/11-files/">https://joyofelixir.com/11-files/</a>.</p>
<p>I will try to get the remainder of the chapter done by the end of the week and it will cover:</p>
<ul>
<li>File.write/2</li>
<li>File.rm/1</li>
<li>case statements</li>
<li>with statements</li>
</ul>
<p>I can't find a particular case (heh) for <code>cond</code> or <code>if</code> statements yet, so I'm going to leave them on the backburner for the time being. I will find a place for them by the end of the book.</p>
<hr />
<p>Regarding your feedback about <a href="https://nostarch.com/pythoncrashcourse">Python Crash Course</a>: I've read the first couple of chapters of this book and I couldn't find where exactly it listed all the basic types at once. From what I can see, it started out relatively simple with strings, variables, numbers and commenting (Chapter 2) and moved into lists (Chapter 3) in almost the same way Joy of Elixir does (Chapters 2 and 3 also).</p>
<p>I disagree that Chapter 1 would be a good place to introduce atoms. At such an early point of this book, it doesn't make sense to cover all the different types of data that Elixir can represent. There's quite a few of them! I am trying my best to only introduce concepts when they're necessary in the book and in Chapter 1 it isn't useful to know what atoms are just yet.</p>
<p>I should also mention that I haven't even covered commenting in the book either. I want to start covering this when we start building Elixir modules and putting functions in them. Comments are a super useful way to demonstrate how you can produce documentation with <code>mix docs</code>. That's where the true power of comments lies with Elixir: that Hex documentation. Oh, and doctests (just like in Python!) are super helpful as well: <a href="http://elixir-recipes.github.io/testing/doctests/">http://elixir-recipes.github.io/testing/doctests/</a>. So with commenting you can introduce: documentation and automated testing in one fell swoop.</p>
<p>My aim for this book is to be something that someone with little to no programming experience could read and then use it to get a handle on at least one programming language. The chapters of the book are demonstrating what Elixir is capable of while gradually building a repertoire of skills. I think by Chapter 11 we've got a pretty formidable set of skills!</p>
<p>There's currently 3 parts of the book, but there's also going to be a 4th part which involves a medium-sized project. During this part, I want to start the readers on building a new project with &quot;mix new&quot; and here I want to introduce concepts like:</p>
<ul>
<li>Modules</li>
<li>Structs</li>
<li>Functions with guard clauses</li>
<li>Commenting + documentation</li>
<li>Doctests</li>
<li>Using external dependencies</li>
</ul>
<p>The project is going to be one that can read a CSV file full of people's data (name, age + gender) and transform its data into a list of maps [RB: now that I think more about it, probably structs instead of maps] and then do some data crunching on that. Can we find what the average age is in this dataset? What's the gender split as a percentage? Things like that.</p>
<p>These are the last big concepts that I want to cover and I think once we've covered those we're going to have a pretty well-rounded idea of what Elixir is capable of.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Web Directions Code Leaders: Hiring Juniors</title>
   <link href="http://ryanbigg.com/2018/08/web-directions-code-leaders-hiring-juniors"/>
   <updated>2018-08-02T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2018/08/web-directions-code-leaders-hiring-juniors</id>
   <content type="html"><![CDATA[<p><em>Here are my raw speaker notes for my Web Directions Code Leaders talk, titled &quot;Hiring Juniors&quot;. The video will be online later.</em></p>
<p>The slides for this talk are available here <a href="https://speakerdeck.com/radar/web-directions-code-leaders-hiring-juniors">on Speakerdeck</a></p>
<h2 id="intro">Intro</h2>
<p>[slide]</p>
<p>Hi, I'm Ryan. You know that part already. What you might not know is that I've been mentoring juniors on-and-off for close to a decade now and I've had varying rates of success.</p>
<p>I've mentored juniors who have gone on to become lead developers at tech companies you'd probably know about.</p>
<p>But, at the same time, I've also mentored juniors that have quit the industry altogether.</p>
<p>Recently, I've spent about the past 10 months recruiting, hiring and training up juniors as a part of the Culture Amp Junior Engineering Program and today I've got some things about that process to share with you.</p>
<p>Today I'm going to tell you a little bit about our Junior Engineering Program, why I think hiring juniors is the right move -- by the way of a short story -- and finish up by sharing some tips about what you can do with the juniors that you're going to hire soon.</p>
<p>[slide]</p>
<p>You'll be pleased to know that there is absolutely no subliminal messaging in this talk at all. It'll be just some plain speaking from yours truly.</p>
<p>Mentoring juniors is something that I am really passionate about and I'm hoping today some of that passion will rub off on you. My goal for the end of the talk is to convince you to hire and mentor juniors at your own companies.</p>
<h2 id="culture-amps-junior-engineering-program">Culture Amp's Junior Engineering Program</h2>
<p>[slide]</p>
<p>So let's start with Culture Amp's Junior Engineering Program.</p>
<p>At Culture Amp, we decided we would run a structured program for juniors as a way of teaching juniors skills that are relevant to our industry today. This is kind of like the antithesis of a university computer science course. Not a line of C or Java in sight.</p>
<p>The idea behind the program is that, over time, we would be able to bolster our best and brightest with some new faces who could help us out.</p>
<p>We ran our very first Junior Engineering Program recently, for 6 months -- from November last year until June this year.</p>
<p>[slide]</p>
<p>Before we started this program, we had 5 juniors already working at Culture Amp, and then we hired another 5 on top of that for a total of 10 juniors across the company. We put all of our juniors through this program.</p>
<p>These are a mixed bunch of fresh faces all with varying backgrounds. Not all of them have CS degrees, or have even worked in IT, for instance.</p>
<p>Just as a comparison to how fresh their faces are, all of them have a much fresher face than what I had as a junior developer.</p>
<p>[slide]</p>
<p>In the Junior Engineering Program, we taught these 10 developers the foundational skills that they needed to be confident and capable developers within our tech stack. We taught them Ruby, Rails, two different kinds of databases and a whole suite of JavaScript tools, all within 6 months. They know these things and a lot more now.</p>
<p>[slide]</p>
<p>During the program, the juniors worked part of the time with me working on learning this tech stack, and part of the time with one of our development teams, fixing bugs and delivering features. This split was designed to give the juniors the opportunity to be taught these skills, as well as a chance to get some real-world workplace experience. The best of both worlds. On one hand: they need the training, but on the other they also need the real-world job experience in order to be truly effective people.</p>
<p>We chose to run a structured program because it would allow us to train up a bunch of people all at the same time, on all the same skills. This would also mean that they could support each other throughout the process. If we brought on only a single junior it would be a &quot;The Junior vs The World&quot; type scenario, which can feel quite intimidating and disheartening. This is not the experience we want for any one, junior or not, to have at Culture Amp.</p>
<p>During this program really encouraged the juniors to succeed and to grow their skills together as a group, despite whatever struggles they might encounter. This &quot;shared pain&quot; aspect of the struggle is important: it makes juniors feel comfortable about being in a position where they don't know all the answers, and someone else also doesn't know the answer with them. They then could puzzle it out together. If they got stuck, there was still a support net of knowledgeable people who could help them out.</p>
<p>Hiring a bunch of juniors and running them through the Culture Amp Junior Engineering Program worked extremely well. The juniors that we hired in November are now confident and capable members of our teams who have helped ship real software that thousands of people use. We are very proud of what our juniors have been able to accomplish in just half a year.</p>
<p>[slide]</p>
<p>In fact, the program was so successful that we're going to be running it for a second time... real soon now.</p>
<h2 id="juniors-makes-your-team-better">Juniors makes your team better</h2>
<p>Now that's just how we've chosen to do it at Culture Amp but a structured program that hires cohorts of junior developers every 6 months isn't the only way to train juniors at a company.</p>
<p>You don't need to be a large established organisation, and you don't need to run a structured program to be able to hire and support a junior.</p>
<p>[slide]</p>
<p>I reckon if you've got at least 4 senior developers within your organisation, your next hire should be a junior. As long as you've got someone within that group who can dedicate some time to supporting a junior, you can do it.</p>
<p>And it's not like it's <em>hard</em> to hire a junior at the moment, either.</p>
<p>[slide]</p>
<p>But why would you want to hire a junior? Won't juniors slow your team down dramatically, leading to precious productivity losses? Yes, that is unavoidably true. On the you day you hire them, they will do that. And the day after that too. And the next week. But over time, and with mentoring, they will improve and productivity will be even better than before.</p>
<p>I admit that that point isn't a great one with a lot of evidence to back it up. So I have a greater one to make.</p>
<p>[slide]</p>
<p>One great side-effect of hiring and working with juniors is that everyone else <em>will get better</em> at what they're doing because they're now working with a junior. And it will be almost instantaneous. Well, it will take a week or two, but they <em>will get better</em>.</p>
<p>This is because mentoring junior developers forces the people doing the mentoring to slow down and methodically explain their thought process.</p>
<p>It makes them think of things and explain them in different and, usually, better ways. They have to practice really understanding something and being able to explain it to someone who doesn't know it.</p>
<p>Sometimes, they might even find out that they thought they knew something when, in fact, they didn't know it very well at all.</p>
<p>Mentoring juniors can be quite humbling in that regard.</p>
<h3 id="the-junior-the-monolith-and-the-microservice">The Junior, the Monolith and the Microservice</h3>
<p>[slide]</p>
<p>One of my favourite stories around this point is about what happened on a team of mine when we hired a junior, back when I was a senior developer at Culture Amp. Long before the Junior Engineering Program.</p>
<p>At the time, we were building a new micro service, as was, and still is, the cool thing to do. For extra street cred: this micro service is even event sourced and written in Ruby on Erlang, oops I mean Elixir.</p>
<p>My team would often talk about the Elixir microservice in high-level terms because the team was quite senior-heavy. Us senior developers knew what we were talking about, or at least pretended to -- after all, we all have big senior developer egos to protect.</p>
<p>When this junior joined, they asked a lot of questions about the microservice. We tried our best to answer these questions. We tried explaining things to them using the jargon that we had all collectively built up. It didn't work. We tried again using different jargon. It still didn't work. The junior was still terribly confused.</p>
<p>So I ended up drawing up a diagram of the two systems, our monolith and the microservice, indicating the different parts that were involved. It was this little thing.</p>
<p>I stuck it on a wall in our team area and gave the junior a copy too. This worked! The junior wasn't confused anymore. The junior was able to look at the diagram and figure out how the two systems worked together. They understood what our jargon meant because it was labeled clearly on the diagram.</p>
<p>But then a really funny thing happened. The seniors started using the diagram more, and more, and more. We talked about the micro service a lot, but when we did we involved the diagram in a lot of those discussions. We used terms listed on the diagram rather than our own words for it. We even re-drew the diagram a few times. We, the seniors, ended up using the diagram more than the junior did!</p>
<p>By having this junior join our team we soon realised that one of our blindspots was how we communicated about this microservice. The junior's joining led to this creation of &quot;The Diagram&quot; and led to us all communicating more effectively about this microservice. Ultimately: It made us a better team.</p>
<p>This is a small example, but quite a good example of the kind of benefit that adding a junior brought to team that I was a part of.</p>
<p>[slide]</p>
<p>Now wouldn't you like that kind of thing in your teams? The one simple trick that I have to share today to make your teams better is to introduce a junior into that team and then to have the team mentor them. I've seen this improve teams again, and again. It'll work for you too. You have my money back guarantee.</p>
<p>[slide]</p>
<p>I want you to hire at least one junior because I know <em>from my experience and the experience of teams at Culture Amp</em> that it has most certainly made our teams better. It will make your teams better too.</p>
<h2 id="my-three-tips">My three tips</h2>
<p>[slide]</p>
<p>Now that I've utterly convinced you 100% to hire a junior, I want to talk about what to do with them once you have them. This is the scariest part, but I have three easy tips that can help you.</p>
<h3 id="mentorship">Mentorship</h3>
<p>First tip: Assign a mentor.</p>
<p>In order for juniors to grow into amazing superstar developers, you must provide them with the mentorship and direction that will get them there.</p>
<p>Juniors are going to need a lot of love and attention. You can't just put them in the corner and expect them to thrive. It won't work!</p>
<p>[slide]</p>
<p>Think more of them like a puppy than a cactus: the puppy needs love and attention and some training, but the cactus needs only sunshine and some water. The cactus is indifferent to your love, your attention or the intensity of the training you provide. Cacti are going to Cacti.</p>
<p>Junior developers don't grow into senior developers with just sunshine and water. And they don't do it just by practicing development by themselves, either. They need mentorship and thrive on direction! So give it to them!</p>
<p>[slide]</p>
<p>At Culture Amp, we provide this mentorship by pairing each junior up with a mentor within Culture Amp from day one. This is someone who has been at the company a while and can show them the ropes. The mentor's job is to work with the junior to grow their skill set. They do this by setting goals together, reviewing feedback they've received and other activities during weekly 1-on-1s.</p>
<p>While a junior is on a development team, the team supports them by pairing them up with a senior developer who then could help them work effectively on that team and skill them up in what the team needed.</p>
<p>We assigned people this mentor and paired them up within teams as we wanted the juniors to feel super-supported at Culture Amp. We want their experience to be one of overwhelming positivity because being a junior is already hard enough.</p>
<p>I want you to do this in your organisation too. A single point of contact. Someone who can be around for the junior. I want you to have weekly check-ins with the junior and set professional goals with them. Actively seek out feedback about how they're going and work with the junior on things within that feedback. Support them as much as possible.</p>
<p>[slide]</p>
<p>The junior is going to need this support. Remember: puppy, not cactus.</p>
<h2 id="it-is-always-ok-to-ask-questions">It is always ok to ask questions</h2>
<p>[slide]</p>
<p>My second tip is this: tell your juniors that it is always OK to ask questions. Repeat this as much as possible.</p>
<p>Or, if you have a junior at your organisation who rarely asks questions, really re-enforce with them that it's OK to be asking questions. If a junior is asking questions it means that they're looking for answers, and if they're looking for answers it means they want to know something! So take the opportunity to teach them!</p>
<p>Alongside this, pay attention to what juniors are doing. Ask them if they need assistance at all. Maybe see if they're looking uncomfortable, sad or angry. Sometimes, juniors can be too afraid to ask questions because they think they're &quot;stupid&quot; questions. Asking juniors if they have any questions gets them to open up, and helps them feel supported.</p>
<h2 id="small-wins-matter">Small wins matter</h2>
<p>Third tip: Small wins matter.</p>
<p>When the junior joins your organisation, they're going to have a large dose of Imposter Syndrome. A lot of &quot;why did they hire me? I know nothing!&quot;. You need to start chipping away at this right away and the best way to do that is to give them wins on the board. These things act as opposites to the feelings of imposter syndrome. Imposter syndrome is saying &quot;you're not good enough&quot; and these wins are saying &quot;you <em>are</em> good enough&quot;.</p>
<p>Get them to fix typos, investigate bugs, dive into the source to figure out things. Encourage them to drive this effort as much as possible. They'll feel better about things they were able to accomplish on their own.</p>
<p>Cushion them when they fall, but celebrate with them when they succeed. Chip away at that imposter syndrome piece by piece, and day by day by providing them with small wins. You can work them up to bigger and bigger wins later on. For the early stages, small wins are absolutely critical.</p>
<h2 id="feeling-welcome">Feeling Welcome</h2>
<p>[slide]</p>
<p>Ultimately, your mentorship should be about making the junior feel welcome and safe within your organisation. You've probably sensed this as a theme to my points already, but I want to take the last few minutes of this talk to really drive this point home: In fact, this should be what's happening with everyone in your team.</p>
<p>[slide]</p>
<p>Don't just take my word for it. Google ran a study called &quot;Project Aristotle&quot; wherein they attempted to find how to build effective teams. They interviewed hundreds of their own employees and they came up with 5 things that effective teams had consistently:</p>
<p>[slide]</p>
<p>[image:EEF8C544-A631-4F6F-8796-09A3F95F045D-94246-0000594A81D4A05E/eQ_WsRq5-q-m_41eEI6GLEObqpxBYJd1pm96gIa-eRSn-QXlPjwO5K6O-DHU8sxny3ChnIQE0mjpnXaaW7QAhQ=s0.png]</p>
<p>The #1 item on this list isn't &quot;Feeling welcome&quot;, but &quot;Psychological safety&quot;. Same thing. The text underneath says: &quot;Team members feel safe to take risks and be vulnerable in front of each other.&quot; This is the #1 thing you should be encouraging your juniors to do. Take risks and be vulnerable. It is the way they will grow.</p>
<p>Juniors should ultimately feel safe to take risks and to be vulnerable in our teams. Juniors will make mistakes. This is the nature of taking risks. They <em>will</em> mess up from time to time. Give them space to make mistakes. It is how they will learn best.</p>
<p>The remainder of this list is not to be discounted. Dependability, Structure &amp; Clarity, Meaning and Impact are all vital to junior developers progressions.</p>
<p>A junior must be able to depend on the people around them for support. They must be reminded that it's always OK to ask questions. They must have people around them for that support who they can turn to and ask questions of.</p>
<p>They must have clarity on what their direction is and you can provide that with some solid mentoring and weekly 1-on-1s. Work together to set some goals for them during these 1-on-1s and help them work towards the goals. Gather up some feedback from their peers and talk about it with them.</p>
<p>The juniors must feel like they're contributing back to a greater whole to keep them motivated and enthusiastic about what they're doing. Give them meaningful work to accomplish and celebrate with them when they finish it.  You can start with small wins, but work them up from there. Chip away at their imposter syndrome. Be their champion.</p>
<p>When you hire a junior developer, keep these things in mind and ask yourself regularly if you're following along with them. These things should underpin everything you do with everyone in your organisations, but <em>especially</em> junior developers.</p>
<p>With a concerted effort to make the junior feel psychologically safe, and some semi-structured mentoring in place, they can grow into the future's most brilliant developers.</p>
<p>Let's hire and mentor juniors at all of our companies so that they become the next generation of amazing developers.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Making Tests Go Faster</title>
   <link href="http://ryanbigg.com/2018/06/making-tests-go-faster"/>
   <updated>2018-06-15T00:00:00+10:00</updated>
   <id>http://ryanbigg.com/2018/06/making-tests-go-faster</id>
   <content type="html"><![CDATA[<p>At Culture Amp, we have a large Rails app that we’ve been building since 2011. This app has about 150k LOC and an extensive test suite that uses Rubocop, RSpec, Capybara, Cucumber and FactoryBot.</p>
<p>We run these tests for the application on Buildkite and currently they take about 16 minutes to run end-to-end. This is 16 minutes that developers are waiting to get feedback on whether their build passed or failed. While this is not unacceptably high, we could do better. Developers could ship things faster, or respond quicker to build failures, with faster builds.</p>
<p>A large chunk of that build time is spent running these tests. In fact, we currently have 8 machines running tests concurrently for each build to speed it up.</p>
<p>We have a bunch of tests in this application that, like in many Rails applications, were written to get something shipped fast with no real focus on making the tests or code particularly fast. As a result, we have tests that create more records in the database than is necessary. While one test taking 1-2 seconds longer than it should isn’t a bad thing, hundreds of these tests taking seconds to run each impacts the build time.</p>
<p>One particularly major offender in our app is a factory for the Survey model. This factory creates an extensive set of records in the database and takes over a second and a half to run. Any test using this factory incurs this delay. And there’s a lot of those tests.</p>
<p>We could refactor this factory to not do such nasty things, but because this factory is for our God Class, it is used everywhere in the application. Refactoring would be a months long effort.</p>
<p>So instead, the better approach is to find tests that are slow and have a dependency on this factory and to remove that dependency where possible.</p>
<h2 id="finding-slow-tests">Finding slow tests</h2>
<p>We configured RSpec to print out the slowest examples in a test run at the end of every test.</p>
<p>This comes from this line in our <code>spec_helper.rb</code> file:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Print the 10 slowest examples and example groups at the</span>
<span class="c1"># end of the spec run, to help surface which specs are running</span>
<span class="c1"># particularly slow.</span>
<span class="n">config</span><span class="p">.</span><span class="nf">profile_examples</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre></div></div>
<p>When our tests run, we can view this output and see trouble spots:</p>
<pre><code>Top 10 slowest examples (13.85 seconds, 61.6% of total time):
    [TEST DESCRIPTION GOES HERE}
    2.08 seconds ./spec/models/report_spec.rb:134
</code></pre>
<p>One particular trouble spot that I saw was this <code>spec/models/report_spec.rb</code>. This whole file took about 1m20s to run locally, and only for 116 examples. This test used the survey factory extensively, which made the test slow.</p>
<p>This seemed to me like an easy target: a model test that was slow when it should be fast. So I set about fixing it.</p>
<p>That was October 2016. I have since attempted to fix it on at least five separate occasions but gave up. Then this week, I finally managed to do it. Here’s some tips I can share.</p>
<h2 id="dont-create-the-world">Don’t create the world</h2>
<p>The first tip is a simple one: create the least amount of database objects as possible. By invoking the survey factory, 398 database queries run to create all the things that the factory (and its associated factories) builds. Most tests in our application do not require this, but some do.</p>
<p>I went through the test and replaced each survey factory invocation with a basic_survey factory:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">factory</span> <span class="ss">:basic_survey</span><span class="p">,</span> <span class="ss">class: </span><span class="no">Survey</span> <span class="k">do</span>
  <span class="n">sequence</span> <span class="ss">:name</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
    <span class="s2">"Basic Survey </span><span class="si">#{</span><span class="n">n</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>

  <span class="c1"># some traits go here</span>
<span class="k">end</span>
</code></pre></div></div>
<p>This creates the bare minimum survey in the database, and leads to ONE database query.</p>
<p>I methodically went through every example in <code>spec/models/report_spec.rb</code> and attempted to replace this call:</p>
<pre><code>FactoryBot.create(:survey)
</code></pre>
<p>With this one:</p>
<pre><code>FactoryBot.build(:basic_survey)
</code></pre>
<p>Some methods within the <code>Report</code> class do not depend on a <em>persisted</em> <code>Survey</code> object, but just one configured in a particular way. So we can use <code>FactoryBot.build</code> to initialize a new <code>Survey</code> instance with the details from the factory, meaning no database calls are made for this factory invocation.</p>
<p>For the ones that I could use <code>build</code> for, I investigated the reasons why the tests needed a persisted survey and when I was satisfied with the answer, I switched to using <code>FactoryBot.create(:basic_survey)</code>.</p>
<p>This worked for the most part, but there were some tricky parts.</p>
<h2 id="tracking-down-extra-queries">Tracking down extra queries</h2>
<p>The 2nd tip is that you should inspect database queries and know where they're coming from.</p>
<p>Sometimes, the tests in <code>spec/models/report_spec.rb</code> relied on the survey being setup in the very particular way that the survey factory did it. In most cases, I wasn't able to jump through the code to see where certain records were being created or updated, as our factories are pretty large and complex.</p>
<p>The first thing I did to track this down was to confirm that a database query was updating a record in a particular way. Turning on the Mongoid query logging with this line at the top of the spec file:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Mongoid</span><span class="p">.</span><span class="nf">logger</span><span class="p">.</span><span class="nf">level</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>
<p>Meant that I could see <em>all</em> database queries that were being executed in this test.</p>
<p>From here, I could see the database query that I thought was responsible:</p>
<pre><code>D, [&lt;timestamp&gt; &lt;pid&gt;] DEBUG -- : MONGODB | localhost:27017 | murmur_test.update | STARTED | {&quot;update&quot;=&gt;&quot;surveys&quot;, ...
</code></pre>
<p>But this output only tells me that the query is happening, not <em>where</em> it is happening. Fortunately, I've got a little piece of code that I wheel out for situations like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">LoggingSubscriber</span>
  <span class="k">def</span> <span class="nf">started</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="nf">command</span><span class="p">[</span><span class="s2">"update"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"surveys"</span>
      <span class="nb">puts</span> <span class="nb">caller</span><span class="p">.</span><span class="nf">select</span> <span class="p">{</span> <span class="o">|</span><span class="n">c</span><span class="o">|</span> <span class="n">c</span> <span class="o">=~</span> <span class="sr">/murmur/</span> <span class="p">}.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
      <span class="nb">puts</span> <span class="s2">"*"</span> <span class="o">*</span> <span class="mi">50</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">succeeded</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="c1"># p event</span>
    <span class="c1"># p event.duration</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">failed</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">subscriber</span> <span class="o">=</span> <span class="no">LoggingSubscriber</span><span class="p">.</span><span class="nf">new</span>
<span class="no">Mongo</span><span class="o">::</span><span class="no">Monitoring</span><span class="o">::</span><span class="no">Global</span><span class="p">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="no">Mongo</span><span class="o">::</span><span class="no">Monitoring</span><span class="o">::</span><span class="no">COMMAND</span><span class="p">,</span> <span class="n">subscriber</span><span class="p">)</span>
</code></pre></div></div>
<p>I can put this code at the top of the test file. This code subscribes to <em>any</em>  Mongo database queries through the <code>Mongo::Monitoring</code> feature built into the <code>mongo</code> gem.</p>
<p>When a query happens, the <code>started</code> method in this subscriber is called and passed the event. I can then inspect this event and make it show information about certain queries. In this example, I'm getting it to output stack trace information for queries that update the <code>surveys</code> collection. The &quot;murmur&quot; here is the name of our application; I'm using it here to only show stack trace lines from our application.</p>
<p>With this code in my app, I can now see both the query <em>and</em> where it is coming from:</p>
<pre><code>...murmur/spec/factories/common.rb:397:in `block (3 levels) in &lt;top (required)&gt;'
...murmur/spec/models/report_spec.rb:907:in `create_new_survey'
...murmur/spec/models/report_spec.rb:551:in `create_new_survey'
...murmur/spec/models/report_spec.rb:4:in `block (2 levels) in &lt;top (required)&gt;'
...murmur/spec/models/report_spec.rb:5:in `block (2 levels) in &lt;top (required)&gt;'
...murmur/spec/models/report_spec.rb:113:in `block (4 levels) in &lt;top (required)&gt;'
...murmur/spec/models/report_spec.rb:118:in `block (4 levels) in &lt;top (required)&gt;'
**************************************************
D, [2018-06-15T08:44:49.977091 #11587] DEBUG -- : MONGODB | localhost:27017 | murmur_test.update | STARTED | {&quot;update&quot;=&gt;&quot;surveys&quot;,
</code></pre>
<p>The stack trace shows me that this query is happening in a factory. With the stack trace lighting the way, I was able to see what the query was doing and then remove the need for it in the test.</p>
<p>I then went through the remainder of this file and reduced the runtime from 1 minute and 15 seconds to 18 seconds.</p>
<h2 id="theres-more-to-do">There's more to do</h2>
<p>Taking almost a full minute off our build time doesn't sound like much, but it's a 16th of the build time saved. There's plenty more cases like this in our application that we could fix and reduce the build time further. This would let developers get faster feedback on their builds, making the whole development cycle more efficient.</p>
]]></content>
 </entry>
 
 <entry>
   <title>On Writing Software Well #2: Using callbacks to manage auxiliary complexity: A review</title>
   <link href="http://ryanbigg.com/2018/03/on-writing-software-well-2-a-review"/>
   <updated>2018-03-15T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2018/03/on-writing-software-well-2-a-review</id>
   <content type="html"><![CDATA[<p>This blog post has been <a href="https://techracho.bpsinc.jp/hachi8833/2018_05_10/56193">translated into Japanese</a>, thanks to <a href="https://twitter.com/hachi8833">@hachi8833</a>!</p>
<p>A few people have asked for my opinions on DHH's recent video series. And others have bemoaned the lack of a critical take on the videos. So here's a critical take involving my opinions on <a href="https://www.youtube.com/watch?v=m1jOWu7woKM">DHH's 2nd video</a>) in the series.</p>
<p>Why not start with <a href="https://www.youtube.com/watch?v=H5i1gdwe1Ls">Video #1 in the series</a>? Because it was great! Code comments that explain why things are the way they are... those are incredibly useful to people new / unfamiliar with parts of a codebase. His points were well made and I find nothing worth commenting on. (Pun intended)</p>
<p>Video #2 though has the word &quot;callbacks&quot; in it and so I'm intrigued to hear what DHH has to say about it.</p>
<p>So here's some &quot;real-time&quot; opinions that I wrote down while watching this video for a <em>third</em> time. If you like this sort of thing, let me know in the comments below.</p>
<h2 id="initial-reactions">Initial reactions</h2>
<ul>
<li>Ew callbacks. I've been bitten enough times by these -- mainly cases where callbacks are happening when I do not expect them to. Things like where I might call <code>create</code> on a model in a unit test and that causes some <em>other</em> behaviour via callback that isn't relevant to the test. I'd prefer to be explicit in these cases to save surprises.</li>
<li>I've heard mention that these talks might include Rails concerns (modules being included to add behaviour to classes), so I'd suggest you stop right here, get out your favourite drink of choice and take a drink whenever you see a concern used in the Rails app.</li>
</ul>
<h2 id="quotside-effectsquot">1:35 - &quot;Side effects&quot;</h2>
<ul>
<li>&quot;Side effects .. has gotten also a bit of a bad reputation, especially in functional programming&quot; -- Yeah, because <em>random magical shit</em> happening when you call a method isn't easily predictable. Having the code be explicit about what it's doing makes it easier to understand it <em>now</em> and <em>later</em>. The later part is what I think DHH is missing here.</li>
</ul>
<h2 id="messages-controller">2:13 - Messages Controller</h2>
<ul>
<li><code>@bucket.record</code> takes <em>far</em> too many arguments. What is it doing with them all? And P.S. do you even newline your key / value pairs?</li>
</ul>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@bucket</span><span class="p">.</span><span class="nf">record</span><span class="p">(</span><span class="n">new_message</span><span class="p">,</span>
  <span class="ss">parent: </span><span class="vi">@parent_recording</span><span class="p">,</span>
  <span class="ss">status: </span><span class="n">status_param</span><span class="p">,</span>
  <span class="ss">subscribers: </span><span class="n">find_subscribers</span><span class="p">,</span>
  <span class="ss">category: </span><span class="n">find_category</span>
<span class="p">)</span>
</code></pre></div></div>
<p>I think that this reads a little better -- and the Git diff would be neater if a new key was added and removed. It <em>feels</em> like <code>category</code> <em>might</em> one be of those things that was added recently and just chucked onto the end here.</p>
<p>TBH a little surprised here that he's using <code>@parent_recording</code> which is setup as a  <code>before_action</code>,  but <code>find_subscribers</code> and <code>find_category</code> aren't. They're called explicitly here. I'd expect some sort of consistency... but maybe there's a reason for that? The methods are folded at the bottom of the controller so I can't get a good idea of what those are doing to really judge whether or not it's a good choice.</p>
<h2 id="codementioncode-model">4:15 - <code>Mention</code> model</h2>
<ul>
<li>This model is pretty neat. I cringe a little (PTSD, I guess) on the sight of the <code>after_create</code> and <code>after_commit</code> uses.</li>
<li>Interesting that the model doesn't inherit from <code>ApplicationModel</code>. Probably a legacy app thing.</li>
<li>Neat use of <code>casecmp</code> in <code>callsign_matches?</code>.</li>
<li>The <code>unless</code> in <code>after_commit :deliver</code> irks me a little, but maybe it's due to me preferring to keep all the logic inside of methods? I'd write it like this:</li>
</ul>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">deliver</span>
 <span class="k">return</span> <span class="k">unless</span> <span class="n">mentioner</span> <span class="o">==</span> <span class="n">mentioned</span>

<span class="o">...</span>
<span class="k">end</span>
</code></pre></div></div>
<h2 id="coderecordingmentionscode-concern">5:55 - <code>Recording::Mentions</code> concern</h2>
<p><em>DRINK</em> -- there's a concern here. [bad joke about it being &quot;concerning&quot;]</p>
<h3 id="callbacks">Callbacks</h3>
<ul>
<li>Okay, so this is using more callbacks. I feel like <code>remember_to_eavesdrop</code> could be something set &quot;further up&quot; in the chain, probably in the controller. The controller itself could check to see if these things have changed, and then from there choose to send out the mentions.</li>
</ul>
<h3 id="current-attributes">Current Attributes</h3>
<p>The other thing is <code>Current</code> -- used in <code>eavesdrop_for_mentions</code> down the bottom of the code view here.</p>
<p>I already <a href="https://ryanbigg.com/2017/06/current-considered-harmful">wrote about CurrentAttributes at length</a>. Global variables magically being available <em>everywhere</em> in the application. Where is <code>Current.user</code> set? How can I be sure it's set to a value here?</p>
<h3 id="abstracting-out-the-logic-for-triggering-the-job">Abstracting out the logic for triggering the job</h3>
<p>This whole eavesdropping thing <em>feels</em> like it could be wrapped in some other logic (in a controller, perhaps). It's practically begging for it. Basecamp probably doesn't want to be persisting Messages to the database in its tests and having this job code run <em>every single time</em>, but that's exactly what's going to happen here. It'd probably slow down the tests due to these side-effects.</p>
<p>It would be better abstracted out to a &quot;service object&quot; which creates the recording and then triggers this <code>EavesdroppingJob</code>. Bonus thing there is that you can pass <code>current_user</code> from the controller and hey look I just got rid of the <code>CurrentAttributes</code> global variable thing.</p>
<p>An idea of what that might look like:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Mention</span>
  <span class="k">class</span> <span class="nc">EavesdropForMentions</span>
    <span class="nb">attr_reader</span> <span class="ss">:recording</span><span class="p">,</span> <span class="ss">:params</span><span class="p">,</span> <span class="n">user</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">recording</span><span class="p">:,</span> <span class="n">params</span><span class="p">:,</span> <span class="ss">user: </span><span class="p">)</span>
      <span class="vi">@recording</span> <span class="o">=</span> <span class="n">recording</span>
      <span class="vi">@params</span> <span class="o">=</span> <span class="n">params</span>
      <span class="vi">@user</span> <span class="o">=</span> <span class="n">user</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">run</span>
      <span class="k">return</span> <span class="k">unless</span> <span class="n">eavesdropping?</span>

      <span class="no">Mention</span><span class="o">::</span><span class="no">EavesdroppingJob</span><span class="p">.</span><span class="nf">perform_later</span> <span class="n">recording</span><span class="p">,</span> <span class="ss">mentioner: </span><span class="n">user</span>
    <span class="k">end</span>

    <span class="kp">private</span>

    <span class="k">def</span> <span class="nf">eavesdropping?</span>
      <span class="p">(</span><span class="n">active_or_archived_recordable_changed?</span> <span class="o">||</span> <span class="n">draft_became_active?</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="o">!</span><span class="no">Mention</span><span class="o">::</span><span class="no">Eavesdropper</span><span class="p">.</span><span class="nf">suppressed?</span> <span class="o">&amp;&amp;</span>
      <span class="n">recording</span><span class="p">.</span><span class="nf">has_mentions?</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">active_or_archived_recordable_changed?</span>
      <span class="c1"># code here to check change using recordable + params</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">draft_became_active?</span>
      <span class="c1"># code here to check change using recordable + params</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>I don't have the big Basecamp app to play with, so i don't know for certain if this code will or won't work. What I do know is that it neatly encapsulates <em>potentially</em> performing the <code>Mention::EavesdroppingJob</code> later and avoids the issue where saving a <code>Recording</code> in <em>any</em> context might queue up a job as a side-effect.  My approach here decouples those two things, allowing them to happen independently.</p>
<p>Essentially, it accomplishes the same thing in (probably) as many lines, but disconnecting it from the saving of the model is the big win in my mind.</p>
<h3 id="callback-suppression">Callback suppression</h3>
<p>Yay more global state appearing out of the blue (<code>Mention::Eavesdropper.suppressed?</code>). What could possibly go wrong? How can I track down easily where this might be toggled in the codepath that leads to this method? This looks like it would make debugging hard.</p>
<p>DHH himself says (at ~11mins) he thinks that there might be situations where you don't want callbacks to happen. Okay, great. So make it so that it can be an optional part of your code (as above), rather than this spooky-action-at-a-distance <code>Mention::Eavesdropper.suppressed?</code>.</p>
<p>Re-organising the code to <em>optionally</em> trigger this eavesdropping behaviour would lead to a lower cognitive overhead for working with this code.</p>
<h3 id="codehasmentionscode"><code>has_mentions?</code></h3>
<p>Special mention (ha) of <code>has_mentions?</code> at the bottom of this module which does seem to at least abstract the behaviour of checking if something has mentions.</p>
<h2 id="codementioneavesdroppingjobcode">13:23 - <code>Mention::EavesdroppingJob</code></h2>
<p>It feels a lot like <code>Current.set</code> here is a cheap way of passing account through to <code>mention::Eavesdropper</code> and its associated things. I am not sure why this is wrapped this way, given that the account would be accessible in the <code>Eavesdropper</code> class -- assuming it's setup like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Mention</span>
  <span class="k">class</span> <span class="nc">Eavesdropper</span>
    <span class="nb">attr_reader</span> <span class="ss">:recording</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">recording</span><span class="p">)</span>
      <span class="vi">@recording</span> <span class="o">=</span> <span class="n">recording</span>
    <span class="k">end</span>

    <span class="o">...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>But at least, this <code>Eavesdropper</code> class is abstracted away and isn't a concern. There feels to me like concerns are used as a bit of a &quot;golden hammer&quot; in this application.</p>
<h2 id="run-through-of-all-the-parts">13:45 - run-through of all the parts</h2>
<p>DHH jumps straight from the controller to the <code>Recording::Mentions</code> concern here. (DRINK)</p>
<p>My initial thought here was: how is someone unfamiliar with this application supposed to know that the <code>Recording::Mentions</code> concern is where to look for this eavesdropping behaviour if they were to go about debugging it?</p>
<p>This is spooky-action-at-a-distance and it's the kind of code that I might've written a few years ago and felt very smart <em>at the time</em>, but then months later when I've gone back to visit it I've asked myself: &quot;wtf was past-Ryan taking?&quot;</p>
<p>DHH says around the 14:10 mark that &quot;there's a fair amount of indirection here but it provides a very clear path of reading what's going on in the method&quot;. Out of anything else in this video, this is the #1 thing that I disagree with the <em>most</em>. The path is completely ambiguous to my &quot;untrained&quot; eye -- I am unfamiliar with this application.</p>
<p>It is &quot;clever code&quot; and that is dangerous because future-you will come back and look at the code in a few months time and wonder how it all fit together again.</p>
<h2 id="codementioneavesdroppercode">14:20 - <code>Mention::Eavesdropper</code></h2>
<p>And now we get to a class which actually has an idea of what the Single Responsibility Principle is.</p>
<p>(Interestingly, DHH can't navigate his own code at the ~14:30 mark)</p>
<p>I've already talked about CurrentAttributes before, so what I'll do here is just sigh longingly, wishing wistfully for the death of global state in any and all applications.</p>
<p>&quot;Globals is not something that you should just litter over your application&quot; -- MY MAN! This is what you're doing here. &quot;Passing around this stuff isn't helpful&quot;. Ok, here's the #2 thing I disagree with. When passing things around, you gain an inkling for <em>where</em> the thing came from and if you followed the chain high enough you might find where it was originally defined. This <code>Current.person</code> mumbojumbo hides all of that for no real good reason.</p>
<p>Not sure I can state my thoughts clearer than this: <em>DEATH TO GLOBAL STATE.</em></p>
<h2 id="codementionscannercode">16:24 - <code>Mention::Scanner</code></h2>
<p>Ok so that <code>Mention::Scanner</code> approach looks pretty good. It's great that this code wasn't just thrown into <code>Eavesdropper</code> because it was <em>somewhat</em> related. It's a separate concern, and moving that logic into <code>Mention::Scanner</code> is a good approach.</p>
<h2 id="codementioncode-codeaftercommitcode-hook">18:10 - <code>Mention</code> <code>after_commit</code> hook</h2>
<p>I still feel strongly that this could just be a method call in the controller after the <code>@bucket.record</code> is called.</p>
<h2 id="codeprojectcopiercode--suppression">19:20 - <code>ProjectCopier</code> + suppression</h2>
<p>The suppression chain underneath <code>suppress_events_and_deliveries</code> wouldn't be necessary if this code previously opted-in explicitly to making these &quot;events&quot; and &quot;deliveries&quot;. It <em>still</em> feels like a poor work around for something that could be tidied up with half an hour's worth of effort.</p>
<p>And at the ~20:10 mark, DHH can't find where the suppressible behaviour is brought in. This thing where the code is hard-to-navigate  is a massive code smell. Again: if the &quot;callbacks&quot; were explicit rather than implicit, the suppression wouldn't be needed. The overall code footprint would be smaller, more explicit, and therefore easier to understand. The code does A, B, and C. No magic.</p>
<h2 id="wrap-up">20:39 - Wrap Up</h2>
<p>&quot;I hope it's clear&quot; -- it isn't. I've been doing this Rails stuff for <em>10 years</em> now and if I saw this code in a codebase I would look into ways of making this more explicit to make it easier to work with.</p>
<p>As I've said previously: this code feels like &quot;clever code&quot;. &quot;Look at me using all these cool Ruby features! I am so smart!&quot;. Well, yeah. You are smart.</p>
<p>But then in several months time of this thing chugging along working perfectly, you'll encounter a bug, look at the code and wonder how the hell it all fit together. There is far too much magic here.</p>
<p>But I guess that's The Rails Way™.</p>
<hr />
<p>20:46: &quot;take all this logic and jam it into, what? The controller? A service object?&quot; -- No. A transaction object (see my example back at 5:55) that created the recording AND explicitly triggered the mention scanner + deliveries.</p>
<p>Another approach would be to use <a href="http://dry-rb.org/gems/dry-transaction/">dry-transaction</a>. This gem provides a very neat DSL for setting up such a thing. I'd imagine it would go like this:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateRecording</span>

<span class="n">step</span> <span class="ss">:create</span>
<span class="n">step</span> <span class="ss">:scan_for_mentions</span>
<span class="n">step</span> <span class="ss">:deliver_notifications</span>

<span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="ss">bucket: </span><span class="n">bucket</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
  <span class="c1"># @bucket.record code goes here</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">scan_for_mentions</span>
  <span class="c1"># MentionScanner goes here</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">deliver_notifications</span>
  <span class="c1"># Delivery code goes here</span>
<span class="k">end</span>
</code></pre></div></div>
<p>It'll all be wrapped up neatly in the one class. <em>This</em> is where it should go. Not a controller. Not a service object. But a transaction object, that clearly delineates the steps involved in the transaction. There's no magic here. The steps are run in the order they are specified in. And it's possible to abort the transaction at each step.</p>
<p>This is my preferred approach. Callbacks and their implicitness have caused so much harm in previous codebases that I would never reach for them again. Transaction objects with explicit orders of operations are what I will be doing instead.</p>
]]></content>
 </entry>
 
 <entry>
   <title>My thoughts on Hanami</title>
   <link href="http://ryanbigg.com/2018/03/my-thoughts-on-hanami"/>
   <updated>2018-03-07T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2018/03/my-thoughts-on-hanami</id>
   <content type="html"><![CDATA[<p>(<a href='https://www.reddit.com/r/rails/comments/81z9oe/what_are_your_opinions_about_hanami_framework/dvale8q/?st=jegb17z5&sh=e9d18fa1'>This was originally posted as a comment on Reddit</a>)</p>
<p>This blog post has been <a href="https://techracho.bpsinc.jp/hachi8833/2018_03_28/54381">translated into Japanese</a>, thanks to <a href="https://twitter.com/hachi8833">@hachi8833</a>!</p>
<p>I've been toying around with Hanami for a few weeks now and imo it <em>feels</em> better than Rails.  If you want to see some code rather than text, <a href="http://github.com/radar/hanami-example">here's my little example app I've been building with Hanami</a>.</p>
<p>Here are the top three things that I like about Hanami, in long form:</p>
<h2 id="repository-pattern-instead-of-active-record">Repository pattern instead of Active Record</h2>
<p>Documentation link: <a href="http://hanamirb.org/guides/1.1/models/overview/">Hanami | Guides - Models Overview</a></p>
<p>The Active Record pattern encourages you to throw everything into the model. Think: callbacks, validations, persistence, database logic (queries) and business logic.</p>
<p>In contrast, the repository pattern (through ROM) leads to a cleaner separation between your database and your application. I <em>especially</em> like how validations are handled by <code>dry-validation</code>, a completely separate library to ROM. This <em>enforces</em> a separation between your models, persistence and validation layers, allowing you to pick and choose which ones you wish to use.</p>
<p>My <em>favourite</em> part about the repository pattern is that it's incredibly difficult to make database queries from a view. This helps prevent things like N+1 queries.</p>
<p>Also: ROM has no such thing as callbacks, and that's a huge plus in my eyes too. Callbacks are <em>way</em> too magical and -- using DHH's words -- too sharp a knife for developers to have. Explicitness in code leads to a much better understanding.</p>
<h2 id="action-classes">Action classes</h2>
<p>Documentation link: <a href="http://hanamirb.org/guides/1.1/actions/overview/">Hanami | Guides - Actions Overview</a></p>
<p>Rather than throwing all your actions into the same controller, they're separated out into their own classes.  This helps keep each action isolated from one another, leading to overall a cleaner application architecture.</p>
<p>If you want to share things across actions, it's very easy to create a module for that functionality and to include it into those action classes. For instance, if you wanted a <code>find_post</code> method for <code>show</code>, <code>edit</code>, <code>update</code> and <code>destroy</code> actions, you can define this in a module and only include it in the actions you want.</p>
<p>A Rails controller is typically made messier by the addition of &quot;helper&quot; methods like this. It's not uncommon to have Rails controllers of multiple hundreds of lines, due to the complexity of the actions and these helper methods. Separating out each action into its own class indeed makes them easier to work with.</p>
<p>You're also able to test the action in complete isolation from the routing layer, as it is simply a class. I think this is what was attempted with Rails' controller specs... but those never really felt &quot;right&quot; to me and I typically go to Request Specs these days instead. Hanami brings me back to testing the actions easily. I like that.</p>
<h3 id="params-validation-for-actions">Params validation for actions</h3>
<p>Documentation link: <a href="http://hanamirb.org/guides/1.1/actions/parameters/">Hanami | Guides - Action Parameters</a></p>
<p>Somewhat related to the previous point:</p>
<p>Actions in Hanami also use parameter validation (with the help of <code>dry-validation</code>, I think). This means that each action can uniquely validate the parameters. Rather than having <code>create_project_params</code> and <code>update_project_params</code> defined within a controller -- as you might do in Rails -- you can define what constitutes valid parameters right there in the action class.</p>
<p>In my Hanami experiments, I've not found a use for this yet, but I can think of several places where I've needed this sort of thing in a Rails app.</p>
<h2 id="view-classes">View classes</h2>
<p>Documentation link: <a href="http://hanamirb.org/guides/1.1/views/overview/">Hanami | Guides - Views Overview</a></p>
<p>Similarly to Action classes, Hanami also has the concept of a view class.  I like these because they separate the logic of view &quot;helper&quot; methods and the templates very cleanly.</p>
<p>In a Rails application, you define a helper in a module named after the controller. I never liked this approach for two main reasons: 1) normally I would only ever use the helper in <em>one</em> particular view and 2) the helper is made <em>globally available</em> across <em>all</em> views in the application, which means I can't have a similarly named method in another helper module. A quite horrible design decision.</p>
<p>In Hanami, the view classes are a <em>great</em> place to put these little helper methods <em>and</em> because they're just small, isolated classes, you can test these without involving the router, controller or model.</p>
<h2 id="conclusion">Conclusion</h2>
<p>As I said at the beginning: Hanami <em>feels</em> right. It's &quot;familiar&quot; enough -- still somewhat following the Model-View-Controller architecture we know-and-love Rails -- that it feels comfortable to use. There's a few places where your mind has to change into the &quot;Hanami Way&quot;, but ultimately once your mind does that you'll realise that the Hanami way <em>is</em> better.</p>
<p>Hanami has demonstrably learned the very hard lessons of big Rails application development and presents a robust, well-developed alternative web framework for Ruby.</p>
<p>In fact, it is so robust and well-developed that if I was to develop a Ruby web application from scratch for production use, I would use Hanami over Rails -- despite my 10 years Rails experience.</p>
]]></content>
 </entry>
 
 <entry>
   <title>Hiring Juniors (RubyConf AU Talk)</title>
   <link href="http://ryanbigg.com/2018/03/hiring-juniors"/>
   <updated>2018-03-07T00:00:00+11:00</updated>
   <id>http://ryanbigg.com/2018/03/hiring-juniors</id>
   <content type="html"><![CDATA[<p><em>This is the transcript for a talk that I gave at RubyConf AU in March 2018.</em></p>
<p>The video is up! You can <a href="https://www.youtube.com/watch?v=aD6dci9rLXM">watch it here</a>.</p>
<p><a href="https://speakerdeck.com/radar/hiring-juniors-1">Slides are on Speakerdeck</a></p>
<p>I have seen the future.</p>
<p>Five years from now, someone will get on a stage like this one (or perhaps
midseven this one) and <em>blow your freaking minds</em>. This person will <em>astound</em> you
with a radical talk on a subject we, in the present, can only guess at. That
person is not going to be Sandi,  or any of the other speakers here. It's
not even going to be me -- as much as I (and my ego) would like that.</p>
<p>In fact, the person who will <em>blow your minds</em> knows a model today as someone
who would walk down a catwalk in some ostentatious outfit. They think that a
view is what you get from that lookout up in the mountains. They think that
&quot;Ruby on Rails&quot; is a cause for concern, as enough Rubies of significant sizes on
enough Rails might derail a train. And what a waste of good jewels!</p>
<p>Today, this person has just started on Chris Pine's Learn to Program. They have
invoked the <code>puts</code> method for the very first time.</p>
<p>Tomorrow, they will attempt the Ruby Koans. Next week, they will dabble a bit
in HTML and CSS. A few months from now, they might learn that Ruby On Rails
puts the HTML and the CSS and the Rubies together and it gives them those nice
shivers of excitement when it all Just Works™.</p>
<p>And five years from now they will <em>blow your freaking minds</em> with a talk of
astonishing brilliance, eloquently delivered with perfectly timed (and
tasteful) jokes.</p>
<p>And five years from now, we will know very clearly who this person is. This is
because they will be on stage, blowing our collective minds. And they will have
a name badge and the badge will tell us who they are. But hopefully, they will
tell us themselves.</p>
<p>But right now, we couldn't pick this person out from a crowd, or even a small
gathering for that matter. In our minds, this person simultaneously does and
does not exist. We can picture who they might be, but I guarantee you: the
picture doesn't match the eventual reality.</p>
<p>I'm not one to give out spoilers freely, so I won't tell you who they are.
You'll just have to wait and see.</p>
<p>What I can tell you is that one of you will hire this person as a junior
developer and that will be their very first programming job. You will kick-
start the programming career of someone astonishingly brilliant and it's going
to be all because of what I'm about to tell you, so pay close attention.</p>
<hr />
<p>If there was one thing that I want to stick in your minds it would be this:
hire juniors. Because those juniors you hire today will turn out to be the
people blowing our minds in 5 years time. Hire and train these juniors to be
mind-blowingly awesome.</p>
<h2 id="hiring-seniors">Hiring seniors</h2>
<p>&quot;But Ryan, we only hire senior Ruby developers!&quot; -- ahh the classic
ActiveMantra in the Rails community: &quot;Hiring senior Ruby developers. Hiring
senior Ruby developers. Hiring senior Ruby developers.&quot;. Maybe if we say it
enough and click our heels together our dreams might come true.</p>
<p>Yeah but how's that working out for you at the moment? Probably not so great.
It's well known that there are only three hard problems in computer science:
cache invalidation, naming things and hiring more senior Ruby developers.</p>
<p>We have drained the talent pool dry. And yet our obsession and our Active
Mantra continues. We only hire seniors. But why do we have this obsession?</p>
<p>Well, we want a senior developer -- but we might be happy to take a mid
too -- because they have the skills to instantly dive straight into our
application with little-to-no guidance and they can start shipping code. That
old expression: &quot;they can hit the ground running&quot;.</p>
<p>This is because our code is so brilliantly well-structured and organized
according to the Rails best practices. Nobody will have to upskill on any
single part of the codebase at all because we follow the Laws of Sandi and
Commandments of Avdi to the letter. There is no legacy code with their legacy
decisions that meta-programs the constants from Java, written in a hurry
because we needed to ship that thing <em>fast</em>. HA.</p>
<p>You may think that you need to hire only these best-of-the-best badasses
because your application is a large unmaintable collection of microservices
written in obscure languages surrounding a ginormous monolith and only the
badasses can understand it. That you need seniors to navigate the spaghetti
that is your legacy code. Maybe you use technologies that only <em>true</em> geniuses
can understand, like Node or Go. Or the Rails Asset Pipeline.</p>
<p>That may indeed be the case. After all, if our code was simple, elegant and only
written in a single Ruby monolith, would as many of us still be employed?</p>
<p>Companies spend thousands of dollars hunting the elusive 10x Developer
Rockstar Unicorns (note: term used ironically), but the Unicorns are no longer
out grazing in the sunny meadows, readily available for capture.  They're
already working somewhere else and the conditions of where they work are
extremely competitive. To keep with the analogy: the meadows are filled with
the greenest of grasses and the brightest of rainbows. You will have a hard
time luring these unicorns away.</p>
<p>We're out of freely available Rockstar Unicorns because they're already employed
elsewhere. Attempting to hire them is an exercise in futility. And so it's time
that we started to grow our own. It's time that we started to hire and train our
own 10x Developer Rockstar Unicorns.</p>
<hr />
<p>But where do we find these developers? Well, to start with need to lower our
bar for engineering talent and not be so caught up on hiring the
best-of-the-best <em>now</em>, but instead we should be investing more in people's
future potential.</p>
<p>Your next Rockstar Unicorn isn't within today's current top 5-10% of all
developers. The top 5-10% already works elsewhere. Your Next Rockstar Unicorn
is hanging out with the rest of their peers in the other part of this totally
scientific graph that I made up. These people need some mentoring in order to
grow into the next generation of brilliant people.</p>
<p>There isn't an endless supply of brilliant people -- sorry, I mean Developer
Rockstar Unicorns -- that we can just keep harvesting today. This talent pool
of amazingly talented and gifted developers, as we're painfully finding out,
is not limitless.</p>
<p>We must lower the bar for our hiring, and hire outside of the top 5-10%. We
must hire juniors. We must then train these juniors up to be our next
generation of brilliant minds.</p>
<p>It is very, very difficult to hire a senior developer today in Rubyland. And so
we must grow our own senior developers. This is a process that will take time.
There's no packet mix where you &quot;just add water&quot; and blammo you've got a senior
developer. I'm talking about <em>years</em> of hard work. But these are <em>vital</em> years
of hard work to ensure that our companies and this community continues to thrive
and grow. This is necessary work  to ensure that we have well-trained developers
working at our companies. We will know they're well-trained because we did the
training ourselves.</p>
<h2 id="juniors-make-teams-better">Juniors make teams better</h2>
<p>We should not lower our hiring bar and hire juniors just because we can't find
seniors though. I have a much better reason for why you should hire a junior
developer and that reason is because they unequivocally make your teams better.</p>
<p>Juniors making teams better is a big claim, but I have some evidence to back it
up.</p>
<p>We know from a lot of experience that gender-diverse teams perform better than
either a team of all-men or a team of all-women. The same is true for teams that
are skill-diverse as well; teams that have a mix of people with differing
skill-levels and experiences out-perform their all-senior counterparts. The most
productive teams that I've worked on have been teams that have had a mix of
skill-levels and experiences.</p>
<p>Juniors make your teams better because that means things will need to be
explained in simpler terms than they were before. This makes things easier to
understand for all members of the team. Concepts are no longer talked about in a
jargon-y or high-level way all the time; instead: people understand things in an
easier way.</p>
<p>Juniors make your teams better because teams that have a junior tend to document
things more. Or at all.</p>
<p>For instance, a team I was a part of recently documented the flow of an event
out of our main monolithic Rails application and into some microservices. This
documentation was done for the junior developer's benefit and it consisted of a
flowchart made up in Omnigraffle. The best part about this piece of
documentation was that we had something we could <em>physically</em> point to when
talking about things we would only normally keep in our head.</p>
<p>The funniest thing about that piece of documentation was that the <em>senior</em>
developers ended up referring to it more than the junior! We stuck it on a wall
and then talked about the structure of the system while pointing at the
different pieces in the diagram. It really helped cement the structure into our
heads and helped us know where to make improvements in the system.</p>
<p>If it wasn't for our junior developer, we wouldn't have drawn up this diagram in
the first place. We would still be talking about this system at a high-level,
with only code to point to. The diagram really helped our team become more
productive.</p>
<p>This links into my next point:</p>
<p>Communication, especially when it comes to knowledge-sharing, becomes <em>explicit</em>
out of necessity, rather than the <em>implicit</em> style of communication usually
found in all-senior developer teams. When that team I was on was only senior
developers, we communicated implicitly about the structure of the two
applications. We all just assumed everyone knew what we were talking about. As
soon as we got a junior, that communication changed to favouring explicitness
over implicitness.</p>
<p>Also on the topic of communication: more questions get asked by the junior
than the seniors on the team, usually because the junior wants to learn. It's
not the questions themselves that are the most helpful, but the answers. The
answers to these questions not only help cement the junior's knowledge, but
they give the senior developer practice in understanding and explaining
concepts that they might not have explained otherwise. I've also learned <em>a
lot</em> from over-hearing someone else answering a question.</p>
<p>Sometimes a question from a junior can even spark a thought about how to
structure something better in the code, or how to document a part of the system
in further detail so that everyone on the team can better understand it. Those
&quot;why is this done this way?&quot; questions from juniors are my absolute favourite
because they often lead to system improvements.</p>
<p>One more thing: all of the juniors I have ever worked with have mentored senior
developers on the most important developer skill of all: patience. This is the
thing that juniors provide to your team that no senior can do. The seniors must
explain things to a junior, and that takes time. They might even have to explain
things more than once.</p>
<p>Patiently explaining something to someone, as I've said before, helps seniors
understand their own systems better and, in my experience, makes the seniors
much better developers than if they only had to explain things to other seniors.
They need to slow down and methodically explain things, which helps solidify the
senior's knowledge.</p>
<p>Patience is a virtue that more developers should learn. The ironic thing about
me saying this is that I'm a naturally impatient person (just ask anyone who's
known me for more than 5 minutes)... who's getting more patient because of the
mentoring I'm doing. Huh, maybe it works.</p>
<p>This is why we should hire junior developers: it makes our teams better. Things
are better understood. Documentation exists more on teams with juniors.  Clearer
communication channels open up out of necessity. Patience is taught. The team is
better for it.</p>
<p>Better teams ship better software and better software means happier users.</p>
<h2 id="hiring-juniors-at-culture-amp">Hiring Juniors at Culture Amp</h2>
<p>I know that juniors make teams better because we're making it happen at Culture
Amp. I live and breath this stuff as Culture Amp's Junior Engineering Program
Lead. My entire job is to train juniors up so that they can be productive
members of their teams.</p>
<p>Last year, Culture Amp hired seven new junior developers. We now have ten junior
developers across the company. This is a ratio of about one-in-five developers
at Culture Amp being a junior developer.</p>
<p>Here are the ten juniors that we currently have at Culture Amp. Each of these
juniors comes from a diverse background: They're not all 20-35, white, and male
and yet our company is still in business. Amazing, I know.</p>
<p>These juniors are a lot more fresh-faced than I was when I was a junior
developer. Here's a photo of junior-me. Definitely not fresh-faced.</p>
<p>At the end of November last year, we started up a structured training program
for these juniors called the Culture Amp Junior Engineering Program. This
program is designed to provide an accelerated learning environment for the
juniors that we have at Culture Amp.</p>
<p>During the program, we provide structured training to these 10 juniors over
the course of 6 months. When the 6 months are up at the end of May, they'll be
fully-fledged developers, capable of shipping things mostly on their own. At
that point, they'll then be working on their teams full-time. The progress
that these juniors have made so far has been nothing short of amazing. They're
well on their way to being confident and capable developers.</p>
<p>I'd like to highlight the fact that we've hired people who aren't all white,
male, 20-35, utterly amazing, top 5-10% senior Rails developers and yet...
everything is still OK. In fact, it's better than OK: it's awesome.</p>
<p>We've hired a mixed bunch of people with different skill levels and we train
them up and get them to work together on our applications. There's not a
single fire or brimstone as far as the eye can see.</p>
<p>We're growing the next batch of brilliant engineers today. And I can definitely
say that all of Culture Amp's teams have been made better by the addition of the
juniors.</p>
<h3 id="the-talent-code">The Talent Code</h3>
<p>If all of my points so far weren't convincing enough, then I would encourage you
to read a book called &quot;The Talent Code&quot;. As the subtitle says &quot;Greatness isn't
born. It's grown.&quot; It's about 300 pages long.</p>
<p>The book covers how skills of all varieties are grown in sports, music and
plenty of other industries.</p>
<p>All of the industries that are covered in the book have active mentorship and
apprenticeship programs. Yet, this is not deeply cared about in the programming
community, and I think that's because we're still quite a young community. We
aren't mature enough to think long- and-hard about mentorship and the
sustainability of talent in this community within our companies. We haven't had
to think about potential &quot;succession plans&quot; for our codebases: Who will
maintain our code after we are gone? Our industry is not quite yet old enough to
have needed this.</p>
<p>More established industries that have been around longer have learned this
lesson. They realise that the people who are doing the work <em>today</em> are not
going to be doing the work forever. And so they have these active mentorship
and apprenticeship programs to ensure a fresh supply of talent to their
industries. I think we're on the cusp of realising this today.</p>
<p>Put another way: If Rails was a person, that person would not even be old enough
to have graduated high-school, let alone make adult decisions. This is reflected
in the design choices of the framework, but that's a conversation for another
day.</p>
<p>Back to my point: I think it might take us a touch longer to realise that
training for the future is the right thing to do. It ensures that we have a
stable talent pool that we can hire from, and overall leads to better
performance for teams.</p>
<p>Back to the book: I'll let you in on the secret that's in the Talent Code: for
anyone to get better at anything, they need to have three core components:</p>
<ol>
<li>They must practice the hell out of it</li>
<li>They must have a passion (or a drive) for whatever they're learning</li>
<li>They must have a good mentor who is encouraging and can
provide sound advice.</li>
</ol>
<p>You should definitely read this book. It really helped me understand why
it's important to mentor newbies in any community, and taught me a bit about
<em>how</em> people learn. It's definitely worthwhile to read.</p>
<p>One thing that it really highlighted for me was that the best of the best, the
Beyonces, the Kanyes, and the Ricks, didn't just one day appear out of thin air.
These people practiced the hell out of their craft, they have a passion for what
they do and they had great mentors who helped guide them. These people were
trained over <em>years</em> and that's how they got where they are today. We should do
the same for our industry to build our talent pool.</p>
<p>How do we expect to have more of our own great talent to hire if we're not
hiring juniors and letting them improve their skills by practicing on real
world applications? Remember: these people need to practice the hell out of
programming, have a passion for it and they need to have a good mentor.</p>
<p>These people do not simply pop into existence. This isn't the Matrix: we can't
just plug in, and a few seconds later we just <em>know</em> Rails like Keanu and Kung
fu. These juniors cannot just sleep on a copy of Rails 4 in Action and wake up
<em>knowing</em> Rails. These juniors have to be taught.</p>
<p>We have to grow talent if we want talent. The Talent Code helped me understand
this point very clearly.</p>
<h2 id="you-should-hire-a-junior">You should hire a junior</h2>
<p>I think your companies should try to hire juniors and to mentor them. I know
I've said that a few times already, but I really want to drive that point home.</p>
<p>I'm not suggesting that you should hire a batch of them all at once like Culture
Amp did. I think you should just start at hiring a single junior. Interview a
couple and pick one from that batch. If your company is at least 4 developers
and at least one of them wants to mentor, you can hire and support a junior. I
believe in you. You can do it!</p>
<p>Rather than running a structured mentorship program like Culture Amp does, you
can start by hiring a single junior and pairing with them to grow their skills
and your team. This will lay the groundwork for hiring more juniors later on.</p>
<p>Your next question might be: &quot;what do <em>we</em> (as a company) get out of hiring a
junior?&quot; Were you not paying attention at the beginning of this talk? They make
your teams better! That's what you get out of it: better <em>and bigger</em> teams. We as
a community also get some new members, and that's a big positive in my eyes too.</p>
<hr />
<h2 id="finding-juniors">Finding Juniors</h2>
<p>Now that I've hopefully convinced you to hire a junior, you might be thinking:
where do you find these juniors? What do I do with them once I have them?
Well, I have some tips!</p>
<p>Regarding finding the juniors: let's start with two places where you can find
a lot of them: Code Academies and universities.</p>
<p>Code academies and universities produce great talent, but that talent often
has a hard time finding a job afterwards because, as I mentioned earlier, the
bar for hiring at a lot of companies is too high. It feels to me like there's
a big chasm between someone graduating and getting a job at a Ruby development
shop. I hear this from a lot of junior developers that I talk to as well.</p>
<p>In fact, I even drew you a picture using my amazing powers of illustration.
The junior, shown here on the left in amazing detail, tries to make the jump
from graduating these schools to being placed in what they call &quot;a real job&quot;.
When they take this leap, they fall short, smashing into the Wall of Rejection
and leave a bloody smear as they fall down into the Pit of Depression. When we
hire and train up juniors we will begin work to close this chasm. We make it
easier for juniors to make this transition into our community.</p>
<p>Remember: senior devs don't grow on trees. We must give juniors a chance.  If
you want to hire a junior, first lower your hiring bar and then take a look at
the people coming out of code academies and universities.</p>
<p>We've hired 3 people at Culture Amp from places like this: Jaime, Rebecca and
Jasmine. Jaime comes from Coder Academy in Melbourne, and Rebecca and Jasmine
both went to the same university, RMIT in Melbourne. All three of these junior
developers have a great talent for learning and self-development and we're glad
to have them working for us.</p>
<p>But then there are definitely juniors who have that same kind of
eagerness-to-learn and motivation who have never been to a code academy or a
university.</p>
<p>Out of the Culture Amp juniors I mentioned before, three fit this bill: Rayma,
Namibia and Julie.  While they haven't gone through intensive coding schools
or universities, they still bring to Culture Amp a great set of skills that
they've built up themselves. Their ability to learn on their own far exceeds
those who have been classically taught, because they haven't had that support
net. Their tenacity for problem-solving and battling through things they don't
know is inspiring.</p>
<p>The people who come from coding academies, universities and who are self-
taught are the future brilliant developers of this community and we all must
hire and start training them <em>today</em>.</p>
<h3 id="interviewing-juniors">Interviewing Juniors</h3>
<p>OK, now that you've found a junior you're probably going to want to interview
them to get an idea about who they are.</p>
<p>When interviewing a junior, it's important to remember that it's probably going
to be one of their <em>first ever</em> programming job interviews. Treat them gentle.
Do not try to trap them with programming riddles, or vague trivia. Your
interview process should be more like a relaxed chat than an interrogation. You
want them to feel comfortable and welcome, not like you're their enemy.</p>
<p>And then after the interview, I want you to do something different: give them
some feedback on how it went. Even if you're going to reject them.</p>
<p>There are three simple rules for this feedback. It must be all of:</p>
<ul>
<li>Actionable</li>
<li>Specific</li>
<li>Kind</li>
</ul>
<p>If the feedback is Actionable and Specific but not Kind, then it might seem like a
criticism. If it is Actionable and Kind but not Specific, then the junior might
not know what they could do to do better next time. And so on.</p>
<p>We did this with Culture Amp's Junior Engineering Program, giving <em>on average</em>
7 pages of written feedback per candidate, for a total somewhere in the range
of 400 pages. We're a feedback company, and so we have a reputation to uphold.
But this wasn't the only reason why we compiled this feedback. The more
important reason is that we dind't want people to apply, only to slam into
that Wall of Rejection and fall into the Pit of Depression.</p>
<p>We used the &quot;Actionable, Specific and Kind&quot; rules because we felt that
feedback that is Actionable, Specific and Kind would motivate juniors towards
self-improvement, even if they didn't &quot;pass&quot; our interview phase. A flat &quot;no&quot;
would be incredibly de-motivating to receive as a junior. We didn't want that.
We wanted to encourage them even if we rejected them.</p>
<p>When interviewing juniors, you should give them some feedback too. It doesn't
have to be seven pages worth of feedback per candidate. Even just a single page
of feedback can be incredibly valuable for a junior.</p>
<p>Juniors <em>thrive</em> given this sort of feedback. It's vital for their future
growth. Putting in a little bit of extra effort for juniors will help them grow.
Proivde them some Actionable, Specific and Kind feedback after you interview
them.</p>
<h2 id="mentorship">Mentorship</h2>
<p>OK, so we've talked about where to potentially find juniors and a little tip
about interviewing them, but what do you do once you have interviewed and hired
them?</p>
<p>Well, for starters: they're going to need <em>a lot</em> of love and attention. You can't
just put them in the corner and expect them to thrive. Think more of them like a
puppy than a cactus: the puppy needs love and attention and some training, but
the cactus needs only sunshine and some water.  The cactus is indifferent to
your love, your attention or the intensity of the training you provide. Cacti
are going to Cacti.</p>
<p>Junior developers don't grow into senior developers with just sunshine and
water. And they don't do it just by practicing development by themselves,
either. They need mentorship and thrive on direction!</p>
<p>As I said before when talking about the Talent Code: Juniors need to practice
the hell out of developing things and need good mentorship to really thrive. We
must provide them these opportunities to practice, and we must provide them with
mentoring.</p>
<h3 id="its-ok-to-ask-questions">It's OK to ask questions</h3>
<p>There's an event called the Melbourne Ruby Hack Night. This event is a
judgement-free environment where anyone and everyone can bring along a Ruby
project and work on it. Some people are even there for the first time learning
about Ruby itself, which is so great to see. These Hack Nights work because
these new developers feel safe and welcome and that no question is too &quot;dumb&quot;
to ask.</p>
<p>Just like at the Hack Night, it should be OK for anyone to ask a question
about <em>anything</em> when they work with you at your company. In fact, print this
slide up on some A1 paper and stick it to your wall.</p>
<p>Very clearly outlining to juniors that it's OK to ask <em>any</em> question about
<em>anything</em> is a great place to start. And repeat that as much as possible,
too.</p>
<h3 id="pairing">Pairing</h3>
<p>A great way to build that kind of hack-night-esque fostering environment is to
encourage pair programming. Pairing with juniors on small tasks initially is a
great way to build up their confidence. When I've been mentoring juniors, the
number one thing that I find that they're lacking isn't necessarily the skill,
but the confidence. They know the answer, but they aren't sure if it's the
<em>right</em> answer. They question if they're using the right syntax or even if they
should be writing the code that particular way. When a senior pairs with a
junior, they can encourage them to try out things and learn from the things that
they try. If the junior gets it wrong, the senior can ensure them that it's OK
to get things wrong and to guide them back on track. Pairing is the quickest way
to upskill a junior and I can highly, highly recommend it.</p>
<p>Remember: puppy, not cactus. If we want talent, we have to train talent.</p>
<p>Pairing also helps reinforce your own knowledge. If you can't explain
something to someone clearly, then you do not understand it well enough
yourself. Pairing is helpful to the junior because they get knowledge out of
it, but it's also helpful to the senior: they learn how to share what's in
their brain with other people in a clearer fashion. As I said before, it also
teaches the most valuable skill of all: patience. I have benefited more than
I can count by pairing as the more &quot;senior&quot; of the pair. Not just because I get
to practice patience, but also because I have learned many new things myself
when pairing.</p>
<h3 id="what-do-you-pair-on-with-juniors">What do you pair on with juniors?</h3>
<p>Suggesting pairing is all well and good in theory, but in reality: what should
you pair with your junior on? Well, Lydia Guarino has some good tweets about
that.</p>
<ol>
<li>
<p>For junior devs, a good guideline for scope is something that can be
completed in 2-3 days. You want to keep your feedback loop short.</p>
</li>
<li>
<p>Tasks with scope of more than 3 days are tasks that are not defined well
enough. Break them down further.</p>
</li>
</ol>
<p>I agree with both of these. Juniors thrive best when they're given quick wins.
You want that nice tight feedback loop to keep their confidence growing. Every
time they &quot;win&quot; at code, their confidence gets that little bit more boosted.
At Culture Amp, we started our juniors out on fixing bugs or working on little
features and then moved them up to trickier bugs and harder features from
there. Most bugs didn't take more than a day for the juniors to fix. Now we
give them harder bugs and harder features. We kept the feedback loop short
early on to build up their confidence with our codebase.</p>
<p>Once they've built up a bit of confidence, you can let them go solo on a task.
There isn't a set timeframe for when this happens; it's all about how
confident the junior is with their own abilities. Let them loose on something
small and make it clear that they can ask any questions about what they're
doing and that there is no wrong way of doing it. They won't ship fast to
begin with. The fast comes with practice. Let them practice.</p>
<p>Once they're done, get them to submit their work in a pull request and then --
this part's important -- sit together and review it.</p>
<p>Sitting together is important here because &quot;why are you doing this?&quot; written
in text has no emotion, compared to it spoken with body language. Juniors may
interpret a &quot;why are you doing this?&quot; comment as aggressive like &quot;UGH! Why are
you doing this?&quot;.</p>
<p>Focussing on in-person communication helps establish a rapport between the
developers much better than text-based communication ever will.</p>
<p>If a junior has made a mistake in the pull request then you can discuss it
with them and talk about possible ways to correct the mistake. Pull request
reviews are great for this reason.</p>
<p>Code review also allows the senior to assess how well the junior has been
doing on the tasks they've been given. If they're doing well on a 2-day task,
then it's probably going to be OK to give them a 4-day task too. If not, then
some more mentoring may be required. And that's perfectly OK. Give them that
mentorship and direction, and try again.</p>
<h3 id="feeling-welcome">Feeling welcome</h3>
<p>Ultimately, your mentorship should be about making the junior feel welcome and
safe within your team. You've probably sensed this as a theme to my points
already, but I want to take the last few minutes of this talk to really drive
this point home: In fact, this should be what's happening with <em>everyone</em> in
your team.</p>
<p>Don't just take my word for it. Google ran a study called &quot;Project Aristotle&quot;
wherein [they attempted to find how to build effective
teams](<a href="https://rework.withgoogle.com/blog/five-keys-to-a-successful-google-">https://rework.withgoogle.com/blog/five-keys-to-a-successful-google-</a>
team/). They interviewed hundreds of their own employees and they came up with 5
things:</p>
<div class='center'>
  <img src='https://lh3.googleusercontent.com/eQ_WsRq5-q-m_41eEI6GLEObqpxBYJd1pm96gIa-eRSn-QXlPjwO5K6O-DHU8sxny3ChnIQE0mjpnXaaW7QAhQ=s0'>
</div>
<p>The #1 item on this list isn't &quot;Feeling welcome&quot;, but &quot;Psychological safety&quot;.
The text underneath says: &quot;Team members feel safe to take risks and be
vulnerable in front of each other.&quot;</p>
<p>You probably recognise that some of these things sound a lot like the
&quot;Love/belonging&quot;, &quot;Esteem&quot; and &quot;Self-actualisation&quot; parts of <a href="https://en.wikipedia.org/wiki/Maslow%27s_hierarchy_of_needs">Maslow's
hierarchy of
needs</a>. This
indicates that Professor Maslow was probably onto something.</p>
<p>Juniors should ultimately feel safe to take risks and to be vulnerable in our
teams. Juniors will make mistakes. We've all made mistakes. Ask me about that
time I dropped the production database for a multi-thousand user client of a
consultancy... and we had no backups. Hopefully you have processes to prevent
this sort of thing happening with your juniors when you hire them.</p>
<p>The remainder of this list is not to be discounted. Dependability, Structure &amp;
Clarity, Meaning and Impact are all vital to junior developers progressions. A
junior must be able to depend on the people around them for support. They must
have clarity on what their direction is. They must feel like they're
contributing back to a greater whole to keep them motivated; it's that drive
that I talked about earlier.</p>
<p>When you hire a junior developer, keep these things in mind and ask yourself
regularly if you're following along with them. These things should underpin
everything you do with the junior.</p>
<p>With a concerted effort to make the junior feel pyschologically safe, and some
semi-structured mentoring in place, they can grow into the future's most
brilliant developers.</p>
<hr />
<p>We must start hiring and mentoring junior developers. If not today (because
you're at a conference) then do it next week. Grow your company and this
community and make your teams better. Hiring juniors is the way to grow our
teams and this wonderful community.</p>
<p>I hope that with a concerted effort to hire juniors, our Active Mantra can
change into &quot;Hiring and mentoring junior developers&quot;. That would be wonderful.</p>
]]></content>
 </entry>
 
 
</feed>